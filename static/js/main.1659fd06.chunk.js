(this["webpackJsonpkindness-tracker"]=this["webpackJsonpkindness-tracker"]||[]).push([[0],{52:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var c=n(2),i=n.n(c),r=n(46),s=n.n(r),l=(n(52),n(1)),a=n(47),o=n.n(a),d=n(6),u=n(4),j=n(0),b=n(9),f=n.n(b),p=function(e,t){var n=t.topRight,c=t.bottomLeft;e.fitBounds([[c.lng,c.lat],[n.lng,n.lat]])},h=function(e,t){u.select(".map-tooltip").transition().duration(0).style("opacity",.8).style("left","".concat(e.pageX+50,"px")).style("top","".concat(e.pageY-50,"px"))},O=function(){u.selectAll(".circle").transition().duration(500).style("fill","steelblue")},x="ID NUMBER on kindness card",v="CITY where act of kindness took place",m="[Optional] Tell us about the act of kindness you received!",y=n(13),g=function(e){var t=e.node,n=e.isSelected;if(!t)return null;var c,i,r=t[v],s=t.STATE,l=t[m];return Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{children:Object(j.jsxs)("b",{children:[r?"".concat(r,", "):null,s]})}),Object(j.jsx)("p",{children:Object(j.jsx)("b",{children:(c=l,i=140,c.length>i?"".concat(c.substring(0,i)):c)})}),Object(j.jsx)("p",{children:n?null:"Click for more info!"})]})},N=n(18),k=(n(78),{width:"100vw",height:"100vh",position:"absolute"});f.a.accessToken="pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ",f.a.workerClass=y.a;var L=function(e){var t,n,i=e.setIsLoading,r=e.data,s=e.selectedNode,a=e.setSelectedNode,o=e.hoveredNode,b=e.setHoveredNode,v=e.traceNode,m=e.traceList,y=e.setTraceList,L=e.traceIndex,C=Object(c.useState)(null),T=Object(l.a)(C,2),S=T[0],I=T[1],M=Object(c.useRef)(null),w=function(e){return e?e.map((function(e,t){return Object(N.a)(Object(N.a)({},e),{},{index:t})})):null}(r),E=function(e){return"circle-".concat(e.index)},A=function(e){return"circle circle-".concat(e[x])},J=w?function(e,t){var n=t/69,c=function(t){return e.map((function(e){return e[t]}))},i=Math.max.apply(Math,Object(d.a)(c("lng"))),r=Math.min.apply(Math,Object(d.a)(c("lng"))),s=Math.max.apply(Math,Object(d.a)(c("lat")));return{topRight:{lng:i+n,lat:Math.min.apply(Math,Object(d.a)(c("lat")))+n},bottomLeft:{lng:r-6*n,lat:s-n}}}(w.map((function(e){return{lng:e.CenterLon,lat:e.CenterLat}})),200):null;return Object(c.useEffect)((function(){!S&&w&&function(e){var t=e.setMap,n=e.mapContainer,c=e.boundingObject,i=new f.a.Map({container:n.current,style:"mapbox://styles/mapbox/light-v10"});p(i,c),i.on("load",(function(){t(i)}))}({setMap:I,mapContainer:M,boundingObject:J})}),[S,w]),Object(c.useEffect)((function(){if(S&&null!==r){var e=S.getCanvasContainer(),t=u.select(e).append("svg").attr("width","100%").attr("height","100%").style("position","absolute").style("z-index",2).style("top",0).style("left",0),n=function(e){return S.project(new f.a.LngLat(e.CenterLon,e.CenterLat))},c=t.selectAll("circle").data(w).enter().append("circle").attr("id",E).attr("class",A).attr("r",10).style("fill","steelblue").on("mouseover",(function(e,t){b(t),h(e)})).on("mousemove",(function(e,t){h(e)})).on("mouseout",(function(e,t){var n;n=function(){return b(null)},u.select(".map-tooltip").transition().duration(500).style("opacity",0).on("end",n)})).on("click",(function(e,t){O(),u.select("#".concat(E(t))).transition().duration(500).style("fill","red"),e.target,S.flyTo({center:[t.CenterLon,t.CenterLat],zoom:12,essential:!0}),a(t)})),s=function(){c.attr("cx",(function(e){return n(e).x})).attr("cy",(function(e){return n(e).y}))};return S.on("viewreset",s),S.on("move",s),S.on("moveend",s),S.on("load",(function(){S.resize()})),s(),i(!1),function(){return S.remove()}}}),[S,r]),Object(c.useEffect)((function(){S&&r&&!s&&(p(S,J),O())}),[S,r,s]),Object(c.useEffect)((function(){if(v){var e=w.filter((function(e){return e[x]==v[x]}));O(),u.selectAll(".circle").filter((function(e){return e[x]==v[x]})).transition().duration(500).style("fill","purple"),p(S,J),y(e)}}),[v]),Object(c.useEffect)((function(){if(S&&m&&L>-1){var e=m[L];S.flyTo({center:[e.CenterLon,e.CenterLat],zoom:12,essential:!0}),O(),u.selectAll(".circle").filter((function(e){return e[x]==v[x]})).transition().duration(500).style("fill","purple"),u.select("#".concat(E(m[L]))).transition().duration(500).style("fill","green")}}),[L]),Object(j.jsx)("div",{ref:function(e){return M.current=e},style:k,children:Object(j.jsx)("div",{className:"map-tooltip",style:{opacity:0},children:Object(j.jsx)(g,{node:o,isSelected:(t=o,n=s,!(!t||!n)&&t.index==n.index)})})})},C=(n(79),function(e){var t=e.node;if(!t)return null;var n=t["[Optional] STREET NAME"],c=t[v],i=t.STATE,r=t["[OPTIONAL] ZIP CODE"],s=t[m];return Object(j.jsxs)("div",{className:"kindness-card-inner",children:[Object(j.jsxs)("p",{children:["Address: ",Object(j.jsx)("b",{children:n||"No street provided."})]}),Object(j.jsxs)("p",{children:["City: ",Object(j.jsx)("b",{children:c||"No city provided."})]}),Object(j.jsxs)("p",{children:["State: ",Object(j.jsx)("b",{children:i||"No state provided."})]}),Object(j.jsxs)("p",{children:["Zip Code: ",Object(j.jsx)("b",{children:r||"No zip code provided."})]}),Object(j.jsx)("p",{children:"Act of Kindness Description:"}),Object(j.jsx)("p",{children:Object(j.jsx)("b",{children:s||"No kindess description provided."})})]})}),T=(n(80),function(){return Object(j.jsxs)("div",{className:"loading-wrapper",children:[Object(j.jsx)("div",{className:"la-ball-clip-rotate la-2x",children:Object(j.jsx)("div",{})}),Object(j.jsx)("p",{children:"Loading..."})]})}),S=function(){return Object(j.jsx)("div",{children:Object(j.jsx)("p",{children:"Click a circle to explore that act of kindness further!"})})},I=function(e){var t=e.isLoading,n=e.selectedNode,c=e.setSelectedNode,i=e.setTraceNode,r=e.traceList,s=e.setTraceList,l=e.traceIndex,a=e.setTraceIndex;return Object(j.jsxs)("div",{className:"sidebar-flex",children:[Object(j.jsx)("h1",{children:"Kindess Tracker"}),t?Object(j.jsx)(T,{}):null,t||n?null:Object(j.jsx)(S,{}),Object(j.jsx)("div",{className:"selected-card-wrapper",children:Object(j.jsx)(C,{node:n})}),n?Object(j.jsx)("button",{onClick:function(){c(null),s([]),a(-1)},children:"Clear Selected Node"}):null,n?Object(j.jsx)("button",{onClick:function(){return i(n)},children:"Trace this Act!"}):null,r?r.map((function(e,t){return Object(j.jsx)("p",{onClick:function(){return a(t)},style:{color:t==l?"blue":"white",cursor:"pointer"},children:e[x]},t)})):null]})},M=n(19),w=n.n(M);n(81);w.a.workerClass=y.a,w.a.accessToken="pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ";var E=function(){var e=Object(c.useState)(null),t=Object(l.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(!0),s=Object(l.a)(r,2),a=s[0],d=s[1],u=Object(c.useState)(null),b=Object(l.a)(u,2),f=b[0],p=b[1],h=Object(c.useState)(null),O=Object(l.a)(h,2),x=O[0],v=O[1],m=Object(c.useState)(null),y=Object(l.a)(m,2),g=y[0],N=y[1],k=Object(c.useState)([]),C=Object(l.a)(k,2),T=C[0],S=C[1],M=Object(c.useState)(-1),w=Object(l.a)(M,2),E=w[0],A=w[1];return Object(c.useEffect)((function(){null===n&&o.a.init({key:"https://docs.google.com/spreadsheets/d/1BvBwyy1xYYhdiokMfbyxssu5nlB0arRMvxyuQLCzsH4/pubhtml",simpleSheet:!0}).then((function(e){i(e)})).catch(console.warn)}),[n]),Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("div",{className:"horizontal-stack",children:[Object(j.jsx)("div",{className:"left-sidebar",children:Object(j.jsx)(I,{isLoading:a,selectedNode:f,setSelectedNode:p,setTraceNode:N,traceList:T,setTraceList:S,traceIndex:E,setTraceIndex:A})}),Object(j.jsx)("div",{className:"map-wrapper",children:Object(j.jsx)(L,{data:n,setIsLoading:d,selectedNode:f,setSelectedNode:p,hoveredNode:x,setHoveredNode:v,traceNode:g,traceList:T,setTraceList:S,traceIndex:E})})]})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,83)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),i(e),r(e),s(e)}))};s.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(E,{})}),document.getElementById("root")),A()}},[[82,1,2]]]);
//# sourceMappingURL=main.1659fd06.chunk.js.map