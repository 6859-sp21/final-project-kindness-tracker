(this["webpackJsonpkindness-tracker"]=this["webpackJsonpkindness-tracker"]||[]).push([[0],{53:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var c=n(2),i=n.n(c),r=n(47),s=n.n(r),a=(n(53),n(1)),l=n(48),o=n.n(l),d=n(6),u=n(4),j=n(0),b=n(9),p=n.n(b),f="ID Number on kindness card",h="(Optional) Tell us about the act of kindness you received!",O=function(e,t){u.select(".map-tooltip").transition().duration(0).style("opacity",.8).style("left","".concat(e.pageX+50,"px")).style("top","".concat(e.pageY-50,"px"))},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"steelblue";return u.selectAll(".circle").transition().duration(500).style("fill",e)},x=function(e){return"circle-".concat(e.index)},v=function(e){return"circle circle-".concat(e[f])},g=function(e){return e.map((function(e){return{lng:e.center_lng,lat:e.center_lat}}))},N=function(e,t){return e.project(new p.a.LngLat(t.center_lng,t.center_lat))},y=function(e){u.selectAll(".circle").attr("cx",(function(t){return N(e,t).x})).attr("cy",(function(t){return N(e,t).y}))},k=n(14),T=function(e){var t=e.node,n=e.isSelected;if(!t)return null;console.log("rendering tooltip");var c,i,r=t.admin_level_3,s=t.admin_level_1,a=t[h];return Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{children:Object(j.jsxs)("b",{children:[r?"".concat(r,", "):null,s]})}),Object(j.jsx)("p",{children:Object(j.jsx)("b",{children:(c=a,i=140,c.length>i?"".concat(c.substring(0,i),"..."):c)})}),Object(j.jsx)("p",{children:n?null:"Click for more info!"})]})},C=n(19),S=n(12),M="lng",L="lat",_=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=0,r=0;n||(i=t/69),r=i;var s=c?8:1,a=function(t){return e.map((function(e){return e[t]}))},l=Math.max.apply(Math,Object(d.a)(a(M))),o=Math.min.apply(Math,Object(d.a)(a(M))),u=Math.max.apply(Math,Object(d.a)(a(L))),j=Math.min.apply(Math,Object(d.a)(a(L)));return n&&(i=(l-o)*t,r=(u-j)*t),{topRight:{lng:l+i,lat:j+r},bottomLeft:{lng:o-i*s,lat:u-r}}};n(79);p.a.accessToken="pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ",p.a.workerClass=k.a;var I=function(e){var t,n,i=e.trace,r=e.setIsLoading,s=e.selectedNode,l=e.setSelectedNode,o=e.hoveredNode,d=e.setHoveredNode,b=e.isTracing,h=e.setTrace,N=e.resetTrace,k=Object(c.useState)(null),C=Object(a.a)(k,2),S=C[0],M=C[1],L=Object(c.useState)(null),I=Object(a.a)(L,2),w=I[0],D=I[1],E=Object(c.useRef)(null);return Object(c.useEffect)((function(){if(null===S)!function(e){var t=e.setMap,n=e.mapContainer,c=new p.a.Map({container:n.current,style:"mapbox://styles/mapbox/light-v10",center:[-100,40],zoom:3});c.on("load",(function(){t(c)}))}({setMap:M,mapContainer:E});else{var e=S.getCanvasContainer();u.select(e).append("svg").attr("class","map-svg").attr("width","100%").attr("height","100%").style("position","absolute").style("z-index",2).style("top",0).style("left",0),S.on("viewreset",(function(){return y(S)})),S.on("move",(function(){return y(S)})),S.on("moveend",(function(){return y(S)})),S.on("load",(function(){return S.resize()}))}}),[S]),Object(c.useEffect)((function(){if(S&&i){u.select(".map-svg").selectAll("circle").data(i,(function(e){return e.index})).join((function(e){return e.append("circle").attr("id",x).attr("class",v).attr("r",10).style("fill","steelblue").on("click",(function(e,t){return l(t)})).on("mouseover",(function(e,t){d(t),O(e)})).on("mousemove",(function(e,t){O(e)})).on("mouseout",(function(e,t){var n;n=function(){return d(null)},u.select(".map-tooltip").transition().duration(500).style("opacity",0).on("end",n)}))}),(function(e){return e}),(function(e){return e.remove()})),y(S),r(!1);var e=_(g(i),i.length>1?.05:1,i.length>1,i.length>1);D(e)}}),[S,i]),Object(c.useEffect)((function(){w&&function(e,t){var n=t.topRight,c=t.bottomLeft;e.fitBounds([[c.lng,c.lat],[n.lng,n.lat]],{duration:3e3})}(S,w)}),[w]),Object(c.useEffect)((function(){if(b)m("purple").attr("r",10),u.select("#".concat(x(s))).transition().duration(500).style("fill","green").attr("r",30);else if(s){m(),u.select("#".concat(x(s))).transition().duration(500).style("fill","red").attr("r",10);var e=_(g([s]),1,!1,!1);D(e)}else if(i){var t=_(g(i),.05,!0);D(t),m()}}),[s,b]),Object(c.useEffect)((function(){if(b){var e=i.filter((function(e){return e[f]===s[f]})).sort((function(e,t){return e.dateTime.toMillis()-t.dateTime.toMillis()}));h(e)}else N()}),[b]),Object(j.jsx)("div",{ref:function(e){return E.current=e},className:"map-container-div",children:Object(j.jsx)("div",{className:"map-tooltip",style:{opacity:0},children:Object(j.jsx)(T,{node:o,isSelected:(t=o,n=s,!(!t||!n)&&t.index==n.index)})})})},w=(n(80),function(e){var t=e.node;if(console.log("rendering card"),!t)return null;t.Timestamp;var n=t.street_name,c=t.admin_level_3,i=t.admin_level_1,r=t.zip_code,s=t[h],a=t.dateTime,l=a.toLocaleString(S.DateTime.DATE_FULL),o=a.toLocaleString(S.DateTime.TIME_SIMPLE);return Object(j.jsxs)("div",{className:"kindness-card-inner",children:[Object(j.jsxs)("p",{children:["Date: ",Object(j.jsx)("b",{children:l})]}),Object(j.jsxs)("p",{children:["Time: ",Object(j.jsx)("b",{children:o})]}),Object(j.jsxs)("p",{children:["Address: ",Object(j.jsx)("b",{children:n||"No street provided."})]}),Object(j.jsxs)("p",{children:["City: ",Object(j.jsx)("b",{children:c||"No city provided."})]}),Object(j.jsxs)("p",{children:["State: ",Object(j.jsx)("b",{children:i||"No state provided."})]}),Object(j.jsxs)("p",{children:["Zip Code: ",Object(j.jsx)("b",{children:r||"No zip code provided."})]}),Object(j.jsx)("p",{children:"Act of Kindness Description:"}),Object(j.jsx)("div",{className:"kindess-card-description",children:Object(j.jsx)("p",{children:Object(j.jsx)("b",{children:s||"No kindess description provided."})})})]})}),D=(n(81),function(){return console.log("rendering loading"),Object(j.jsxs)("div",{className:"loading-wrapper",children:[Object(j.jsx)("div",{className:"la-ball-clip-rotate la-2x",children:Object(j.jsx)("div",{})}),Object(j.jsx)("p",{children:"Loading..."})]})}),E=function(){return console.log("rendering side info card"),Object(j.jsxs)("div",{children:[Object(j.jsx)("hr",{className:"sidebar-divider"}),Object(j.jsx)("h3",{children:"Click a circle to explore that act of kindness further!"})]})},F=function(e){var t=e.isTracing,n=e.setIsTracing,c=e.trace,i=e.selectedNode,r=e.setSelectedNode;if(console.log("rendering trace"),!t)return null;var s=c.indexOf(i),a=c.length;return Object(j.jsxs)("div",{className:"trace-stepper-wrapper",children:[Object(j.jsxs)("div",{className:"trace-stepper-button-horizontal",children:[Object(j.jsx)("button",{disabled:0===s,onClick:function(){return r(c[0])},children:"Earliest"}),Object(j.jsx)("button",{disabled:0===s,onClick:function(){return r(c[s-1])},children:"Previous"}),Object(j.jsx)("button",{disabled:s===a-1,onClick:function(){return r(c[s+1])},children:"Next"}),Object(j.jsx)("button",{disabled:s===a-1,onClick:function(){return r(c[a-1])},children:"Latest"})]}),Object(j.jsx)("p",{children:"".concat(s+1," / ").concat(c.length)}),Object(j.jsx)(w,{node:i}),Object(j.jsx)("div",{className:"trace-stepper-button-below",children:Object(j.jsx)("button",{onClick:function(){n(!1)},children:"Exit Trace Mode"})})]})},J=function(e){var t=e.isLoading,n=e.selectedNode,c=e.setSelectedNode,i=e.isTracing,r=e.setIsTracing,s=e.trace;return console.log("rendering sidebar"),Object(j.jsxs)("div",{className:"sidebar-flex",children:[Object(j.jsx)("h1",{children:"Kindess Tracker"}),t?Object(j.jsx)(D,{}):null,t||n?null:Object(j.jsx)(E,{}),i?null:Object(j.jsx)("div",{className:"selected-card-wrapper",children:Object(j.jsx)(w,{node:n})}),Object(j.jsxs)("div",{className:"sidebar-clear-div",children:[n&&!i?Object(j.jsx)("button",{className:"sidebar-button-below",onClick:function(){c(null),r(!1)},children:"Clear Selected Node"}):null,n&&!i?Object(j.jsx)("button",{onClick:function(){return r(!0)},children:"Trace this Act!"}):null]}),Object(j.jsx)(F,{isTracing:i,setIsTracing:r,trace:s,selectedNode:n,setSelectedNode:c}),Object(j.jsxs)("div",{className:"sidebar-bottom-content",children:[Object(j.jsx)("p",{className:"sidebar-small-text",children:"Christian Moroney, Jackson Bernatchez, Kevin Lyons"}),Object(j.jsx)("p",{className:"sidebar-small-text",children:"6.859 Final Project Spring 2021"}),Object(j.jsx)("div",{children:Object(j.jsx)("a",{href:"https://github.com/6859-sp21/final-project-kindness-tracker",target:"_blank",children:Object(j.jsx)("img",{className:"sidebar-git-image",src:"https://image.flaticon.com/icons/png/512/25/25231.png"})})})]})]})},A=n(20),z=n.n(A);n(82);z.a.workerClass=k.a,z.a.accessToken="pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ";var P=function(){var e=Object(c.useState)(null),t=Object(a.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(null),s=Object(a.a)(r,2),l=s[0],d=s[1],u=Object(c.useState)(!0),b=Object(a.a)(u,2),p=b[0],f=b[1],h=Object(c.useState)(null),O=Object(a.a)(h,2),m=O[0],x=O[1],v=Object(c.useState)(null),g=Object(a.a)(v,2),N=g[0],y=g[1],k=Object(c.useState)(!1),T=Object(a.a)(k,2),M=T[0],L=T[1];Object(c.useEffect)((function(){null===n&&o.a.init({key:"https://docs.google.com/spreadsheets/d/1IqEBIcnFZ_BFCrD8jhk11yVoOjfxzZpiZLdL4cL3oK0/pubhtml",simpleSheet:!0}).then((function(e){var t=function(e){return e?e.map((function(e,t){return Object(C.a)(Object(C.a)({},e),{},{index:t,dateTime:S.DateTime.fromFormat(e.Timestamp,"MM/dd/yy h:mm a")})})):null}(e);i(t),d(t)})).catch(console.warn)}),[n]);return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("div",{className:"horizontal-stack",children:[Object(j.jsx)("div",{className:"left-sidebar",children:Object(j.jsx)(J,{isLoading:p,selectedNode:m,setSelectedNode:x,isTracing:M,setIsTracing:L,trace:l})}),Object(j.jsx)("div",{className:"map-wrapper",children:Object(j.jsx)(I,{trace:l,setIsLoading:f,selectedNode:m,setSelectedNode:x,hoveredNode:N,setHoveredNode:y,isTracing:M,setTrace:d,resetTrace:function(){return d(n)}})})]})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,84)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),i(e),r(e),s(e)}))};s.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(P,{})}),document.getElementById("root")),Y()}},[[83,1,2]]]);
//# sourceMappingURL=main.55b63bb8.chunk.js.map