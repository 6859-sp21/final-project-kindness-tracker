(this["webpackJsonpkindness-tracker"]=this["webpackJsonpkindness-tracker"]||[]).push([[0],{53:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),o=n(46),i=n.n(o),l=(n(53),n(1)),s=n(47),a=n.n(s),d=n(6),u=n(4),j=n(0),b=n(9),f=n.n(b),p=function(e,t){var n=t.topRight,c=t.bottomLeft;e.fitBounds([[c.lng,c.lat],[n.lng,n.lat]])},h=function(e,t){u.select(".map-tooltip").transition().duration(0).style("opacity",.8).style("left","".concat(e.pageX+50,"px")).style("top","".concat(e.pageY-50,"px"))},O=function(){return u.selectAll(".circle").transition().duration(500).style("fill","steelblue")},x="ID NUMBER on kindness card",v="CITY where act of kindness took place",m="[Optional] Tell us about the act of kindness you received!",g=n(13),y=function(e){var t=e.node,n=e.isSelected;if(!t)return null;console.log("rendering tooltip");var c,r,o=t[v],i=t.STATE,l=t[m];return Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{children:Object(j.jsxs)("b",{children:[o?"".concat(o,", "):null,i]})}),Object(j.jsx)("p",{children:Object(j.jsx)("b",{children:(c=l,r=140,c.length>r?"".concat(c.substring(0,r)):c)})}),Object(j.jsx)("p",{children:n?null:"Click for more info!"})]})},N=n(18),L="lng",k="lat",T=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=0,r=0;n||(c=t/69),r=c;var o=function(t){return e.map((function(e){return e[t]}))},i=Math.max.apply(Math,Object(d.a)(o(L))),l=Math.min.apply(Math,Object(d.a)(o(L))),s=Math.max.apply(Math,Object(d.a)(o(k))),a=Math.min.apply(Math,Object(d.a)(o(k)));return n&&(c=(i-l)*t,r=(s-a)*t),{topRight:{lng:i+c,lat:a+r},bottomLeft:{lng:l-6*c,lat:s-r}}},C=(n(79),{width:"100vw",height:"100vh",position:"absolute"});f.a.accessToken="pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ",f.a.workerClass=g.a;var I=function(e){var t=e.setIsLoading,n=e.data,r=e.selectedNode,o=e.setSelectedNode,i=e.hoveredNode,s=e.setHoveredNode,a=e.traceNode,d=e.traceList,b=e.setTraceList,v=e.traceIndex,m=Object(c.useState)(null),g=Object(l.a)(m,2),N=g[0],L=g[1],k=Object(c.useRef)(null);console.log("rendering map");var I,S,M=function(e){return"circle-".concat(e.index)},w=function(e){return"circle circle-".concat(e[x])},A=function(e){return e.map((function(e){return{lng:e.CenterLon,lat:e.CenterLat}}))},E=n?T(A(n),200):null,J=function(){u.selectAll(".circle").on("mouseover",(function(e,t){s(t),h(e)})).on("mousemove",(function(e,t){h(e)})).on("mouseout",(function(e,t){var n;n=function(){return s(null)},u.select(".map-tooltip").transition().duration(500).style("opacity",0).on("end",n)})).on("click",(function(e,t){O(),u.select("#".concat(M(t))).transition().duration(500).style("fill","red"),N.flyTo({center:[t.CenterLon,t.CenterLat],zoom:12,essential:!0}),o(t)}))};return Object(c.useEffect)((function(){!N&&n&&(console.log("one"),function(e){var t=e.setMap,n=e.mapContainer,c=e.boundingObject,r=new f.a.Map({container:n.current,style:"mapbox://styles/mapbox/light-v10"});p(r,c),r.on("load",(function(){t(r)}))}({setMap:L,mapContainer:k,boundingObject:E}))}),[N,n]),Object(c.useEffect)((function(){if(N&&null!==n){console.log("two");var e=N.getCanvasContainer(),c=u.select(e).append("svg").attr("width","100%").attr("height","100%").style("position","absolute").style("z-index",2).style("top",0).style("left",0),r=function(e){return N.project(new f.a.LngLat(e.CenterLon,e.CenterLat))},o=c.selectAll("circle").data(n).enter().append("circle").attr("id",M).attr("class",w).attr("r",10).style("fill","steelblue");J();var i=function(){o.attr("cx",(function(e){return r(e).x})).attr("cy",(function(e){return r(e).y}))};return N.on("viewreset",i),N.on("move",i),N.on("moveend",i),N.on("load",(function(){N.resize()})),i(),t(!1),function(){return N.remove()}}}),[N,n]),Object(c.useEffect)((function(){N&&n&&!r&&(console.log("three"),p(N,E),O().attr("r",10).style("opacity",1),J())}),[N,n,r]),Object(c.useEffect)((function(){if(a){console.log("four");var e=n.filter((function(e){return e[x]==a[x]})),t=u.selectAll(".circle").filter((function(e){return e[x]!==a[x]}));t.transition().duration(500).style("opacity","0"),t.on("mouseover",null).on("mousemove",null).on("mouseout",null).on("click",null),u.selectAll(".circle").filter((function(e){return e[x]===a[x]})).transition().duration(500).style("fill","purple");var c=T(A(e),.05,!0);p(N,c),b(e)}}),[a]),Object(c.useEffect)((function(){N&&d&&v>-1&&(console.log("five"),u.selectAll(".circle").filter((function(e){return e[x]==a[x]})).transition().duration(500).style("fill","purple").attr("r",10),u.select("#".concat(M(d[v]))).transition().duration(500).style("fill","green").attr("r",30))}),[v]),Object(j.jsx)("div",{ref:function(e){return k.current=e},style:C,children:Object(j.jsx)("div",{className:"map-tooltip",style:{opacity:0},children:Object(j.jsx)(y,{node:i,isSelected:(I=i,S=r,!(!I||!S)&&I.index==S.index)})})})},S=r.a.memo(I,(function(e,t){return e.data===t.data&&e.selectedNode===t.selectedNode&&e.hoveredNode===t.hoveredNode&&e.traceNode===t.traceNode&&e.traceList===t.traceList&&e.traceIndex===t.traceIndex})),M=(n(80),n(48)),w=function(e){var t=e.node;if(console.log("rendering card"),!t)return null;console.log(t);var n=t.Timestamp,c=t["[Optional] STREET NAME"],r=t[v],o=t.STATE,i=t["[OPTIONAL] ZIP CODE"],l=t[m],s=M.DateTime.fromFormat(n,"mm/dd/yyyy h:mm:ss a");return console.log(s),Object(j.jsxs)("div",{className:"kindness-card-inner",children:[Object(j.jsxs)("p",{children:["Address: ",Object(j.jsx)("b",{children:c||"No street provided."})]}),Object(j.jsxs)("p",{children:["City: ",Object(j.jsx)("b",{children:r||"No city provided."})]}),Object(j.jsxs)("p",{children:["State: ",Object(j.jsx)("b",{children:o||"No state provided."})]}),Object(j.jsxs)("p",{children:["Zip Code: ",Object(j.jsx)("b",{children:i||"No zip code provided."})]}),Object(j.jsx)("p",{children:"Act of Kindness Description:"}),Object(j.jsx)("p",{children:Object(j.jsx)("b",{children:l||"No kindess description provided."})})]})},A=(n(81),function(){return console.log("rendering loading"),Object(j.jsxs)("div",{className:"loading-wrapper",children:[Object(j.jsx)("div",{className:"la-ball-clip-rotate la-2x",children:Object(j.jsx)("div",{})}),Object(j.jsx)("p",{children:"Loading..."})]})}),E=function(){return console.log("rendering side info card"),Object(j.jsx)("div",{children:Object(j.jsx)("p",{children:"Click a circle to explore that act of kindness further!"})})},J=function(e){var t=e.traceList,n=e.traceIndex,c=e.setTraceIndex;return console.log("rendering trace"),t?t.map((function(e,t){return Object(j.jsx)("p",{onClick:function(){return c(t)},style:{color:t==n?"blue":"white",cursor:"pointer"},children:e[x]},t)})):null},D=function(e){var t=e.isLoading,n=e.selectedNode,c=e.setSelectedNode,r=e.setTraceNode,o=e.traceList,i=e.setTraceList,l=e.traceIndex,s=e.setTraceIndex;return console.log("rendering sidebar"),Object(j.jsxs)("div",{className:"sidebar-flex",children:[Object(j.jsx)("h1",{children:"Kindess Tracker"}),t?Object(j.jsx)(A,{}):null,t||n?null:Object(j.jsx)(E,{}),Object(j.jsx)("div",{className:"selected-card-wrapper",children:Object(j.jsx)(w,{node:n})}),n?Object(j.jsx)("button",{onClick:function(){c(null),i([]),s(-1),r(null)},children:"Clear Selected Node"}):null,n&&0===o.length?Object(j.jsx)("button",{onClick:function(){return r(n)},children:"Trace this Act!"}):null,Object(j.jsx)(J,{traceList:o,traceIndex:l,setTraceIndex:s})]})},F=r.a.memo(D,(function(e,t){return e.isLoading===t.isLoading&&e.selectedNode===t.selectedNode&&e.traceNode===t.traceNode&&e.traceIndex===t.traceIndex})),Y=n(19),B=n.n(Y);n(82);B.a.workerClass=g.a,B.a.accessToken="pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ";var z=function(){var e=Object(c.useState)(null),t=Object(l.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(!0),i=Object(l.a)(o,2),s=i[0],d=i[1],u=Object(c.useState)(null),b=Object(l.a)(u,2),f=b[0],p=b[1],h=Object(c.useState)(null),O=Object(l.a)(h,2),x=O[0],v=O[1],m=Object(c.useState)(null),g=Object(l.a)(m,2),y=g[0],L=g[1],k=Object(c.useState)([]),T=Object(l.a)(k,2),C=T[0],I=T[1],M=Object(c.useState)(-1),w=Object(l.a)(M,2),A=w[0],E=w[1];return Object(c.useEffect)((function(){null===n&&a.a.init({key:"https://docs.google.com/spreadsheets/d/1BvBwyy1xYYhdiokMfbyxssu5nlB0arRMvxyuQLCzsH4/pubhtml",simpleSheet:!0}).then((function(e){var t=function(e){return e?e.map((function(e,t){return Object(N.a)(Object(N.a)({},e),{},{index:t})})):null}(e);r(t)})).catch(console.warn)}),[n]),Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("div",{className:"horizontal-stack",children:[Object(j.jsx)("div",{className:"left-sidebar",children:Object(j.jsx)(F,{isLoading:s,selectedNode:f,setSelectedNode:p,setTraceNode:L,traceList:C,setTraceList:I,traceIndex:A,setTraceIndex:E})}),Object(j.jsx)("div",{className:"map-wrapper",children:Object(j.jsx)(S,{data:n,setIsLoading:d,selectedNode:f,setSelectedNode:p,hoveredNode:x,setHoveredNode:v,traceNode:y,traceList:C,setTraceList:I,traceIndex:A})})]})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,84)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),o(e),i(e)}))};i.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(z,{})}),document.getElementById("root")),P()}},[[83,1,2]]]);
//# sourceMappingURL=main.6a3c7b39.chunk.js.map