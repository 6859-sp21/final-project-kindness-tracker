(this["webpackJsonpkindness-tracker"]=this["webpackJsonpkindness-tracker"]||[]).push([[0],{52:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),i=n(46),l=n.n(i),s=(n(52),n(1)),o=n(47),a=n.n(o),u=n(6),d=n(4),j=n(0),b=n(9),f=n.n(b),p=function(e,t){var n=t.topRight,c=t.bottomLeft;e.fitBounds([[c.lng,c.lat],[n.lng,n.lat]])},h=function(e,t){d.select(".map-tooltip").transition().duration(0).style("opacity",.8).style("left","".concat(e.pageX+50,"px")).style("top","".concat(e.pageY-50,"px"))},O=function(){return d.selectAll(".circle").transition().duration(500).style("fill","steelblue")},x="ID NUMBER on kindness card",v="CITY where act of kindness took place",m="[Optional] Tell us about the act of kindness you received!",y=n(13),g=function(e){var t=e.node,n=e.isSelected;if(!t)return null;var c,r,i=t[v],l=t.STATE,s=t[m];return Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{children:Object(j.jsxs)("b",{children:[i?"".concat(i,", "):null,l]})}),Object(j.jsx)("p",{children:Object(j.jsx)("b",{children:(c=s,r=140,c.length>r?"".concat(c.substring(0,r)):c)})}),Object(j.jsx)("p",{children:n?null:"Click for more info!"})]})},N=n(18),k=function(e,t){var n=t/69,c=function(t){return e.map((function(e){return e[t]}))},r=Math.max.apply(Math,Object(u.a)(c("lng"))),i=Math.min.apply(Math,Object(u.a)(c("lng"))),l=Math.max.apply(Math,Object(u.a)(c("lat")));return{topRight:{lng:r+n,lat:Math.min.apply(Math,Object(u.a)(c("lat")))+n},bottomLeft:{lng:i-6*n,lat:l-n}}},L=(n(78),{width:"100vw",height:"100vh",position:"absolute"});f.a.accessToken="pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ",f.a.workerClass=y.a;var C=function(e){var t,n,r=e.setIsLoading,i=e.data,l=e.selectedNode,o=e.setSelectedNode,a=e.hoveredNode,u=e.setHoveredNode,b=e.traceNode,v=e.traceList,m=e.setTraceList,y=e.traceIndex,C=Object(c.useState)(null),T=Object(s.a)(C,2),I=T[0],S=T[1],M=Object(c.useRef)(null),w=function(e){return e?e.map((function(e,t){return Object(N.a)(Object(N.a)({},e),{},{index:t})})):null}(i),A=function(e){return"circle-".concat(e.index)},E=function(e){return"circle circle-".concat(e[x])},J=function(e){return e.map((function(e){return{lng:e.CenterLon,lat:e.CenterLat}}))},D=w?k(J(w),200):null,F=function(){d.selectAll(".circle").on("mouseover",(function(e,t){u(t),h(e)})).on("mousemove",(function(e,t){h(e)})).on("mouseout",(function(e,t){var n;n=function(){return u(null)},d.select(".map-tooltip").transition().duration(500).style("opacity",0).on("end",n)})).on("click",(function(e,t){O(),d.select("#".concat(A(t))).transition().duration(500).style("fill","red"),I.flyTo({center:[t.CenterLon,t.CenterLat],zoom:12,essential:!0}),o(t)}))};return Object(c.useEffect)((function(){!I&&w&&function(e){var t=e.setMap,n=e.mapContainer,c=e.boundingObject,r=new f.a.Map({container:n.current,style:"mapbox://styles/mapbox/light-v10"});p(r,c),r.on("load",(function(){t(r)}))}({setMap:S,mapContainer:M,boundingObject:D})}),[I,w]),Object(c.useEffect)((function(){if(I&&null!==i){var e=I.getCanvasContainer(),t=d.select(e).append("svg").attr("width","100%").attr("height","100%").style("position","absolute").style("z-index",2).style("top",0).style("left",0),n=function(e){return I.project(new f.a.LngLat(e.CenterLon,e.CenterLat))},c=t.selectAll("circle").data(w).enter().append("circle").attr("id",A).attr("class",E).attr("r",10).style("fill","steelblue");F();var l=function(){c.attr("cx",(function(e){return n(e).x})).attr("cy",(function(e){return n(e).y}))};return I.on("viewreset",l),I.on("move",l),I.on("moveend",l),I.on("load",(function(){I.resize()})),l(),r(!1),function(){return I.remove()}}}),[I,i]),Object(c.useEffect)((function(){I&&i&&!l&&(p(I,D),O().attr("r",10).style("opacity",1),F())}),[I,i,l]),Object(c.useEffect)((function(){if(b){var e=w.filter((function(e){return e[x]==b[x]})),t=d.selectAll(".circle").filter((function(e){return e[x]!==b[x]}));t.transition().duration(500).style("opacity","0"),t.on("mouseover",null).on("mousemove",null).on("mouseout",null).on("click",null),d.selectAll(".circle").filter((function(e){return e[x]===b[x]})).transition().duration(500).style("fill","purple");var n=k(J(e),100);p(I,n),m(e)}}),[b]),Object(c.useEffect)((function(){I&&v&&y>-1&&(d.selectAll(".circle").filter((function(e){return e[x]==b[x]})).transition().duration(500).style("fill","purple").attr("r",10),d.select("#".concat(A(v[y]))).transition().duration(500).style("fill","green").attr("r",30))}),[y]),Object(j.jsx)("div",{ref:function(e){return M.current=e},style:L,children:Object(j.jsx)("div",{className:"map-tooltip",style:{opacity:0},children:Object(j.jsx)(g,{node:a,isSelected:(t=a,n=l,!(!t||!n)&&t.index==n.index)})})})},T=(n(79),function(e){var t=e.node;if(!t)return null;var n=t["[Optional] STREET NAME"],c=t[v],r=t.STATE,i=t["[OPTIONAL] ZIP CODE"],l=t[m];return Object(j.jsxs)("div",{className:"kindness-card-inner",children:[Object(j.jsxs)("p",{children:["Address: ",Object(j.jsx)("b",{children:n||"No street provided."})]}),Object(j.jsxs)("p",{children:["City: ",Object(j.jsx)("b",{children:c||"No city provided."})]}),Object(j.jsxs)("p",{children:["State: ",Object(j.jsx)("b",{children:r||"No state provided."})]}),Object(j.jsxs)("p",{children:["Zip Code: ",Object(j.jsx)("b",{children:i||"No zip code provided."})]}),Object(j.jsx)("p",{children:"Act of Kindness Description:"}),Object(j.jsx)("p",{children:Object(j.jsx)("b",{children:l||"No kindess description provided."})})]})}),I=(n(80),function(){return Object(j.jsxs)("div",{className:"loading-wrapper",children:[Object(j.jsx)("div",{className:"la-ball-clip-rotate la-2x",children:Object(j.jsx)("div",{})}),Object(j.jsx)("p",{children:"Loading..."})]})}),S=function(){return Object(j.jsx)("div",{children:Object(j.jsx)("p",{children:"Click a circle to explore that act of kindness further!"})})},M=function(e){var t=e.traceList,n=e.traceIndex,c=e.setTraceIndex;return t?t.map((function(e,t){return Object(j.jsx)("p",{onClick:function(){return c(t)},style:{color:t==n?"blue":"white",cursor:"pointer"},children:e[x]},t)})):null},w=function(e){var t=e.isLoading,n=e.selectedNode,c=e.setSelectedNode,r=e.setTraceNode,i=e.traceList,l=e.setTraceList,s=e.traceIndex,o=e.setTraceIndex;return Object(j.jsxs)("div",{className:"sidebar-flex",children:[Object(j.jsx)("h1",{children:"Kindess Tracker"}),t?Object(j.jsx)(I,{}):null,t||n?null:Object(j.jsx)(S,{}),Object(j.jsx)("div",{className:"selected-card-wrapper",children:Object(j.jsx)(T,{node:n})}),n?Object(j.jsx)("button",{onClick:function(){c(null),l([]),o(-1),r(null)},children:"Clear Selected Node"}):null,n&&0===i.length?Object(j.jsx)("button",{onClick:function(){return r(n)},children:"Trace this Act!"}):null,Object(j.jsx)(M,{traceList:i,traceIndex:s,setTraceIndex:o})]})},A=n(19),E=n.n(A);n(81);E.a.workerClass=y.a,E.a.accessToken="pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ";var J=function(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(!0),l=Object(s.a)(i,2),o=l[0],u=l[1],d=Object(c.useState)(null),b=Object(s.a)(d,2),f=b[0],p=b[1],h=Object(c.useState)(null),O=Object(s.a)(h,2),x=O[0],v=O[1],m=Object(c.useState)(null),y=Object(s.a)(m,2),g=y[0],N=y[1],k=Object(c.useState)([]),L=Object(s.a)(k,2),T=L[0],I=L[1],S=Object(c.useState)(-1),M=Object(s.a)(S,2),A=M[0],E=M[1];return Object(c.useEffect)((function(){null===n&&a.a.init({key:"https://docs.google.com/spreadsheets/d/1BvBwyy1xYYhdiokMfbyxssu5nlB0arRMvxyuQLCzsH4/pubhtml",simpleSheet:!0}).then((function(e){r(e)})).catch(console.warn)}),[n]),Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("div",{className:"horizontal-stack",children:[Object(j.jsx)("div",{className:"left-sidebar",children:Object(j.jsx)(w,{isLoading:o,selectedNode:f,setSelectedNode:p,setTraceNode:N,traceList:T,setTraceList:I,traceIndex:A,setTraceIndex:E})}),Object(j.jsx)("div",{className:"map-wrapper",children:Object(j.jsx)(C,{data:n,setIsLoading:u,selectedNode:f,setSelectedNode:p,hoveredNode:x,setHoveredNode:v,traceNode:g,traceList:T,setTraceList:I,traceIndex:A})})]})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,83)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,l=t.getTTFB;n(e),c(e),r(e),i(e),l(e)}))};l.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(J,{})}),document.getElementById("root")),D()}},[[82,1,2]]]);
//# sourceMappingURL=main.ca1ce870.chunk.js.map