(this["webpackJsonpkindness-tracker"]=this["webpackJsonpkindness-tracker"]||[]).push([[0],{53:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var c=n(2),i=n.n(c),r=n(47),s=n.n(r),a=(n(53),n(1)),o=n(48),l=n.n(o),d=n(6),u=n(4),j=n(0),b=n(9),p=n.n(b),f=function(e,t){var n=t.topRight,c=t.bottomLeft;e.fitBounds([[c.lng,c.lat],[n.lng,n.lat]])},h=function(e,t){u.select(".map-tooltip").transition().duration(0).style("opacity",.8).style("left","".concat(e.pageX+50,"px")).style("top","".concat(e.pageY-50,"px"))},x=function(){return u.selectAll(".circle").transition().duration(500).style("fill","steelblue")},O="ID NUMBER on kindness card",g="CITY where act of kindness took place",m="[Optional] Tell us about the act of kindness you received!",v=n(14),T=function(e){var t=e.node,n=e.isSelected;if(!t)return null;console.log("rendering tooltip");var c,i,r=t[g],s=t.STATE,a=t[m];return Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{children:Object(j.jsxs)("b",{children:[r?"".concat(r,", "):null,s]})}),Object(j.jsx)("p",{children:Object(j.jsx)("b",{children:(c=a,i=140,c.length>i?"".concat(c.substring(0,i),"..."):c)})}),Object(j.jsx)("p",{children:n?null:"Click for more info!"})]})},y=n(19),N=n(12),L="lng",k="lat",I=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=0,i=0;n||(c=t/69),i=c;var r=function(t){return e.map((function(e){return e[t]}))},s=Math.max.apply(Math,Object(d.a)(r(L))),a=Math.min.apply(Math,Object(d.a)(r(L))),o=Math.max.apply(Math,Object(d.a)(r(k))),l=Math.min.apply(Math,Object(d.a)(r(k)));return n&&(c=(s-a)*t,i=(o-l)*t),{topRight:{lng:s+c,lat:l+i},bottomLeft:{lng:a-8*c,lat:o-i}}},C=(n(79),{width:"100vw",height:"100vh",position:"absolute"});p.a.accessToken="pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ",p.a.workerClass=v.a;var M=function(e){var t=e.setIsLoading,n=e.data,i=e.selectedNode,r=e.setSelectedNode,s=e.hoveredNode,o=e.setHoveredNode,l=e.isTracing,d=e.traceList,b=e.setTraceList,g=e.traceIndex,m=e.setTraceIndex,v=Object(c.useState)(null),y=Object(a.a)(v,2),N=y[0],L=y[1],k=Object(c.useRef)(null);console.log("rendering map");var M,S,E=function(e){return"circle-".concat(e.index)},w=function(e){return"circle circle-".concat(e[O])},A=function(e){return e.map((function(e){return{lng:e.CenterLon,lat:e.CenterLat}}))},D=n?I(A(n),200):null,F=function(e){x().attr("r",10).style("opacity",1),u.select("#".concat(E(e))).transition().duration(500).style("fill","red").attr("r",10),N.flyTo({center:[e.CenterLon,e.CenterLat],zoom:12,essential:!0}),r(e)},J=function(){u.selectAll(".circle").on("mouseover",(function(e,t){o(t),h(e)})).on("mousemove",(function(e,t){h(e)})).on("mouseout",(function(e,t){var n;n=function(){return o(null)},u.select(".map-tooltip").transition().duration(500).style("opacity",0).on("end",n)})).on("click",(function(e,t){F(t)}))};return Object(c.useEffect)((function(){!N&&n&&(console.log("one"),function(e){var t=e.setMap,n=e.mapContainer,c=e.boundingObject,i=new p.a.Map({container:n.current,style:"mapbox://styles/mapbox/light-v10"});f(i,c),i.on("load",(function(){t(i)}))}({setMap:L,mapContainer:k,boundingObject:D}))}),[N,n]),Object(c.useEffect)((function(){if(N&&null!==n){console.log("two");var e=N.getCanvasContainer(),c=u.select(e).append("svg").attr("width","100%").attr("height","100%").style("position","absolute").style("z-index",2).style("top",0).style("left",0),i=function(e){return N.project(new p.a.LngLat(e.CenterLon,e.CenterLat))},r=c.selectAll("circle").data(n).enter().append("circle").attr("id",E).attr("class",w).attr("r",10).style("fill","steelblue");J();var s=function(){r.attr("cx",(function(e){return i(e).x})).attr("cy",(function(e){return i(e).y}))};return N.on("viewreset",s),N.on("move",s),N.on("moveend",s),N.on("load",(function(){N.resize()})),s(),t(!1),function(){return N.remove()}}}),[N,n]),Object(c.useEffect)((function(){N&&n&&!i&&(console.log("three"),f(N,D),x().attr("r",10).style("opacity",1),J())}),[N,n,i]),Object(c.useEffect)((function(){if(l){console.log("four");var e=n.filter((function(e){return e[O]==i[O]})).sort((function(e,t){return e.dateTime.toMillis()-t.dateTime.toMillis()}));console.log(e);var t=u.selectAll(".circle").filter((function(e){return e[O]!==i[O]}));t.transition().duration(500).style("opacity","0"),t.on("mouseover",null).on("mousemove",null).on("mouseout",null).on("click",null),u.selectAll(".circle").filter((function(e){return e[O]===i[O]})).transition().duration(500).style("fill","purple");var c=I(A(e),.05,!0);f(N,c),b(e);var r=e.map((function(e){return e.index})).indexOf(i.index);m(r)}else i&&(console.log("no longer tracing"),F(i),J())}),[l,i]),Object(c.useEffect)((function(){N&&d&&d.length>0&&(console.log("five"),console.log(g,d),u.selectAll(".circle").filter((function(e){return e[O]==i[O]})).transition().duration(500).style("fill","purple").attr("r",10),u.select("#".concat(E(d[g]))).transition().duration(500).style("fill","green").attr("r",30))}),[d,g]),Object(j.jsx)("div",{ref:function(e){return k.current=e},style:C,children:Object(j.jsx)("div",{className:"map-tooltip",style:{opacity:0},children:Object(j.jsx)(T,{node:s,isSelected:(M=s,S=i,!(!M||!S)&&M.index==S.index)})})})},S=i.a.memo(M,(function(e,t){return e.data===t.data&&e.selectedNode===t.selectedNode&&e.hoveredNode===t.hoveredNode&&e.isTracing===t.isTracing&&e.traceList===t.traceList&&e.traceIndex===t.traceIndex})),E=(n(80),function(e){var t=e.node;if(console.log("rendering card"),!t)return null;t.Timestamp;var n=t["[Optional] STREET NAME"],c=t[g],i=t.STATE,r=t["[OPTIONAL] ZIP CODE"],s=t[m],a=t.dateTime,o=a.toLocaleString(N.DateTime.DATE_FULL),l=a.toLocaleString(N.DateTime.TIME_SIMPLE);return Object(j.jsxs)("div",{className:"kindness-card-inner",children:[Object(j.jsxs)("p",{children:["Date: ",Object(j.jsx)("b",{children:o})]}),Object(j.jsxs)("p",{children:["Time: ",Object(j.jsx)("b",{children:l})]}),Object(j.jsxs)("p",{children:["Address: ",Object(j.jsx)("b",{children:n||"No street provided."})]}),Object(j.jsxs)("p",{children:["City: ",Object(j.jsx)("b",{children:c||"No city provided."})]}),Object(j.jsxs)("p",{children:["State: ",Object(j.jsx)("b",{children:i||"No state provided."})]}),Object(j.jsxs)("p",{children:["Zip Code: ",Object(j.jsx)("b",{children:r||"No zip code provided."})]}),Object(j.jsx)("p",{children:"Act of Kindness Description:"}),Object(j.jsx)("div",{className:"kindess-card-description",children:Object(j.jsx)("p",{children:Object(j.jsx)("b",{children:s||"No kindess description provided."})})})]})}),w=(n(81),function(){return console.log("rendering loading"),Object(j.jsxs)("div",{className:"loading-wrapper",children:[Object(j.jsx)("div",{className:"la-ball-clip-rotate la-2x",children:Object(j.jsx)("div",{})}),Object(j.jsx)("p",{children:"Loading..."})]})}),A=function(){return console.log("rendering side info card"),Object(j.jsxs)("div",{children:[Object(j.jsx)("hr",{className:"sidebar-divider"}),Object(j.jsx)("h3",{children:"Click a circle to explore that act of kindness further!"})]})},D=function(e){var t=e.isTracing,n=e.setIsTracing,c=e.traceList,i=e.traceIndex,r=e.setTraceIndex;if(console.log("rendering trace"),!t)return null;var s=c[i];return Object(j.jsxs)("div",{className:"trace-stepper-wrapper",children:[Object(j.jsxs)("div",{className:"trace-stepper-button-horizontal",children:[Object(j.jsx)("button",{disabled:0===i,onClick:function(){return r(0)},children:"Earliest"}),Object(j.jsx)("button",{disabled:0===i,onClick:function(){return r(i-1)},children:"Previous"}),Object(j.jsx)("button",{disabled:i===c.length-1,onClick:function(){return r(i+1)},children:"Next"}),Object(j.jsx)("button",{disabled:i===c.length-1,onClick:function(){return r(c.length-1)},children:"Latest"})]}),Object(j.jsx)("p",{children:"".concat(i+1," / ").concat(c.length)}),Object(j.jsx)(E,{node:s}),Object(j.jsx)("div",{className:"trace-stepper-button-below",children:Object(j.jsx)("button",{onClick:function(){n(!1)},children:"Exit Trace Mode"})})]})},F=function(e){var t=e.isLoading,n=e.selectedNode,c=e.setSelectedNode,i=e.isTracing,r=e.setIsTracing,s=e.traceList,a=e.setTraceList,o=e.traceIndex,l=e.setTraceIndex;return console.log("rendering sidebar"),Object(j.jsxs)("div",{className:"sidebar-flex",children:[Object(j.jsx)("h1",{children:"Kindess Tracker"}),t?Object(j.jsx)(w,{}):null,t||n?null:Object(j.jsx)(A,{}),i?null:Object(j.jsx)("div",{className:"selected-card-wrapper",children:Object(j.jsx)(E,{node:n})}),Object(j.jsxs)("div",{className:"sidebar-clear-div",children:[n&&!i?Object(j.jsx)("button",{className:"sidebar-button-below",onClick:function(){c(null),a([]),l(0),r(!1)},children:"Clear Selected Node"}):null,n&&!i?Object(j.jsx)("button",{onClick:function(){return r(!0)},children:"Trace this Act!"}):null]}),Object(j.jsx)(D,{isTracing:i,setIsTracing:r,traceList:s,traceIndex:o,setTraceIndex:l}),Object(j.jsxs)("div",{className:"sidebar-bottom-content",children:[Object(j.jsx)("p",{className:"sidebar-small-text",children:"Christian Moroney, Jackson Bernatchez, Kevin Lyons"}),Object(j.jsx)("p",{className:"sidebar-small-text",children:"6.859 Final Project Spring 2021"}),Object(j.jsx)("div",{children:Object(j.jsx)("a",{href:"https://github.com/6859-sp21/final-project-kindness-tracker",target:"_blank",children:Object(j.jsx)("img",{className:"sidebar-git-image",src:"https://image.flaticon.com/icons/png/512/25/25231.png"})})})]})]})},J=i.a.memo(F,(function(e,t){return e.isLoading===t.isLoading&&e.selectedNode===t.selectedNode&&e.isTracing===t.isTracing&&e.traceList===t.traceList&&e.traceIndex===t.traceIndex})),P=n(20),z=n.n(P);n(82);z.a.workerClass=v.a,z.a.accessToken="pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ";var Y=function(){var e=Object(c.useState)(null),t=Object(a.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(!0),s=Object(a.a)(r,2),o=s[0],d=s[1],u=Object(c.useState)(null),b=Object(a.a)(u,2),p=b[0],f=b[1],h=Object(c.useState)(null),x=Object(a.a)(h,2),O=x[0],g=x[1],m=Object(c.useState)(!1),v=Object(a.a)(m,2),T=v[0],L=v[1],k=Object(c.useState)([]),I=Object(a.a)(k,2),C=I[0],M=I[1],E=Object(c.useState)(0),w=Object(a.a)(E,2),A=w[0],D=w[1];return Object(c.useEffect)((function(){null===n&&l.a.init({key:"https://docs.google.com/spreadsheets/d/1IqEBIcnFZ_BFCrD8jhk11yVoOjfxzZpiZLdL4cL3oK0/pubhtml",simpleSheet:!0}).then((function(e){var t=function(e){return e?e.map((function(e,t){return Object(y.a)(Object(y.a)({},e),{},{index:t,dateTime:N.DateTime.fromFormat(e.Timestamp,"MM/dd/yy h:mm a")})})):null}(e);i(t)})).catch(console.warn)}),[n]),Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("div",{className:"horizontal-stack",children:[Object(j.jsx)("div",{className:"left-sidebar",children:Object(j.jsx)(J,{isLoading:o,selectedNode:p,setSelectedNode:f,isTracing:T,setIsTracing:L,traceList:C,setTraceList:M,traceIndex:A,setTraceIndex:D})}),Object(j.jsx)("div",{className:"map-wrapper",children:Object(j.jsx)(S,{data:n,setIsLoading:d,selectedNode:p,setSelectedNode:f,hoveredNode:O,setHoveredNode:g,isTracing:T,traceList:C,setTraceList:M,traceIndex:A,setTraceIndex:D})})]})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,84)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),i(e),r(e),s(e)}))};s.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(Y,{})}),document.getElementById("root")),B()}},[[83,1,2]]]);
//# sourceMappingURL=main.bf8553dd.chunk.js.map