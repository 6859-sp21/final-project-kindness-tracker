(this["webpackJsonpkindness-tracker"]=this["webpackJsonpkindness-tracker"]||[]).push([[0],{154:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},186:function(e,t,n){},218:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),s=n.n(c),i=(n(154),n(4)),o=n(131),l=n.n(o),d=n(17),j=n(8),u=n(1),h=n(44),b=n.n(h),f="https://docs.google.com/spreadsheets/d/1IqEBIcnFZ_BFCrD8jhk11yVoOjfxzZpiZLdL4cL3oK0/pubhtml",m="What is the ID Number on your kindness card? (We need this to track the spread of kindness!)",p="street_name",O="admin_level_3",x="admin_level_1",g="zip_code",v="Tell us about the act of kindness you received!",y="center_lng",k="center_lat",N=n(45),w=n(54),S=n(133),T=n.n(S),C=n(27),M="lng",D="lat",I=new T.a,F=function(e){var t=y,n=k,a=function(e){return"".concat(e[t]," ").concat(e[n])},r=e.map(a).reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{});return e.map((function(e){if(1===r[a(e)])return e;var c=L(e[t],e[n]),s=c.lng,i=c.lat;return e[t]=s,e[n]=i,e}))},L=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,a=n/69,r=function(){return Math.random()*(2*a)-a};return{lng:e+r(),lat:t+r()}},_=function(e,t){return!(!e||!t)&&e.index==t.index},B=function(e,t){var n=t[m];return E(e,n)},E=function(e,t){var n;return n=0===t?e:e.filter((function(e){return e[m]===t||0===e[m]})),R(n)},z=function(e){var t=e.street_number,n=e.street_name,a=t&&n?"".concat(t?"".concat(t," "):null).concat(n):null,r=e.admin_level_3,c=e.admin_level_1,s=r||c?"".concat(r).concat(r?", ".concat(c):c):null,i=e.zip_code,o="".concat(a||"No street address provided","\n").concat(s||"No city/state provided").concat(i?"\n".concat(i):"");return{kindness:e[v],dateString:e.dateTime.toLocaleString(w.DateTime.DATETIME_SHORT),location:o,cityState:s}},A=function(e){return e.map((function(e){return{lng:e.center_lng,lat:e.center_lat}}))},J=function(e){return I.clean(e)},W=function(e){for(var t=A(e),n=0,a=0;a<t.length-1;a++)n+=C.distance(C.point([t[a].lng,t[a].lat]),C.point([t[a+1].lng,t[a+1].lat]),{units:"miles"});return n},R=function(e){return e.sort((function(e,t){return e.dateTime.toMillis()-t.dateTime.toMillis()}))},U=function(e){j.select(".map-tooltip").transition().duration(500).style("opacity",0).on("end",e)},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"steelblue";return j.selectAll(".circle").transition().duration(500).style("fill",e).style("opacity",1)},K=function(e){return"circle-".concat(e.index)},P=function(e){return"circle circle-".concat(e[m])},Y=function(e,t){return e.project(new b.a.LngLat(t.center_lng,t.center_lat))},H=function(e){j.selectAll(".circle").attr("cx",(function(t){return Y(e,t).x})).attr("cy",(function(t){return Y(e,t).y}))},V=function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=0,r=0;n||(a=t/69),r=a;var c=arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?1:5,s=function(t){return e.map((function(e){return e[t]}))},i=Math.max.apply(Math,Object(d.a)(s(M))),o=Math.min.apply(Math,Object(d.a)(s(M))),l=Math.max.apply(Math,Object(d.a)(s(D))),j=Math.min.apply(Math,Object(d.a)(s(D)));return n&&(a=(i-o)*t,r=12*t*(l-j)),{topRight:{lng:i+a,lat:j+r},bottomLeft:{lng:o-a*c,lat:l-r}}}(A(e),e.length>1?.1:1,e.length>1,e.length>1)},G=function(e){setTimeout((function(){j.select(".map-svg").selectAll("use").remove(),j.select(".map-svg").append("use").attr("xlink:href",e)}),500)},Z=n.p+"static/media/triangle.c5a97129.png",Q=function(e){return[e.center_lng,e.center_lat]},X=function(e){return"".concat(e,"-point")},$=function(e,t,n){var a="".concat(t.hash," -> ").concat(n.hash),r=X(a);if(e.getSource(a))return a;var c=function(e,t){return{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",coordinates:[Q(e),Q(t)]}}]}}(t,n),s=function(e){for(var t=C.length(e.features[0]),n=Math.max(Math.floor(t/10),100),a=[],r=0;r<t;r+=t/n){var c=C.along(e.features[0],r);a.push(c.geometry.coordinates)}var s=C.along(e.features[0],t);return a.push(s.geometry.coordinates),e.features[0].geometry.coordinates=a,{route:e,numSteps:n}}(c),i=s.route,o=s.numSteps,l={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:Q(t)}}]};e.addSource(a,{type:"geojson",data:i}),e.addLayer({id:a,source:a,type:"line",paint:{"line-width":5,"line-color":"black"},layout:{"line-cap":"round","line-join":"round"}}),e.hasImage("triangle")||e.loadImage(Z,(function(t,n){if(t)throw t;e.addImage("triangle",n)})),e.addSource(r,{type:"geojson",data:l}),e.addLayer({id:r,source:r,type:"symbol",layout:{"icon-image":"triangle","icon-rotate":["get","bearing"],"icon-rotation-alignment":"map","icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-size":.02}});var d=0;return function t(){var n=c.features[0].geometry.coordinates[d>=o?d-1:d],a=c.features[0].geometry.coordinates[d>=o?d:d+1];if(n&&a){l.features[0].geometry.coordinates=c.features[0].geometry.coordinates[d],l.features[0].properties.bearing=C.bearing(C.point(n),C.point(a));var s=e.getSource(r);s&&(s.setData(l),d<o||(d=0),setTimeout((function(){return requestAnimationFrame(t)}),500),d+=10)}}(),a},ee=function(e,t){if(t){e.removeLayer(t),e.removeSource(t);var n=X(t);e.removeLayer(n),e.removeSource(n)}},te=n(66),ne=function(e){var t=e.node,n=e.isSelected;if(!t)return null;console.log("rendering tooltip");var a,r,c=z(t),s=c.kindness,i=c.cityState,o=J(s),l=(r=140,(a=o).length>r?"".concat(a.substring(0,r),"..."):a);return Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:l})}),Object(u.jsx)("p",{children:Object(u.jsx)("i",{children:i})}),Object(u.jsx)("p",{children:n?null:"Click for more info!"})]})},ae="default",re="selected",ce="searching",se="tracing",ie="trace-stats";n(184);b.a.accessToken="pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ",b.a.workerClass=te.a;var oe=function(e){var t=e.trace,n=e.setIsLoading,r=e.selectedNode,c=e.setSelectedNode,s=e.hoveredNode,o=e.setHoveredNode,l=e.mode,d=e.setTrace,h=e.resetTrace,f=Object(a.useState)(null),p=Object(i.a)(f,2),O=p[0],x=p[1],g=Object(a.useState)(null),v=Object(i.a)(g,2),y=v[0],k=v[1],N=Object(a.useRef)(null),w=Object(a.useState)(null),S=Object(i.a)(w,2),T=S[0],C=S[1],M=Object(a.useState)(null),D=Object(i.a)(M,2),I=D[0],F=D[1];return Object(a.useEffect)((function(){if(null===O)!function(e){var t=e.setMap,n=e.mapContainer,a=new b.a.Map({container:n.current,style:"mapbox://styles/mapbox/light-v10",center:[-100,40],zoom:3});a.on("load",(function(){t(a)}))}({setMap:x,mapContainer:N});else{var e=O.getCanvasContainer();j.select(e).append("svg").attr("class","map-svg").attr("width","100%").attr("height","100%").style("position","absolute").style("z-index",2).style("top",0).style("left",0),O.on("viewreset",(function(){return H(O)})),O.on("move",(function(){return H(O)})),O.on("moveend",(function(){return H(O)}))}}),[O]),Object(a.useEffect)((function(){if(O&&t){j.select(".map-svg").selectAll("circle").data(t,(function(e){return e.hash})).join((function(e){return e.append("circle").attr("id",K).attr("class",P).attr("r",10).style("fill","steelblue").style("opacity",(function(e){return r&&_(e,r)?1:r&&!_(e,r)?.5:1})).on("click",(function(e,t){return c(t)})).on("mouseover",(function(e,t){o(t),function(e,t){j.select(".map-tooltip").transition().duration(0).style("opacity",.8).style("left","".concat(e.pageX+50,"px")).style("top","".concat(e.pageY-50,"px"))}(e)})).on("mouseout",(function(e,t){U((function(){return o(null)}))}))}),(function(e){return e.on("click",(function(e,t){return c(t)}))}),(function(e){return e.remove()})),H(O),n(!1);var e=V(t);k(e)}}),[O,t,l]),Object(a.useEffect)((function(){O&&y&&(!function(e,t){var n=t.topRight,a=t.bottomLeft;e.fitBounds([[a.lng,a.lat],[n.lng,n.lat]],{duration:3e3})}(O,y),setTimeout((function(){return U((function(){return o(null)}))}),500))}),[O,y]),Object(a.useEffect)((function(){if(l===re&&r){q().style("opacity",.5);var e="#".concat(K(r));j.select(e).transition().duration(500).style("fill","red").style("opacity",1).attr("r",10),G(e);var n=V([r]);k(n)}else if(l!==ae&&l!==ce&&l!==ie||!t){if(l===se){if(0===r[m]){var a=V(t);k(a)}var c=function(){var e,n,a=function(e,t){var n=e.indexOf(t);return{prevNode:n>0?e[n-1]:null,nextNode:n<e.length-1?e[n+1]:null}}(t,r),c=a.prevNode,s=a.nextNode;c&&(e=$(O,c,r)),s&&(n=$(O,r,s)),T!==e&&T!==n&&ee(O,T),I!==e&&I!==n&&ee(O,I),C(e),F(n);var i=[r];c&&i.push(c),s&&i.push(s);var o=V(i);return k(o),{nodes:i}}().nodes;j.selectAll(".circle").filter((function(e){return-1===c.indexOf(e)})).transition().duration(500).style("fill","purple").style("opacity",0).attr("r",10),j.selectAll(".circle").filter((function(e){return c.indexOf(e)>-1&&e.hash!==r.hash})).transition().duration(500).style("fill","purple").style("opacity",1).attr("r",10);var s="#".concat(K(r));j.select(s).transition().duration(500).style("fill","green").attr("r",20).style("opacity",1),G(s)}}else{var i=V(t);k(i),q().attr("r",10)}}),[l,r,t]),Object(a.useEffect)((function(){if(l!==se)O&&(ee(O,T),ee(O,I),C(null),F(null)),l===ae?h():l===ce||l===re&&h();else{var e=B(t,r);d(e)}}),[l]),Object(u.jsx)("div",{ref:function(e){return N.current=e},className:"map-container-div",children:l!==se?Object(u.jsx)("div",{className:"map-tooltip",style:{opacity:0},children:Object(u.jsx)(ne,{node:s,isSelected:_(s,r)})}):null})},le=n(253),de=(n(185),function(e){var t=e.node,n=e.shortMode;if(console.log("rendering card"),!t)return null;var a=z(t),r=a.kindness,c=a.dateString,s=a.location,i=J(r);return n?Object(u.jsxs)("div",{className:"kindness-card-inner",children:[Object(u.jsx)("p",{children:"Most Recent Act of Kindness:"}),Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:i||"No kindness description provided!"})}),Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:s})}),Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:c})})]}):Object(u.jsxs)("div",{className:"kindness-card-inner",children:[Object(u.jsx)("p",{children:"Act of Kindness:"}),Object(u.jsx)("div",{className:"kindness-card-description",children:Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:i||"No kindness description provided!"})})}),Object(u.jsx)("p",{children:"Location:"}),Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:s})}),Object(u.jsx)("p",{children:"Date & Time:"}),Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:c})})]})}),je=(n(186),function(){return console.log("rendering loading"),Object(u.jsxs)("div",{className:"loading-wrapper",children:[Object(u.jsx)("div",{className:"la-ball-clip-rotate la-2x",children:Object(u.jsx)("div",{})}),Object(u.jsx)("p",{children:"Loading..."})]})}),ue=n(134),he=n.n(ue),be=n(135),fe=n.n(be),me=n(136),pe=n.n(me),Oe=n(88),xe=n.n(Oe),ge=function(){return console.log("rendering side info card"),Object(u.jsxs)("div",{children:[Object(u.jsx)("hr",{className:"sidebar-divider"}),Object(u.jsxs)("div",{className:"sidebar-info-row",children:[Object(u.jsx)("div",{className:"sidebar-info-left",children:Object(u.jsx)(he.a,{fontSize:"large"})}),Object(u.jsx)("div",{className:"sidebar-info-right",children:Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Click"})," a circle to explore that act of kindness further!"]})})]}),Object(u.jsxs)("div",{className:"sidebar-info-row",children:[Object(u.jsx)("div",{className:"sidebar-info-left",children:Object(u.jsx)(fe.a,{fontSize:"large"})}),Object(u.jsx)("div",{className:"sidebar-info-right",children:Object(u.jsxs)("p",{children:["Then, you can ",Object(u.jsx)("b",{children:"trace"})," that act of kindness to see how may people have paid it forward."]})})]}),Object(u.jsxs)("div",{className:"sidebar-info-row sidebar-info-row-toggle",children:[Object(u.jsx)("div",{className:"sidebar-info-left",children:Object(u.jsx)(pe.a,{fontSize:"large"})}),Object(u.jsx)("div",{className:"sidebar-info-right",children:Object(u.jsxs)("p",{children:["Switch between ",Object(u.jsx)("b",{children:"real-time"})," and ",Object(u.jsx)("b",{children:"generated"})," data using the toggle below."]})})]}),Object(u.jsxs)("div",{className:"sidebar-info-row sidebar-info-row-search",children:[Object(u.jsx)("div",{className:"sidebar-info-left",children:Object(u.jsx)(xe.a,{fontSize:"large"})}),Object(u.jsx)("div",{className:"sidebar-info-right",children:Object(u.jsxs)("p",{children:[Object(u.jsx)("b",{children:"Search"})," for acts of kindness by description, location, or ID."]})})]})]})},ve=n(138),ye=n.n(ve),ke=n(139),Ne=n.n(ke),we=n(260),Se=function(e){e.exitTraceMode;var t=e.trace,n=e.selectedNode,a=e.setSelectedNode;console.log("rendering trace");var r=t.indexOf(n),c=t.length;return Object(u.jsxs)("div",{className:"trace-stepper-wrapper",children:[Object(u.jsxs)("div",{className:"trace-stepper-button-horizontal",children:[Object(u.jsx)(we.a,{title:Object(u.jsx)("h2",{children:"Go to the first act in this path."}),arrow:!0,placement:"bottom",children:Object(u.jsx)(le.a,{className:"trace-stepper-button",variant:"contained",color:"primary",disabled:0===r,onClick:function(){return a(t[0])},children:"First"})}),Object(u.jsx)(le.a,{className:"trace-stepper-button",variant:"contained",color:"primary",disabled:0===r,onClick:function(){return a(t[r-1])},children:Object(u.jsx)(ye.a,{})}),Object(u.jsx)(le.a,{className:"trace-stepper-button",variant:"contained",color:"primary",disabled:r===c-1,onClick:function(){return a(t[r+1])},children:Object(u.jsx)(Ne.a,{})}),Object(u.jsx)(we.a,{title:Object(u.jsx)("h2",{children:"Go to the most recent act in this path."}),arrow:!0,placement:"bottom",children:Object(u.jsx)(le.a,{className:"trace-stepper-button",variant:"contained",color:"primary",disabled:r===c-1,onClick:function(){return a(t[c-1])},children:"Last"})})]}),Object(u.jsx)("p",{children:"".concat(r+1," / ").concat(t.length)}),Object(u.jsx)(de,{node:n})]})},Te=n(254),Ce=n(261),Me=function(e){var t=e.dataUrl,n=e.setDataUrl,a=t===f,r=t===f?"Viewing Real Data":"Viewing Fake Data";return Object(u.jsx)(we.a,{title:Object(u.jsx)("h2",{children:"Toggle to switch the data source."}),arrow:!0,placement:"top",children:Object(u.jsx)(Te.a,{control:Object(u.jsx)(Ce.a,{checked:a,onChange:function(e){var t=e.target.checked;n(t?f:"https://docs.google.com/spreadsheets/d/1ILNeaJC675bNSCWHgAK-2hD6MNZB38PYh7Y90MncF50/pubhtml")},color:"primary"}),labelPlacement:"top",label:r})})},De=function(e){var t=e.trace;console.log("rendering trace stats");var n=t.length,a=W(t),r=t[0].dateTime,c=t[t.length-1].dateTime.diff(r,"days").toObject().days;return Object(u.jsx)("div",{className:"trace-statistics-inner",children:Object(u.jsxs)("div",{className:"sidebar-clear-div",children:[Object(u.jsx)("h1",{children:n}),Object(u.jsx)("p",{children:"acts of kindness in this trace \ud83d\ude0a"}),Object(u.jsx)("br",{}),Object(u.jsx)("h1",{children:a.toFixed(1)}),Object(u.jsx)("p",{children:"total miles travelled \ud83c\udf0d"}),Object(u.jsx)("br",{}),Object(u.jsx)("h1",{children:c.toFixed(1)}),Object(u.jsx)("p",{children:"days between first & last act \ud83d\udcc5 "})]})})},Ie=function(e){var t=e.isLoading,n=e.selectedNode,a=e.setSelectedNode,r=e.clearSelectedNode,c=e.mode,s=e.setMode,i=e.trace,o=e.dataUrl,l=e.setDataUrl,d=e.filterText;console.log("rendering sidebar");var j=0;n&&(j=B(i,n).length-1);return Object(u.jsxs)("div",{className:"sidebar-flex",children:[Object(u.jsx)("h1",{children:"\ud83d\ude0a Kindness Tracker"}),t?Object(u.jsx)(je,{}):null,t||c!==ae?null:Object(u.jsx)(ge,{}),c===re?Object(u.jsxs)("div",{className:"sidebar-clear-div",children:[Object(u.jsx)(we.a,{title:Object(u.jsx)("h2",{children:"Deselect the currently selected point, and show all points again."}),arrow:!0,placement:"right",children:Object(u.jsx)(le.a,{variant:"contained",style:{backgroundColor:"red",color:"white"},className:"sidebar-button-below",onClick:r,children:"Clear Selection"})}),Object(u.jsx)(we.a,{title:Object(u.jsx)("h2",{children:"Track how other people have paid it forward to get to this act of kindness!"}),arrow:!0,placement:"right",children:Object(u.jsx)(le.a,{variant:"contained",style:{backgroundColor:"green",color:"white"},className:"sidebar-button-below",onClick:function(){return s(se)},children:"Trace this Act!"})}),Object(u.jsx)("h1",{children:j}),Object(u.jsxs)("p",{children:[j>1?"acts":"act"," of kindness ",j>1?"are":"is"," connected"]})]}):null,c===re?Object(u.jsx)("div",{className:"selected-card-wrapper",children:Object(u.jsx)(de,{node:n})}):null,c===se?Object(u.jsx)("div",{className:"trace-stepper-button-exit",children:Object(u.jsx)(le.a,{variant:"contained",style:{backgroundColor:"red",color:"white"},onClick:function(){return s(re)},children:"Exit Trace Mode"})}):null,c===ie?Object(u.jsx)("div",{className:"trace-stepper-button-exit",children:Object(u.jsx)(le.a,{variant:"contained",style:{backgroundColor:"red",color:"white"},onClick:function(){return s(se)},children:"Back to Trace Mode"})}):null,c===se?Object(u.jsxs)("div",{children:[Object(u.jsx)(Se,{exitTraceMode:function(){return s(re)},trace:i,selectedNode:n,setSelectedNode:a}),Object(u.jsx)(we.a,{title:Object(u.jsx)("h2",{children:"View information about this particular sequence of acts."}),arrow:!0,placement:"right",children:Object(u.jsx)(le.a,{variant:"contained",style:{backgroundColor:"green",color:"white"},className:"sidebar-button-above",onClick:function(){return s(ie)},children:"View Trace Statistics"})})]}):null,c===ie?Object(u.jsx)(De,{trace:i}):null,c===ce&&i.length>0?Object(u.jsxs)("div",{className:"sidebar-clear-div",children:[Object(u.jsx)("h1",{children:i.length}),Object(u.jsxs)("p",{children:[i.length>1?"acts":"act",' found for search query "',d,'".']}),Object(u.jsx)("p",{children:"Press Esc to clear."})]}):null,Object(u.jsxs)("div",{className:"sidebar-bottom-content",children:[Object(u.jsx)("div",{className:"data-toggle-outer",children:Object(u.jsx)(Me,{dataUrl:o,setDataUrl:l})}),Object(u.jsx)("p",{className:"sidebar-small-text",children:"Christian Moroney, Jackson Bernatchez, Kevin Lyons"}),Object(u.jsx)("p",{className:"sidebar-small-text",children:"6.859 Final Project Spring 2021"}),Object(u.jsx)("p",{className:"sidebar-small-text",children:Object(u.jsx)("code",{children:Object(u.jsx)("a",{href:"mailto:kindness-tracker@mit.edu",children:"kindness-tracker@mit.edu"})})}),Object(u.jsx)("div",{children:Object(u.jsx)("a",{href:"https://github.com/6859-sp21/final-project-kindness-tracker",target:"_blank",children:Object(u.jsx)("img",{className:"sidebar-git-image",src:"https://image.flaticon.com/icons/png/512/25/25231.png"})})})]})]})},Fe=n(140),Le=n.n(Fe),_e=function(e){var t=e.filterNodes,n=e.filterText,a=e.setFilterText;return Object(u.jsx)(Le.a,{value:n||"",onChange:a,cancelOnEscape:!0,onRequestSearch:function(){return t(n)},onCancelSearch:function(){a(null),t(null)},placeholder:"Search for acts of kindness by description, location, or ID. Press Enter to search. \u23ce"})},Be=n(3),Ee=n(7),ze=n(259),Ae=n(255),Je=n(256),We=n(257),Re=n(125),Ue=n(141),qe=n.n(Ue),Ke=n(145),Pe=n.p+"static/media/kindness_card_image.c3ba2bc2.png",Ye=(n(218),Object(Ee.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,n=e.classes,a=e.onClose,r=Object(Be.a)(e,["children","classes","onClose"]);return Object(u.jsxs)(Ae.a,Object(N.a)(Object(N.a)({disableTypography:!0,className:n.root},r),{},{children:[Object(u.jsx)(Ke.a,{variant:"h6",children:t}),a?Object(u.jsx)(Re.a,{"aria-label":"close",className:n.closeButton,onClick:a,children:Object(u.jsx)(qe.a,{})}):null]}))}))),He=Object(Ee.a)((function(e){return{root:{padding:e.spacing(2)}}}))(Je.a),Ve=(Object(Ee.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(We.a),function(e){var t=e.open,n=e.setOpen,a=function(){n(!1)};return Object(u.jsx)("div",{children:Object(u.jsxs)(ze.a,{onClose:a,"aria-labelledby":"customized-dialog-title",open:t,children:[Object(u.jsx)(Ye,{id:"customized-dialog-title",onClose:a,children:"FAQs"}),Object(u.jsxs)(He,{dividers:!0,children:[Object(u.jsx)(Ke.a,{gutterBottom:!0,variant:"h6",children:Object(u.jsx)("b",{children:"\ud83d\ude0a What is Kindness Tracker?"})}),Object(u.jsx)(Ke.a,{gutterBottom:!0,children:"The purpose of this app is to track the spread of acts of kindness and encourage people to pay it forward!"}),Object(u.jsx)(Ke.a,{gutterBottom:!0,variant:"h6",children:Object(u.jsx)("b",{children:"\ud83e\udd14 How does it work?"})}),Object(u.jsxs)(Ke.a,{gutterBottom:!0,children:["We handed out kindness cards and encouraged people to pay it forward. When you do something nice for someone, you should give them a card. They fill out out a Google form to tell us what happened. Then, the process repeats!",Object(u.jsx)("img",{src:Pe,className:"kindness-card-image"})]}),Object(u.jsx)(Ke.a,{gutterBottom:!0,variant:"h6",children:Object(u.jsx)("b",{children:'\u2194\ufe0f What does it mean to "trace" an act of kindness?'})}),Object(u.jsxs)(Ke.a,{gutterBottom:!0,children:["We mean that you are ",Object(u.jsx)("b",{children:"tracing"}),' the path this act of kindness has travelled as people pay it forward! The ID number on each kindness card allows us to link one act of kindness to another. The "trace" of a particular act of kindness is just the path of acts it lives on, with each act having the same ID number!']}),Object(u.jsx)(Ke.a,{gutterBottom:!0,variant:"h6",children:Object(u.jsx)("b",{children:"\ud83d\ude4b\ud83c\udffd\u200d\u2640\ufe0f I want to participate!"})}),Object(u.jsx)(Ke.a,{gutterBottom:!0,children:"Click the \u2795 \xa0button in the top right of the page to add your own act of kindness and learn more!"}),Object(u.jsx)(Ke.a,{gutterBottom:!0,variant:"h6",children:Object(u.jsx)("b",{children:"\u26a0\ufe0f Where did you get the fake data from?"})}),Object(u.jsx)(Ke.a,{gutterBottom:!0,children:"We just wrote a quick script to generate fake acts of kindness all over the United States, most of which are in Massachusetts. This data is just a placeholder while the app rolls out and more acts happen in the real world."})]})]})})}),Ge=function(e){var t=e.open,n=e.setOpen,a=function(){n(!1)};return Object(u.jsx)("div",{children:Object(u.jsxs)(ze.a,{onClose:a,"aria-labelledby":"customized-dialog-title",open:t,children:[Object(u.jsx)(Ye,{id:"customized-dialog-title",onClose:a,children:"Add a new act of kindness!"}),Object(u.jsxs)(He,{dividers:!0,children:[Object(u.jsxs)(Ke.a,{gutterBottom:!0,children:["You may be wondering - how can ",Object(u.jsx)("i",{children:"I"})," add an act of kindness to the tracker!"]}),Object(u.jsxs)(Ke.a,{gutterBottom:!0,children:["We have reserved the ID number ",Object(u.jsx)("b",{children:"123"})," for any act of kindness that you want to do!"]}),Object(u.jsxs)(Ke.a,{gutterBottom:!0,children:["If you want to get involved in the tracker, here are the steps:",Object(u.jsxs)("ol",{children:[Object(u.jsx)("li",{children:"\ud83d\ude0a \xa0 Do something kind for someone else!"}),Object(u.jsxs)("li",{children:["\u270f\ufe0f \xa0 Fill out our Google form ",Object(u.jsx)("a",{href:"http://bit.ly/your-kindness",target:"_blank",children:Object(u.jsx)("b",{children:"here"})})," \ud83d\udd17  \xa0 to tell us what happened!"]}),Object(u.jsx)("li",{children:"\ud83d\udde3\ufe0f \xa0 Encourage that person (or anyone else) to check out Kindness Tracker and maybe pay it forward!"})]})]}),Object(u.jsxs)(Ke.a,{gutterBottom:!0,children:["Remember, you should use ID number ",Object(u.jsx)("b",{children:"123"}),", and tell your friends to do the same."]}),Object(u.jsx)(Ke.a,{gutterBottom:!0,children:"Here is an easy to remember link to our Google form (we already filled in 123 for you here):"}),Object(u.jsx)(Ke.a,{gutterBottom:!0,children:Object(u.jsx)("a",{href:"http://bit.ly/your-kindness",target:"_blank",children:Object(u.jsx)("code",{children:"bit.ly/your-kindness"})})}),Object(u.jsx)("hr",{}),Object(u.jsx)(Ke.a,{gutterBottom:!0,children:"If you want an actual kindness card, or have any further questions, feel free to reach out to the developers at:"}),Object(u.jsx)(Ke.a,{gutterBottom:!0,children:Object(u.jsx)("code",{children:Object(u.jsx)("a",{href:"mailto:kindness-tracker@mit.edu",children:"kindness-tracker@mit.edu"})})})]})]})})},Ze=n(72),Qe=n.n(Ze),Xe=n(73),$e=n.n(Xe),et=function(e){var t=e.data,n=e.setSelectedNode,r=e.traceId;if(!t)return null;var c=t.length,s=new Set(t.map((function(e){return e[m]}))),i=s.size,o=Array.from(s).filter((function(e){return 0!==e})).reduce((function(e,n){return e[n]=W(E(t,n)),e}),{}),l=Math.max.apply(Math,Object(d.a)(Object.values(o))),h=Qe.a.maxBy(Qe.a.keys(o),(function(e){return o[e]})),b=Object.values(o).reduce((function(e,t){return e+t}),0)/Object.values(o).length,f=R(t),p=f[f.length-1];return Object(a.useEffect)((function(){console.log("klsjflkjljls"),j.selectAll(".chart-svg").remove();var e=f.map((function(e){return e.dateTime})),t=e[0],n=e[f.length-1].diff(t,["days"]),a=Math.ceil(n.days),r=Qe.a.range(a).map((function(n){var a=t.plus({days:n});return{days:n,count:e.filter((function(e){return e.startOf("day")<=a.startOf("day")})).length}})),c=30,s=30,i=50,o=30,l=460-o-s,d=300-c-i,u=j.select(".chart-outer").append("svg").attr("class","chart-svg").attr("width",l+o+s).attr("height",d+c+i).append("g").attr("transform","translate("+o+","+c+")"),h=j.scaleLinear().domain([0,j.max(r,(function(e){return e.days}))]).range([0,l]);u.append("g").attr("transform","translate(0,"+d+")").call(j.axisBottom(h)),u.append("text").attr("class","axis-label").text("Days since first act of kindness (".concat(t.toLocaleString(w.DateTime.DATE_SHORT),")")).attr("x",o+(l-o-s)/2).attr("text-anchor","middle").attr("fill","white").attr("y",d+35),u.append("text").attr("class","axis-label").text("# of cumulative acts of kindness over time").attr("text-anchor","middle").attr("fill","white").attr("font-size","20px").attr("x",o+(l-o-s)/2).attr("y",-10);var b=j.scaleLinear().domain([0,j.max(r,(function(e){return e.count}))]).range([d,0]);u.append("g").call(j.axisLeft(b)),u.append("path").datum(r).attr("fill","none").attr("stroke","green").attr("stroke-width",3.5).attr("d",j.line().x((function(e){return h(e.days)})).y((function(e){return b(e.count)})))}),[t]),Object(u.jsx)("div",{className:"summary-stats-inner",children:Object(u.jsxs)("div",{className:"summary-stats-flex",children:[Object(u.jsxs)("div",{className:"summary-stats-row",children:[Object(u.jsxs)("div",{className:"sidebar-clear-div summary-statistics-card summary-stats-item-half",children:[Object(u.jsx)("h1",{children:c}),Object(u.jsxs)("div",{className:"summary-statistics-info-text",children:[Object(u.jsx)("p",{children:"total acts"}),Object(u.jsx)(we.a,{title:Object(u.jsx)("h2",{children:"Total number of acts of kindness in this dataset."}),arrow:!0,children:Object(u.jsx)($e.a,{fontSize:"small"})})]})]}),Object(u.jsxs)("div",{className:"sidebar-clear-div summary-statistics-card summary-stats-item-half",children:[Object(u.jsx)("h1",{children:i}),Object(u.jsxs)("div",{className:"summary-statistics-info-text",children:[Object(u.jsx)("p",{children:"unique paths (card IDs)"}),Object(u.jsx)(we.a,{title:Object(u.jsx)("h2",{children:'Total number of unique card IDs that are in distribution. Each card ID creates a "path" where you can pay kindness forward.'}),arrow:!0,children:Object(u.jsx)($e.a,{fontSize:"small"})})]})]})]}),Object(u.jsxs)("div",{className:"summary-stats-row",children:[Object(u.jsxs)("div",{className:"sidebar-clear-div summary-statistics-card summary-stats-item-half",children:[Object(u.jsxs)("h1",{children:[l.toFixed(1)," miles"]}),Object(u.jsxs)("div",{className:"summary-statistics-info-text",children:[Object(u.jsx)("p",{children:"longest path length"}),Object(u.jsx)(we.a,{title:Object(u.jsx)("h2",{children:"Longest path length that a single act of kindness has travelled. Computed as the sum of distances between adjacent points along a path."}),arrow:!0,children:Object(u.jsx)($e.a,{fontSize:"small"})})]}),Object(u.jsx)(le.a,{onClick:function(){return r(+h)},variant:"contained",color:"primary",children:"View"})]}),Object(u.jsxs)("div",{className:"sidebar-clear-div summary-statistics-card summary-stats-item-half",children:[Object(u.jsxs)("h1",{children:[b.toFixed(1)," miles"]}),Object(u.jsx)("p",{children:"average path length"})]})]}),Object(u.jsxs)("div",{className:"summary-stats-row",children:[Object(u.jsx)("div",{className:"summary-stats-item-big",children:Object(u.jsx)("div",{className:"summary-stats-kindness-card",children:Object(u.jsx)(de,{node:p,shortMode:!0})})}),Object(u.jsx)("div",{className:"summary-stats-item-small",children:Object(u.jsx)(le.a,{onClick:function(){return n(p)},variant:"contained",color:"primary",children:"View"})})]}),Object(u.jsx)("div",{className:"chart-outer"})]})})},tt=n(91),nt=n.n(tt),at=n(92),rt=n.n(at),ct=n(258),st=n(143),it=n.n(st),ot=n(142),lt=n.n(ot);n(224);nt.a.workerClass=te.a,nt.a.accessToken="pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ";var dt=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),s=Object(i.a)(c,2),o=s[0],d=s[1],h=Object(a.useState)(!0),b=Object(i.a)(h,2),S=b[0],T=b[1],C=Object(a.useState)(null),M=Object(i.a)(C,2),D=M[0],I=M[1],L=Object(a.useState)(null),_=Object(i.a)(L,2),B=_[0],z=_[1],A=Object(a.useState)(f),J=Object(i.a)(A,2),W=J[0],R=J[1],U=Object(a.useState)(null),q=Object(i.a)(U,2),K=q[0],P=q[1],Y=Object(a.useState)(null),H=Object(i.a)(Y,2),V=H[0],G=H[1],Z=Object(a.useState)(ae),Q=Object(i.a)(Z,2),X=Q[0],$=Q[1],ee=Object(a.useState)(!1),te=Object(i.a)(ee,2),ne=te[0],de=te[1],je=Object(a.useState)(!1),ue=Object(i.a)(je,2),he=ue[0],be=ue[1],fe=Object(a.useState)(!1),me=Object(i.a)(fe,2),pe=me[0],Oe=me[1];Object(a.useEffect)((function(){pe?j.select(".right-sidebar").style("left","65%"):j.select(".right-sidebar").style("left","100%")}),[pe]),Object(a.useEffect)((function(){Oe(!1)}),[X]),Object(a.useEffect)((function(){window.innerWidth<800&&alert("We see you're on mobile! Rotate your phone sideways for the best experience. Check out our app on your computer too!")}),[]);var xe=function(){l.a.init({key:W,simpleSheet:!0}).then((function(e){var t=function(e){var t=e?e.map((function(e,t){return Object(N.a)(Object(N.a)({},e),{},{index:t,dateTime:w.DateTime.fromFormat(e.Timestamp,"M/d/yyyy H:mm:ss"),hash:"".concat(t,"-").concat(e.Timestamp)})})):null,n=[m,y,k],a=t.map((function(e){return n.forEach((function(t){e[t]=+e[t]})),e}));return F(a)}(e);r(t),d(t);var n=new rt.a([m,v,p,O,x,g],{idFieldOrFunction:"index"});n.addAll(t),P(n)})).catch(console.warn)};Object(a.useEffect)((function(){null===n&&xe()}),[n]),Object(a.useEffect)((function(){null!==n&&(T(!0),I(null),G(null),z(null),$(ae),Oe(!1),xe())}),[W]);var ge=function(){return d(n)},ve=function(e){X===se||X===ie||($(re),ge()),I(e)};return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsxs)("div",{className:"horizontal-stack",children:[Object(u.jsx)("div",{className:"left-sidebar",children:Object(u.jsx)(Ie,{isLoading:S,selectedNode:D,setSelectedNode:I,clearSelectedNode:function(){I(null),$(ae),G(null)},mode:X,setMode:$,trace:o,dataUrl:W,setDataUrl:R,filterText:V})}),Object(u.jsxs)("div",{className:"vertical-stack",children:[Object(u.jsxs)("div",{className:"top-bar-wrapper",children:[Object(u.jsx)("div",{className:"search-bar-wrapper",children:X===ae||X===ce?Object(u.jsx)(_e,{filterText:V,setFilterText:function(e){$(ae),G(e)},filterNodes:function(e){if(T(!0),!e)return d(n),T(!1),void $(ae);var t=K.get(e.split(" "),rt.a.UNION_REDUCER);if(0===t.length)return alert("No results found! Try another search query."),T(!1),void $(ae);I(null),z(null),$(ce),d(t)}}):null}),Object(u.jsxs)("div",{className:"icon-wrapper",children:[Object(u.jsx)(we.a,{title:Object(u.jsx)("h2",{children:"Add New"}),arrow:!0,children:Object(u.jsx)(ct.a,{size:"small",color:"primary","aria-label":"add",onClick:function(){return be(!0)},className:"icon-wrapper-button",children:Object(u.jsx)(lt.a,{})})}),Object(u.jsx)(we.a,{title:Object(u.jsx)("h2",{children:"Learn More"}),arrow:!0,children:Object(u.jsx)(ct.a,{size:"small",color:"primary","aria-label":"info",onClick:function(){return de(!0)},className:"icon-wrapper-button",children:Object(u.jsx)(it.a,{})})})]})]}),Object(u.jsx)("div",{className:"map-wrapper",children:Object(u.jsx)(oe,{trace:o,setIsLoading:T,selectedNode:D,setSelectedNode:ve,hoveredNode:B,setHoveredNode:z,mode:X,setTrace:d,resetTrace:ge})})]}),pe||X!==ae?null:Object(u.jsx)("div",{className:"right-sidebar-button",children:Object(u.jsx)(we.a,{title:Object(u.jsx)("h2",{children:"View statistics for all acts of kindness."}),placement:"left",arrow:!0,children:Object(u.jsx)(le.a,{onClick:function(){return Oe(!0)},variant:"contained",color:"primary",children:"Summary Stats"})})}),pe?Object(u.jsx)("div",{className:"right-sidebar-button",children:Object(u.jsx)(le.a,{onClick:function(){return Oe(!1)},variant:"contained",color:"secondary",children:"Close"})}):null,Object(u.jsx)("div",{className:"right-sidebar",children:Object(u.jsx)(et,{data:n,setSelectedNode:ve,traceId:function(e){console.log("THE ID",e);var t=E(n,e);d(t),$(ie),I(t[t.length-1])}})})]}),Object(u.jsx)(Ve,{open:ne,setOpen:de}),Object(u.jsx)(Ge,{open:he,setOpen:be})]})},jt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,263)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(dt,{})}),document.getElementById("root")),jt()}},[[225,1,2]]]);
//# sourceMappingURL=main.de3db501.chunk.js.map