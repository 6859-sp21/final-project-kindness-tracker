(this["webpackJsonpkindness-tracker"]=this["webpackJsonpkindness-tracker"]||[]).push([[0],{53:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),i=n(47),s=n.n(i),a=(n(53),n(1)),l=n(48),o=n.n(l),d=n(6),u=n(4),j=n(0),b=n(9),f=n.n(b),p="ID Number on kindness card",h="(Optional) Tell us about the act of kindness you received!",O="center_lng",m="center_lat",x=n(19),v=n(12),g="lng",N="lat",y=function(e,t){u.select(".map-tooltip").transition().duration(0).style("opacity",.8).style("left","".concat(e.pageX+50,"px")).style("top","".concat(e.pageY-50,"px"))},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"steelblue";return u.selectAll(".circle").transition().duration(500).style("fill",e)},T=function(e){return"circle-".concat(e.index)},C=function(e){return"circle circle-".concat(e[p])},S=function(e,t){return e.project(new f.a.LngLat(t.center_lng,t.center_lat))},L=function(e){u.selectAll(".circle").attr("cx",(function(t){return S(e,t).x})).attr("cy",(function(t){return S(e,t).y}))},M=function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=0,r=0;n||(c=t/69),r=c;var i=arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?1:5,s=function(t){return e.map((function(e){return e[t]}))},a=Math.max.apply(Math,Object(d.a)(s(g))),l=Math.min.apply(Math,Object(d.a)(s(g))),o=Math.max.apply(Math,Object(d.a)(s(N))),u=Math.min.apply(Math,Object(d.a)(s(N)));return n&&(c=(a-l)*t,r=(o-u)*t),{topRight:{lng:a+c,lat:u+r},bottomLeft:{lng:l-c*i,lat:o-r}}}(e.map((function(e){return{lng:e.center_lng,lat:e.center_lat}})),e.length>1?.1:1,e.length>1,e.length>1)},_=n(14),I=function(e){var t=e.node,n=e.isSelected;if(!t)return null;console.log("rendering tooltip");var c,r,i=t.admin_level_3,s=t.admin_level_1,a=t[h];return Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{children:Object(j.jsxs)("b",{children:[i?"".concat(i,", "):null,s]})}),Object(j.jsx)("p",{children:Object(j.jsx)("b",{children:(c=a,r=140,c.length>r?"".concat(c.substring(0,r),"..."):c)})}),Object(j.jsx)("p",{children:n?null:"Click for more info!"})]})};n(79);f.a.accessToken="pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ",f.a.workerClass=_.a;var E=function(e){var t,n,r=e.trace,i=e.setIsLoading,s=e.selectedNode,l=e.setSelectedNode,o=e.hoveredNode,d=e.setHoveredNode,b=e.isTracing,h=e.setTrace,O=e.resetTrace,m=Object(c.useState)(null),x=Object(a.a)(m,2),v=x[0],g=x[1],N=Object(c.useState)(null),S=Object(a.a)(N,2),_=S[0],E=S[1],w=Object(c.useRef)(null);return Object(c.useEffect)((function(){if(null===v)!function(e){var t=e.setMap,n=e.mapContainer,c=new f.a.Map({container:n.current,style:"mapbox://styles/mapbox/light-v10",center:[-100,40],zoom:3});c.on("load",(function(){t(c)}))}({setMap:g,mapContainer:w});else{var e=v.getCanvasContainer();u.select(e).append("svg").attr("class","map-svg").attr("width","100%").attr("height","100%").style("position","absolute").style("z-index",2).style("top",0).style("left",0),v.on("viewreset",(function(){return L(v)})),v.on("move",(function(){return L(v)})),v.on("moveend",(function(){return L(v)})),v.on("load",(function(){return v.resize()}))}}),[v]),Object(c.useEffect)((function(){if(v&&r){u.select(".map-svg").selectAll("circle").data(r,(function(e){return e.index})).join((function(e){return e.append("circle").attr("id",T).attr("class",C).attr("r",10).style("fill","steelblue").on("click",(function(e,t){return l(t)})).on("mouseover",(function(e,t){d(t),y(e)})).on("mousemove",(function(e,t){y(e)})).on("mouseout",(function(e,t){var n;n=function(){return d(null)},u.select(".map-tooltip").transition().duration(500).style("opacity",0).on("end",n)}))}),(function(e){return e}),(function(e){return e.remove()})),L(v),i(!1);var e=M(r);E(e)}}),[v,r]),Object(c.useEffect)((function(){_&&function(e,t){var n=t.topRight,c=t.bottomLeft;e.fitBounds([[c.lng,c.lat],[n.lng,n.lat]],{duration:3e3})}(v,_)}),[_]),Object(c.useEffect)((function(){if(b){if(0===s[p]){var e=M(r);E(e)}k("purple").attr("r",10),u.select("#".concat(T(s))).transition().duration(500).style("fill","green").attr("r",30)}else if(s){k(),u.select("#".concat(T(s))).transition().duration(500).style("fill","red").attr("r",10);var t=M([s]);E(t)}else if(r){var n=M(r);E(n),k()}}),[s,b]),Object(c.useEffect)((function(){if(b){var e=function(e,t){var n=t[p];return(0===n?e:e.filter((function(e){return e[p]===n||0===e[p]}))).sort((function(e,t){return e.dateTime.toMillis()-t.dateTime.toMillis()}))}(r,s);h(e)}else O()}),[b]),Object(j.jsx)("div",{ref:function(e){return w.current=e},className:"map-container-div",children:Object(j.jsx)("div",{className:"map-tooltip",style:{opacity:0},children:Object(j.jsx)(I,{node:o,isSelected:(t=o,n=s,!(!t||!n)&&t.index==n.index)})})})},w=(n(80),function(e){var t=e.node;if(console.log("rendering card"),!t)return null;var n=t.street_number,c=t.street_name,r=n&&c?"".concat(n?"".concat(n," "):null," ").concat(c):null,i=t.admin_level_3,s=t.admin_level_1,a=t.zip_code,l=t[h],o=t.dateTime,d=o.toLocaleString(v.DateTime.DATE_FULL),u=o.toLocaleString(v.DateTime.TIME_SIMPLE);return Object(j.jsxs)("div",{className:"kindness-card-inner",children:[Object(j.jsxs)("p",{children:["Date: ",Object(j.jsx)("b",{children:d})]}),Object(j.jsxs)("p",{children:["Time: ",Object(j.jsx)("b",{children:u})]}),Object(j.jsxs)("p",{children:["Address: ",Object(j.jsx)("b",{children:r||"No address provided."})]}),Object(j.jsxs)("p",{children:["City: ",Object(j.jsx)("b",{children:i||"No city provided."})]}),Object(j.jsxs)("p",{children:["State: ",Object(j.jsx)("b",{children:s||"No state provided."})]}),Object(j.jsxs)("p",{children:["Zip Code: ",Object(j.jsx)("b",{children:a||"No zip code provided."})]}),Object(j.jsx)("p",{children:"Act of Kindness Description:"}),Object(j.jsx)("div",{className:"kindess-card-description",children:Object(j.jsx)("p",{children:Object(j.jsx)("b",{children:l||"No kindess description provided."})})})]})}),D=(n(81),function(){return console.log("rendering loading"),Object(j.jsxs)("div",{className:"loading-wrapper",children:[Object(j.jsx)("div",{className:"la-ball-clip-rotate la-2x",children:Object(j.jsx)("div",{})}),Object(j.jsx)("p",{children:"Loading..."})]})}),F=function(){return console.log("rendering side info card"),Object(j.jsxs)("div",{children:[Object(j.jsx)("hr",{className:"sidebar-divider"}),Object(j.jsx)("h3",{children:"Click a circle to explore that act of kindness further!"})]})},J=function(e){var t=e.isTracing,n=e.setIsTracing,c=e.trace,r=e.selectedNode,i=e.setSelectedNode;if(console.log("rendering trace"),!t)return null;var s=c.indexOf(r),a=c.length;return Object(j.jsxs)("div",{className:"trace-stepper-wrapper",children:[Object(j.jsxs)("div",{className:"trace-stepper-button-horizontal",children:[Object(j.jsx)("button",{disabled:0===s,onClick:function(){return i(c[0])},children:"Earliest"}),Object(j.jsx)("button",{disabled:0===s,onClick:function(){return i(c[s-1])},children:"Previous"}),Object(j.jsx)("button",{disabled:s===a-1,onClick:function(){return i(c[s+1])},children:"Next"}),Object(j.jsx)("button",{disabled:s===a-1,onClick:function(){return i(c[a-1])},children:"Latest"})]}),Object(j.jsx)("p",{children:"".concat(s+1," / ").concat(c.length)}),Object(j.jsx)(w,{node:r}),Object(j.jsx)("div",{className:"trace-stepper-button-below",children:Object(j.jsx)("button",{onClick:function(){n(!1)},children:"Exit Trace Mode"})})]})},A=function(e){var t=e.isLoading,n=e.selectedNode,c=e.setSelectedNode,r=e.isTracing,i=e.setIsTracing,s=e.trace;return console.log("rendering sidebar"),Object(j.jsxs)("div",{className:"sidebar-flex",children:[Object(j.jsx)("h1",{children:"Kindess Tracker"}),t?Object(j.jsx)(D,{}):null,t||n?null:Object(j.jsx)(F,{}),r?null:Object(j.jsx)("div",{className:"selected-card-wrapper",children:Object(j.jsx)(w,{node:n})}),Object(j.jsxs)("div",{className:"sidebar-clear-div",children:[n&&!r?Object(j.jsx)("button",{className:"sidebar-button-below",onClick:function(){c(null),i(!1)},children:"Clear Selected Node"}):null,n&&!r?Object(j.jsx)("button",{onClick:function(){return i(!0)},children:"Trace this Act!"}):null]}),Object(j.jsx)(J,{isTracing:r,setIsTracing:i,trace:s,selectedNode:n,setSelectedNode:c}),Object(j.jsxs)("div",{className:"sidebar-bottom-content",children:[Object(j.jsx)("p",{className:"sidebar-small-text",children:"Christian Moroney, Jackson Bernatchez, Kevin Lyons"}),Object(j.jsx)("p",{className:"sidebar-small-text",children:"6.859 Final Project Spring 2021"}),Object(j.jsx)("div",{children:Object(j.jsx)("a",{href:"https://github.com/6859-sp21/final-project-kindness-tracker",target:"_blank",children:Object(j.jsx)("img",{className:"sidebar-git-image",src:"https://image.flaticon.com/icons/png/512/25/25231.png"})})})]})]})},z=n(20),P=n.n(z);n(82);P.a.workerClass=_.a,P.a.accessToken="pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ";var Y=function(){var e=Object(c.useState)(null),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(null),s=Object(a.a)(i,2),l=s[0],d=s[1],u=Object(c.useState)(!0),b=Object(a.a)(u,2),f=b[0],h=b[1],g=Object(c.useState)(null),N=Object(a.a)(g,2),y=N[0],k=N[1],T=Object(c.useState)(null),C=Object(a.a)(T,2),S=C[0],L=C[1],M=Object(c.useState)(!1),_=Object(a.a)(M,2),I=_[0],w=_[1];Object(c.useEffect)((function(){null===n&&o.a.init({key:"https://docs.google.com/spreadsheets/d/1IqEBIcnFZ_BFCrD8jhk11yVoOjfxzZpiZLdL4cL3oK0/pubhtml",simpleSheet:!0}).then((function(e){var t=function(e){var t=e?e.map((function(e,t){return Object(x.a)(Object(x.a)({},e),{},{index:t,dateTime:v.DateTime.fromFormat(e.Timestamp,"M/d/yyyy H:mm:ss")})})):null,n=[p,O,m];return t.map((function(e){return n.forEach((function(t){e[t]=+e[t]})),e}))}(e);console.log(t),r(t),d(t)})).catch(console.warn)}),[n]);return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("div",{className:"horizontal-stack",children:[Object(j.jsx)("div",{className:"left-sidebar",children:Object(j.jsx)(A,{isLoading:f,selectedNode:y,setSelectedNode:k,isTracing:I,setIsTracing:w,trace:l})}),Object(j.jsx)("div",{className:"map-wrapper",children:Object(j.jsx)(E,{trace:l,setIsLoading:h,selectedNode:y,setSelectedNode:k,hoveredNode:S,setHoveredNode:L,isTracing:I,setTrace:d,resetTrace:function(){return d(n)}})})]})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,84)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),i(e),s(e)}))};s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(Y,{})}),document.getElementById("root")),B()}},[[83,1,2]]]);
//# sourceMappingURL=main.1315c00f.chunk.js.map