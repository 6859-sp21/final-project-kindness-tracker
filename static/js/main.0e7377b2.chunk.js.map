{"version":3,"sources":["utils/dataConstants.js","utils/dataUtils.js","components/mapboxGLMap/mapUtils.js","triangle.png","components/mapboxGLMap/lineUtils.js","components/tooltip/index.js","utils/stringUtils.js","utils/appMode.js","components/mapboxGLMap/index.js","components/sidebar/kindnessCard.js","components/sidebar/loadingSpinner.js","components/sidebar/infoCard.js","components/sidebar/traceStepper.js","components/sidebar/dataToggle.js","components/sidebar/traceStatistics.js","components/sidebar/index.js","components/search/index.js","kindness_card_image.png","components/dialog/index.js","App.js","reportWebVitals.js","index.js"],"names":["REAL_DATA_URL","ID_KEY_NAME","STREET_KEY_NAME","CITY_KEY_NAME","STATE_KEY_NAME","ZIP_KEY_NAME","KINDNESS_KEY_NAME","CENTER_LNG_KEY_NAME","CENTER_LAT_KEY_NAME","LNG_KEY","LAT_KEY","BAD_WORDS_FILTER","Filter","handleOverlappingPoints","data","lngKey","DataConstants","latKey","lngLatString","d","lngLatsMap","map","reduce","s","permuteLngLat","lng","lat","permutationMiles","permutationDegrees","random","Math","nodesAreEqual","one","two","index","filterTraceListForNode","node","id","filter","sort","a","b","dateTime","toMillis","formatFieldsForDisplay","streetNumber","street","address","city","state","cityState","zip","location","kindness","dateString","toLocaleString","DateTime","DATETIME_SHORT","generateLngLatArray","cleanDescription","text","clean","hideTooltip","callback","d3","transition","duration","style","on","resetAllCircleColors","fill","uniqueCircleId","circleClass","projectLngLatToXY","project","mapboxgl","LngLat","mapRender","attr","x","y","getBoudingObjectForTraceList","trace","lngLatPoints","paddingMiles","isRatioPadding","paddingDegreesLng","paddingDegreesLat","leftPadConstant","extractKey","key","maxLng","max","minLng","min","maxLat","minLat","topRight","bottomLeft","DataUtils","length","bringCircleWithIdToFront","setTimeout","selectAll","remove","append","convertDatumToLngLatArray","computePointId","drawArcBetweenNodes","origin","destination","hash","idPoint","getSource","route","constructFeatureCollection","arcifyResult","lineDistance","turf","features","numSteps","floor","arc","i","segment","push","geometry","coordinates","arcifyFeatureCollection","routeProc","point","addSource","addLayer","hasImage","loadImage","triangleImage","error","image","addImage","counter","animatePoint","start","end","properties","bearing","source","setData","requestAnimationFrame","clearArcsForId","removeLayer","removeSource","TooltipContents","isSelected","console","log","inp","kindnessClean","kindnessTrimmed","substring","DEFAULT","SELECTED","SEARCHING","TRACING","TRACE_STATS","accessToken","workerClass","MapboxWorker","MapboxGLMap","setIsLoading","selectedNode","setSelectedNode","hoveredNode","setHoveredNode","mode","setTrace","resetTrace","useState","setMap","boundingObject","setBoundingObject","mapContainer","useRef","prevLineId","setPrevLineId","nextLineId","setNextLineId","useEffect","Map","container","current","center","zoom","MapUtils","getCanvasContainer","join","enter","e","pageX","pageY","update","exit","boundingObjectNew","fitBounds","AppMode","nodes","newPrevLineId","newNextLineId","traceIndex","indexOf","prevNode","nextNode","LineUtils","drawAndZoomLines","traceNew","ref","el","className","KindnessCard","LoadingSpinner","SidebarInfoCard","fontSize","TraceStepper","exitTraceMode","n","Button","variant","color","disabled","onClick","DataToggle","dataUrl","setDataUrl","checked","label","FormControlLabel","control","Switch","onChange","event","eventChecked","target","labelPlacement","TraceStatistics","traceCount","lngLat","distance","firstDate","days","diff","toObject","toFixed","Sidebar","isLoading","clearSelectedNode","setMode","filterText","backgroundColor","href","src","KindnessSearchBar","filterNodes","setFilterText","value","cancelOnEscape","onRequestSearch","onCancelSearch","placeholder","DialogTitle","withStyles","theme","root","margin","padding","spacing","closeButton","position","right","top","palette","grey","props","children","classes","onClose","other","disableTypography","Typography","IconButton","aria-label","DialogContent","MuiDialogContent","HelpDialog","MuiDialogActions","open","setOpen","handleClose","Dialog","aria-labelledby","dividers","gutterBottom","kindnessCardImage","App","trie","setTrie","openDialog","setOpenDialog","window","innerWidth","alert","fetchData","Tabletop","init","simpleSheet","then","dataProc","fromFormat","numericalFields","dataProcNumerical","forEach","f","ts","TrieSearch","idFieldOrFunction","addAll","catch","warn","dataFiltSearch","get","split","UNION_REDUCER","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0e7377b2.chunk.js","sourcesContent":["// const TIMESTAMP_KEY_NAME = 'Timestamp'\n// const ID_KEY_NAME = 'ID NUMBER on kindness card'\n// const CITY_KEY_NAME = 'CITY where act of kindness took place'\n// const STATE_KEY_NAME = 'STATE'\n// const ZIP_KEY_NAME = '[OPTIONAL] ZIP CODE'\n// const STREET_KEY_NAME = '[Optional] STREET NAME'\n// const KINDNESS_KEY_NAME = '[Optional] Tell us about the act of kindness you received!'\n// const CENTER_LNG_KEY_NAME = 'CenterLon'\n// const CENTER_LAT_KEY_NAME = 'CenterLat'\n\nconst REAL_DATA_URL = 'https://docs.google.com/spreadsheets/d/1IqEBIcnFZ_BFCrD8jhk11yVoOjfxzZpiZLdL4cL3oK0/pubhtml'\n\n// Massachusetts spoof data\nconst MASS_SPOOF_DATA_URL = 'https://docs.google.com/spreadsheets/d/1ILNeaJC675bNSCWHgAK-2hD6MNZB38PYh7Y90MncF50/pubhtml'\n\n// USA spoof data\nconst USA_SPOOF_DATA_URL = 'https://docs.google.com/spreadsheets/d/1BvBwyy1xYYhdiokMfbyxssu5nlB0arRMvxyuQLCzsH4/pubhtml'\n\nconst SPOOF_DATA_URL = MASS_SPOOF_DATA_URL\n\n// this is the format used by Google sheets\nconst TIMESTAMP_FORMAT = 'M/d/yyyy H:mm:ss'\n// 4/28/2021 13:36:45\n\n// this is the format that was originally used by Jack in spoof data\n// const TIMESTAMP_FORMAT = 'MM/dd/yy h:mm a'\n\n// TOOD add constants for new parsed geo fields when those are avaiable\nconst TIMESTAMP_KEY_NAME = 'Timestamp'\nconst ID_KEY_NAME = 'What is the ID Number on your kindness card? (We need this to track the spread of kindness!)'\nconst STREET_NUMBER_KEY_NAME = 'street_number'\nconst STREET_KEY_NAME = 'street_name'\nconst CITY_KEY_NAME = 'admin_level_3'\nconst STATE_KEY_NAME = 'admin_level_1'\nconst ZIP_KEY_NAME = 'zip_code'\nconst KINDNESS_KEY_NAME = 'Tell us about the act of kindness you received!'\nconst CENTER_LNG_KEY_NAME = 'center_lng'\nconst CENTER_LAT_KEY_NAME = 'center_lat'\n\n// also add a constant for the root ID\nconst ROOT_ACT_ID = 0\n\nexport {\n    TIMESTAMP_KEY_NAME,\n    ID_KEY_NAME,\n    STREET_NUMBER_KEY_NAME,\n    STREET_KEY_NAME,\n    CITY_KEY_NAME,\n    STATE_KEY_NAME,\n    ZIP_KEY_NAME,\n    KINDNESS_KEY_NAME,\n    CENTER_LNG_KEY_NAME,\n    CENTER_LAT_KEY_NAME,\n\n    REAL_DATA_URL,\n    SPOOF_DATA_URL,\n\n    TIMESTAMP_FORMAT,\n\n    ROOT_ACT_ID,\n}\n","import { DateTime } from  'luxon'\nimport Filter from 'bad-words'\nimport * as DataConstants from './dataConstants'\n\nconst DEGREES_TO_MILES = 69\nconst LNG_KEY = 'lng'\nconst LAT_KEY = 'lat'\n\nconst BAD_WORDS_FILTER = new Filter()\n\nconst processRawSheetsData = (data) => {\n    const dataProc = data ? data.map((d, i) => ({\n        ...d,\n        index: i,\n        dateTime: DateTime.fromFormat(d[DataConstants.TIMESTAMP_KEY_NAME], DataConstants.TIMESTAMP_FORMAT),\n        hash: `${i}-${d[DataConstants.TIMESTAMP_KEY_NAME]}`\n    })) : null\n\n    // convert certain fields to numbers\n    const numericalFields = [\n        DataConstants.ID_KEY_NAME,\n        DataConstants.CENTER_LNG_KEY_NAME,\n        DataConstants.CENTER_LAT_KEY_NAME,\n    ]\n\n    const dataProcNumerical = dataProc.map(d => {\n        numericalFields.forEach(f => {\n            d[f] = +d[f]\n        })\n        return d\n    })\n\n    const dataOverlappingProc = handleOverlappingPoints(dataProcNumerical)\n    return dataOverlappingProc\n}\n\nconst handleOverlappingPoints = (data) => {\n    // return a new data where any lat long pairs that are overlapping are randomly shifted\n    const lngKey = DataConstants.CENTER_LNG_KEY_NAME\n    const latKey = DataConstants.CENTER_LAT_KEY_NAME\n    const lngLatString = d => `${d[lngKey]} ${d[latKey]}`\n\n    // get set of all unique lng lat strings in data\n    const lngLatsMap = data.map(lngLatString).reduce((map, s) => {\n        map[s] = (map[s] || 0) + 1\n        return map\n    }, {})\n\n    // adjust the data based on this\n    // for each point, handle necessary permuation\n    const dataAdjusted = data.map(d => {\n        const count = lngLatsMap[lngLatString(d)]\n\n        if (count === 1) {\n            return d\n        }\n\n        // permute since there is more than 1 of this point\n        const { lng, lat } = permuteLngLat(\n            d[lngKey],\n            d[latKey]\n        )\n\n        d[lngKey] = lng\n        d[latKey] = lat\n        return d\n    })\n    return dataAdjusted\n}\n\nconst permuteLngLat = (lng, lat, permutationMiles = 0.1) => {\n    // get random deltas in the range [-permutationMiles, permutationMiles]\n    const permutationDegrees = permutationMiles / DEGREES_TO_MILES\n    const random = () => Math.random() * (2 * permutationDegrees) - permutationDegrees\n    return {\n        lng: lng + random(),\n        lat: lat + random(),\n    }\n}\n\nconst nodesAreEqual = (one, two) => {\n    if (! one || ! two)\n        return false\n        \n    return one.index == two.index\n}\n\nconst computeLngLatBoundingBox = (lngLatPoints, paddingMiles, isRatioPadding = false, padLeft = true) => {\n    // compute top right and bottom left\n    // then, add some padding amount in miles\n    var paddingDegreesLng = 0\n    var paddingDegreesLat = 0\n    if (! isRatioPadding)\n        paddingDegreesLng = paddingMiles / DEGREES_TO_MILES\n        paddingDegreesLat = paddingDegreesLng\n    \n    // TODO fix hard coding here\n    const leftPadConstant = padLeft ? 5 : 1\n\n    const extractKey = key => lngLatPoints.map((d => d[key]))\n\n    const maxLng = Math.max(...extractKey(LNG_KEY))\n    const minLng = Math.min(...extractKey(LNG_KEY))\n    const maxLat = Math.max(...extractKey(LAT_KEY))\n    const minLat = Math.min(...extractKey(LAT_KEY))\n\n    if (isRatioPadding) {\n        paddingDegreesLng = (maxLng - minLng) * paddingMiles\n        paddingDegreesLat = (maxLat - minLat) * (paddingMiles * 12)\n    }\n\n    return {\n        topRight: {\n            lng: maxLng + paddingDegreesLng,\n            lat: minLat + paddingDegreesLat,\n        },\n        bottomLeft: {\n            lng: minLng - paddingDegreesLng * leftPadConstant,\n            lat: maxLat - paddingDegreesLat,\n        }\n    }\n}\n\nconst filterTraceListForNode = (data, node) => {\n    let dataFilt;\n    const id = node[DataConstants.ID_KEY_NAME]\n    if (id === DataConstants.ROOT_ACT_ID) {\n        // if the id is the root note, just select all of data\n        dataFilt = data\n    } else {\n        // select this id, and the root\n        dataFilt = data\n            .filter(d => \n                (d[DataConstants.ID_KEY_NAME] === id) ||\n                (d[DataConstants.ID_KEY_NAME] === DataConstants.ROOT_ACT_ID)\n            )\n    }\n\n    // apply sorting by date\n    const traceNew = dataFilt.sort((a, b) => a.dateTime.toMillis() - b.dateTime.toMillis())\n    return traceNew\n}\n\nconst formatFieldsForDisplay = (node) => {\n    const streetNumber = node[DataConstants.STREET_NUMBER_KEY_NAME]\n    const street = node[DataConstants.STREET_KEY_NAME]\n    const address = (streetNumber && street) ? `${(streetNumber ? `${streetNumber} ` : null)}${street}` : null\n    const city = node[DataConstants.CITY_KEY_NAME]\n    const state = node[DataConstants.STATE_KEY_NAME]\n    const cityState = (city || state) ? `${city}${city ? `, ${state}` : state}` : null\n    const zip = node[DataConstants.ZIP_KEY_NAME]\n    const location = `${address || 'No street address provided'}\\n${cityState || 'No city/state provided'}${zip ? `\\n${zip}` : ''}`\n    const kindness = node[DataConstants.KINDNESS_KEY_NAME]\n\n    // apply necessary parsing for date\n    const date = node.dateTime\n    const dateString = date.toLocaleString(DateTime.DATETIME_SHORT)\n\n    return {\n        kindness,\n        dateString,\n        location,\n        cityState,\n    }\n}\n\n// write function to quickly convert a data array to the fomat for lat lng\nconst generateLngLatArray = data => data.map(d => ({\n    lng: d[DataConstants.CENTER_LNG_KEY_NAME],\n    lat: d[DataConstants.CENTER_LAT_KEY_NAME],\n}))\n\nconst cleanDescription = (text) => {\n    return BAD_WORDS_FILTER.clean(text)\n}\n\nexport {\n    processRawSheetsData,\n    nodesAreEqual,\n    computeLngLatBoundingBox,\n    filterTraceListForNode,\n    formatFieldsForDisplay,\n    generateLngLatArray,\n    cleanDescription,\n}\n","import * as d3 from 'd3'\nimport mapboxgl from \"mapbox-gl\"\nimport * as DataConstants from '../../utils/dataConstants'\nimport * as DataUtils from '../../utils/dataUtils'\n\nconst POINT_ZOOM = 12\nconst ZOOM_EASE_MILLIS = 3000\nconst POINT_ZOOM_MILES = 1\nconst RATIO_PAD = 0.1\n\nconst initializeMap = ({ setMap, mapContainer }) => {\n    const map = new mapboxgl.Map({\n        container: mapContainer.current,\n        style: 'mapbox://styles/mapbox/light-v10',\n        center: [-100, 40],\n        zoom: 3,\n    })\n\n    map.on(\"load\", () => {\n        setMap(map)\n    })\n}\n\nconst zoomMapToBoundingObject = (map, boundingObject) => {\n    const { topRight, bottomLeft } = boundingObject\n    map.fitBounds([\n        [bottomLeft.lng, bottomLeft.lat],\n        [topRight.lng, topRight.lat]\n    ], {\n        duration: ZOOM_EASE_MILLIS,\n    })\n}\n\nconst showTooltip = (e, d) => {\n    const tooltip = d3.select('.map-tooltip')\n    tooltip\n        .transition()\n        .duration(0)\n        .style('opacity', 0.8)\n        .style('left', `${e.pageX + 50}px`)\n        .style('top', `${e.pageY - 50}px`)\n}\n\nconst hideTooltip = (callback) => {\n    const tooltip = d3.select('.map-tooltip')\n    tooltip\n        .transition().duration(500)\n        .style(\"opacity\", 0)\n        .on('end', callback)\n}\n\nconst resetAllCircleColors = (fill = 'steelblue') => {\n    return d3.selectAll('.circle')\n        .transition()\n        .duration(500)\n        .style('fill', fill)\n        .style('opacity', 1)\n}\n\n// write function to generate ID of circle\nconst uniqueCircleId = d => `circle-${d.index}`\n\n// write function to generate class of circle based off id key\nconst circleClass = d => `circle circle-${d[DataConstants.ID_KEY_NAME]}`\n\n// write projection function for map\nconst projectLngLatToXY = (map, d) => {\n    return map.project(\n        new mapboxgl.LngLat(d[DataConstants.CENTER_LNG_KEY_NAME], d[DataConstants.CENTER_LAT_KEY_NAME])\n    )\n}\n\nconst zoomToDataPoint = (map, d) => {\n    map.flyTo({\n        center: [\n            d[DataConstants.CENTER_LNG_KEY_NAME],\n            d[DataConstants.CENTER_LAT_KEY_NAME],\n        ],\n        zoom: POINT_ZOOM,\n        essential: true\n    })\n}\n\nconst mapRender = (map) => {\n    d3.selectAll('.circle')\n        .attr('cx', d => projectLngLatToXY(map, d).x)\n        .attr('cy', d => projectLngLatToXY(map, d).y)\n}\n\nconst getBoudingObjectForTraceList = (trace) => {\n    return DataUtils.computeLngLatBoundingBox(\n        DataUtils.generateLngLatArray(trace),\n        trace.length > 1 ? RATIO_PAD : POINT_ZOOM_MILES,\n        trace.length > 1 ? true : false,\n        trace.length > 1 ? true : false,\n    )\n}\n\nconst bringCircleWithIdToFront = (id) => {\n    setTimeout(() => {\n        d3.select('.map-svg')\n            .selectAll('use')\n            .remove()\n\n        d3.select('.map-svg')\n            .append('use')\n            .attr('xlink:href', id)\n    }, 500)\n}\n\nconst getPrevAndNextNodes = (trace, selectedNode) => {\n    const traceIndex = trace.indexOf(selectedNode)\n    const prevNode = traceIndex > 0 ? trace[traceIndex - 1] : null\n    const nextNode = traceIndex < trace.length - 1 ? trace[traceIndex + 1] : null\n    return {\n        prevNode,\n        nextNode,\n    }\n}\n\nexport {\n    initializeMap,\n    zoomMapToBoundingObject,\n    showTooltip,\n    hideTooltip,\n    resetAllCircleColors,\n    uniqueCircleId,\n    circleClass,\n    projectLngLatToXY,\n    zoomToDataPoint,\n    mapRender,\n    getBoudingObjectForTraceList,\n    bringCircleWithIdToFront,\n    getPrevAndNextNodes,\n}\n","export default __webpack_public_path__ + \"static/media/triangle.c5a97129.png\";","import * as turf from '@turf/turf'\nimport * as DataConstants from '../../utils/dataConstants'\nimport triangleImage from '../../triangle.png'\n\nconst MILES_PER_STEP = 10\nconst MIN_NUM_STEPS = 100\n\nconst convertDatumToLngLatArray = d => [\n    d[DataConstants.CENTER_LNG_KEY_NAME],\n    d[DataConstants.CENTER_LAT_KEY_NAME],\n]\n\nconst computePointId = (id) => `${id}-point`\n\nconst constructFeatureCollection = (origin, destination) => ({\n    'type': 'FeatureCollection',\n    'features': [\n        {\n            'type': 'Feature',\n            'geometry': {\n                'type': 'LineString',\n                'coordinates': [\n                    convertDatumToLngLatArray(origin),\n                    convertDatumToLngLatArray(destination),\n                ],\n            },\n        },\n    ],\n})\n\nconst arcifyFeatureCollection = (route) => {\n    // src: https://docs.mapbox.com/mapbox-gl-js/example/animate-point-along-route/\n    // Calculate the distance in kilometers between route start/end point.\n    const lineDistance = turf.length(route.features[0])\n    const numSteps = Math.max(Math.floor(lineDistance / MILES_PER_STEP), MIN_NUM_STEPS)\n\n    const arc = []\n\n    // Draw an arc between the `origin` & `destination` of the two points\n    for (var i = 0; i < lineDistance; i += lineDistance / numSteps) {\n        const segment = turf.along(route.features[0], i)\n        arc.push(segment.geometry.coordinates)\n    }\n\n    // append a final segment\n    const segment = turf.along(route.features[0], lineDistance)\n    arc.push(segment.geometry.coordinates)\n\n    // Update the route with calculated arc coordinates\n    route.features[0].geometry.coordinates = arc\n    return {\n        route,\n        numSteps,\n    }\n}\n\nconst drawArcBetweenNodes = (map, origin, destination) => {\n    const id = `${origin.hash} -> ${destination.hash}`\n    const idPoint = computePointId(id)\n\n    // if already exists, just return\n    if (map.getSource(id)) {\n        return id\n    }\n\n    const route = constructFeatureCollection(origin, destination)\n    const arcifyResult = arcifyFeatureCollection(route)\n    const routeProc = arcifyResult.route\n    const { numSteps } = arcifyResult\n\n    // set up point to animate\n    // A single point that animates along the route.\n    // Coordinates are initially set to origin.\n    const point = {\n        'type': 'FeatureCollection',\n        'features': [\n            {\n                'type': 'Feature',\n                'properties': {},\n                'geometry': {\n                    'type': 'Point',\n                    'coordinates': convertDatumToLngLatArray(origin),\n                },\n            },\n        ],\n    }\n\n    map.addSource(id, {\n        'type': 'geojson',\n        'data': routeProc\n    })\n\n    map.addLayer({\n        'id': id,\n        'source': id,\n        'type': 'line',\n        'paint': {\n            'line-width': 5,\n            'line-color': 'black'\n        },\n        'layout': {\n            'line-cap': 'round',\n            'line-join': 'round',\n        },\n    })\n\n    if (!map.hasImage('triangle')) {\n        map.loadImage(\n            triangleImage,\n            function (error, image) {\n                if (error) throw error;\n\n                // Add the image to the map style.\n                map.addImage('triangle', image)\n            }\n        )\n    }\n\n    map.addSource(idPoint, {\n        'type': 'geojson',\n        'data': point\n    })\n\n    map.addLayer({\n        'id': idPoint,\n        'source': idPoint,\n        'type': 'symbol',\n        'layout': {\n            // This icon is a part of the Mapbox Streets style.\n            // To view all images available in a Mapbox style, open\n            // the style in Mapbox Studio and click the \"Images\" tab.\n            // To add a new image to the style at runtime see\n            // https://docs.mapbox.com/mapbox-gl-js/example/add-image/\n            'icon-image': 'triangle', // works: heliport-15\n            // doesn't work: rectangle-blue-2\n            'icon-rotate': ['get', 'bearing'],\n            'icon-rotation-alignment': 'map',\n            'icon-allow-overlap': true,\n            'icon-ignore-placement': true,\n            'icon-size': .02,\n        }\n    })\n\n    let counter = 0\n\n    const animatePoint = () => {\n        var start =\n            route.features[0].geometry.coordinates[\n            counter >= numSteps ? counter - 1 : counter\n            ]\n        var end =\n            route.features[0].geometry.coordinates[\n            counter >= numSteps ? counter : counter + 1\n            ]\n        if (!start || !end) return;\n\n        // Update point geometry to a new position based on counter denoting\n        // the index to access the arc\n        point.features[0].geometry.coordinates =\n            route.features[0].geometry.coordinates[counter]\n\n        // Calculate the bearing to ensure the icon is rotated to match the route arc\n        // The bearing is calculated between the current point and the next point, except\n        // at the end of the arc, which uses the previous point and the current point\n        point.features[0].properties.bearing = turf.bearing(\n            turf.point(start),\n            turf.point(end)\n        )\n\n        // Update the source with this new data\n        const source = map.getSource(idPoint)\n        if (!source) {\n            // this has been removed - stop the animation\n            return\n        }\n\n        source.setData(point)\n\n        // Request the next frame of animation as long as the end has not been reached\n        if (counter < numSteps) {\n            setTimeout(() => requestAnimationFrame(animatePoint), 500)\n        } else {\n            counter = 0\n            setTimeout(() => requestAnimationFrame(animatePoint), 500)\n        }\n\n        counter = counter + 10\n    }\n\n    // start the animation\n    animatePoint()\n\n    return id\n}\n\nconst clearArcsForId = (map, id) => {\n    if (!id) {\n        return\n    }\n\n    map.removeLayer(id)\n    map.removeSource(id)\n\n    // also clear the associated point\n    const idPoint = computePointId(id)\n    map.removeLayer(idPoint)\n    map.removeSource(idPoint)\n}\n\nexport {\n    drawArcBetweenNodes,\n    clearArcsForId,\n}\n","import * as DataConstants from '../../utils/dataConstants'\nimport * as StringUtils from '../../utils/stringUtils'\nimport * as DataUtils from '../../utils/dataUtils'\n\nconst TooltipContents = ({ node, isSelected }) => {\n    // handle null node case\n    if (! node) {\n        return null;\n    }\n\n    console.log('rendering tooltip')\n\n    const {\n        kindness,\n        cityState,\n    } = DataUtils.formatFieldsForDisplay(node)\n\n    const kindnessClean = DataUtils.cleanDescription(kindness)\n    const kindnessTrimmed = StringUtils.trimWithElipses(kindnessClean, 140)\n\n    return (\n        <div>\n            <p><b>{kindnessTrimmed}</b></p>\n            <p><i>{cityState}</i></p>\n            <p>{! isSelected ? 'Click for more info!' : null}</p>\n        </div>\n    )\n}\n\nexport default TooltipContents\n","const trimWithElipses = (inp, length) => {\n    if (inp.length > length) {\n        return `${inp.substring(0, length)}...`\n    }\n    \n    return inp\n}\n\nexport {\n    trimWithElipses\n}","const DEFAULT = 'default'\nconst SELECTED = 'selected'\nconst SEARCHING = 'searching'\nconst TRACING = 'tracing'\nconst TRACE_STATS = 'trace-stats'\n\nexport {\n    DEFAULT,\n    SELECTED,\n    SEARCHING,\n    TRACING,\n    TRACE_STATS,\n}\n","import React, { useEffect, useRef, useState } from 'react'\nimport mapboxgl from 'mapbox-gl'\nimport * as d3 from 'd3'\nimport * as MapUtils from './mapUtils'\nimport * as LineUtils from './lineUtils'\nimport * as DataConstants from '../../utils/dataConstants'\nimport MapboxWorker from 'worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker'\nimport TooltipContents from '../tooltip'\nimport * as DataUtils from '../../utils/dataUtils'\nimport * as AppMode from '../../utils/appMode'\n\nimport '../../styles/Map.css'\n\nconst DEFAULT_RADIUS = 10\nconst BIG_RADIUS = 20\n\nmapboxgl.accessToken = 'pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ'\nmapboxgl.workerClass = MapboxWorker\n\nconst MapboxGLMap = ({ trace, setIsLoading, selectedNode, setSelectedNode, hoveredNode, setHoveredNode, mode, setTrace, resetTrace }) => {\n    const [map, setMap] = useState(null)\n    const [boundingObject, setBoundingObject] = useState(null)\n    const mapContainer = useRef(null)\n    const [prevLineId, setPrevLineId] = useState(null)\n    const [nextLineId, setNextLineId] = useState(null)\n\n    // todo refactor\n    const drawAndZoomLines = () => {\n        const {\n            prevNode,\n            nextNode,\n        } = MapUtils.getPrevAndNextNodes(trace, selectedNode)\n\n        let newPrevLineId, newNextLineId\n\n        if (prevNode) {\n            newPrevLineId = LineUtils.drawArcBetweenNodes(map, prevNode, selectedNode)\n        }\n        if (nextNode) {\n            newNextLineId = LineUtils.drawArcBetweenNodes(map, selectedNode, nextNode)\n        }\n\n        // delete any arcs that are not currently drawn\n        if (prevLineId !== newPrevLineId && prevLineId !== newNextLineId) {\n            LineUtils.clearArcsForId(map, prevLineId)\n        }\n        if (nextLineId !== newPrevLineId && nextLineId !== newNextLineId) {\n            LineUtils.clearArcsForId(map, nextLineId)\n        }\n\n        // update our ids\n        setPrevLineId(newPrevLineId)\n        setNextLineId(newNextLineId)\n\n        // update the bounding box to include current, prev and next\n        const nodes = [selectedNode]\n        if (prevNode) {\n            nodes.push(prevNode)\n        }\n        if (nextNode) {\n            nodes.push(nextNode)\n        }\n        const boundingObjectNew = MapUtils.getBoudingObjectForTraceList(nodes)\n        setBoundingObject(boundingObjectNew)\n\n        // return the prev and next for reference\n        return {\n            nodes,\n        }\n    }\n\n    const clearAllLines = () => {\n        if (!map)\n            return\n\n        // clear any previous ids\n        LineUtils.clearArcsForId(map, prevLineId)\n        LineUtils.clearArcsForId(map, nextLineId)\n\n        // clear the ids\n        setPrevLineId(null)\n        setNextLineId(null)\n    }\n\n    // let's init our map first again\n    useEffect(() => {\n        if (map === null) {\n            // need to init the map since it is null\n            MapUtils.initializeMap({ setMap, mapContainer })\n        } else {\n            // also append an svg to the map for later use\n            // TODO put this in css\n            var container = map.getCanvasContainer()\n            d3.select(container)\n                .append('svg')\n                .attr('class', 'map-svg')\n                .attr('width', '100%')\n                .attr('height', '100%')\n                .style('position', 'absolute')\n                .style('z-index', 2)\n                .style('top', 0)\n                .style('left', 0)\n\n            // also set up map events for re-render\n            map.on('viewreset', () => MapUtils.mapRender(map))\n            map.on('move', () => MapUtils.mapRender(map))\n            map.on('moveend', () => MapUtils.mapRender(map))\n        }\n    }, [map])\n\n    // here is where we do our data join for trace points\n    useEffect(() => {\n        if (map && trace) {\n            // do a data join on all the trace points with d3\n            d3.select('.map-svg')\n                .selectAll('circle')\n                .data(trace, d => d.hash)\n                .join(\n                    enter => enter\n                        .append('circle')\n                        .attr('id', MapUtils.uniqueCircleId)\n                        .attr('class', MapUtils.circleClass)\n                        .attr('r', DEFAULT_RADIUS)\n                        .style('fill', 'steelblue')\n                        .style('opacity', d => {\n                            if (selectedNode && DataUtils.nodesAreEqual(d, selectedNode)) {\n                                return 1\n                            } else if (selectedNode && !DataUtils.nodesAreEqual(d, selectedNode)) {\n                                return 0.5\n                            } else {\n                                return 1\n                            }\n                        })\n                        .on('click', (e, d) => setSelectedNode(d))\n                        .on('mouseover', (e, d) => {\n                            setHoveredNode(d)\n                            MapUtils.showTooltip(e, d)\n                        })\n                        .on('mouseout', (e, d) => {\n                            MapUtils.hideTooltip(() => setHoveredNode(null))\n                        }),\n                    update => update\n                        .on('click', (e, d) => setSelectedNode(d)),\n                    exit => exit.remove()\n                )\n\n            // perform initial render\n            MapUtils.mapRender(map)\n\n            // also complete loading\n            setIsLoading(false)\n\n            // update bounding box with the initial view\n            const boundingObjectNew = MapUtils.getBoudingObjectForTraceList(trace)\n            setBoundingObject(boundingObjectNew)\n        }\n    }, [map, trace, mode])\n\n    // THE PURPOSE OF THIS EFFECT IS TO ZOOM ON THE MAP\n    // WE RE-ZOOM WHEN:\n    // 1. BOUNDING BOX CHANGES\n    // 2. SELECTED NODE BECOMES NULL \n    // listen for changes in the bounding box\n    useEffect(() => {\n        if (map && boundingObject) {\n            MapUtils.zoomMapToBoundingObject(map, boundingObject)\n\n            // always clear the tooltip and hovered node in this case\n            setTimeout(() => MapUtils.hideTooltip(() => setHoveredNode(null)), 500)\n        }\n    }, [map, boundingObject])\n\n    // listen for changes in the selected node\n    // IF GENERAL NON TRACE MODE\n    //     IF SELECTED NODE NON NULL, ZOOM TO IT AND MAKE IT RED\n    //     ELSE, RESET TO ALL POINTS AND MAKE ALL POINTS BLUE\n    // IF TRACE MODE\n    //     MAKE IT GREEN, ALL OTHERS PURPLE\n    useEffect(() => {\n        if (mode === AppMode.SELECTED && selectedNode) {\n            // handle colors\n            // make other circles not red, and less opaque\n            MapUtils.resetAllCircleColors()\n                .style('opacity', 0.5)\n\n            // make this circle red and dark\n            const id = `#${MapUtils.uniqueCircleId(selectedNode)}`\n            d3.select(id)\n                .transition()\n                .duration(500)\n                .style('fill', 'red')\n                .style('opacity', 1)\n                .attr('r', DEFAULT_RADIUS)\n\n            // draw it over all other circles\n            MapUtils.bringCircleWithIdToFront(id)\n\n            // update bounding box\n            const boundingObjectNew = MapUtils.getBoudingObjectForTraceList([selectedNode])\n            setBoundingObject(boundingObjectNew)\n        } else if ((mode === AppMode.DEFAULT || mode === AppMode.SEARCHING || mode === AppMode.TRACE_STATS) && trace) {\n            // reset the bounding box to original trace points\n            const boundingObjectNew = MapUtils.getBoudingObjectForTraceList(trace)\n            setBoundingObject(boundingObjectNew)\n\n            // also clear the color\n            MapUtils.resetAllCircleColors()\n                .attr('r', DEFAULT_RADIUS)\n        } else if (mode === AppMode.TRACING) {\n            // if we have selected the root node, we need to be sure to zoom to original trace\n            if (selectedNode[DataConstants.ID_KEY_NAME] === DataConstants.ROOT_ACT_ID) {\n                const boundingObjectNew = MapUtils.getBoudingObjectForTraceList(trace)\n                setBoundingObject(boundingObjectNew)\n            }\n\n            // set up our lines\n            const {\n                nodes,\n            } = drawAndZoomLines()\n\n            // update circle colors\n            d3.selectAll('.circle')\n                .filter(d => nodes.indexOf(d) === -1)\n                .transition()\n                .duration(500)\n                .style('fill', 'purple')\n                .style('opacity', 0)\n                .attr('r', DEFAULT_RADIUS)\n\n            d3.selectAll('.circle')\n                .filter(d => (nodes.indexOf(d) > -1 && d.hash !== selectedNode.hash))\n                .transition()\n                .duration(500)\n                .style('fill', 'purple')\n                .style('opacity', 1)\n                .attr('r', DEFAULT_RADIUS)\n\n            // make the selected node bigger and green\n            const id = `#${MapUtils.uniqueCircleId(selectedNode)}`\n\n            d3.select(id)\n                .transition()\n                .duration(500)\n                .style('fill', 'green')\n                .attr('r', BIG_RADIUS) // TODO add this back if we want\n                .style('opacity', 1)\n\n            // draw it over all other circles\n            MapUtils.bringCircleWithIdToFront(id)\n\n        }\n    }, [mode, selectedNode, trace])\n\n    // listen for changes in the mode state\n    // re-filter the trace list as needed\n    useEffect(() => {\n        if (mode === AppMode.TRACING) {\n            // filter on the current node\n            const traceNew = DataUtils.filterTraceListForNode(trace, selectedNode)\n            setTrace(traceNew)\n            return\n        }\n\n        // non-trace mode - clear all lines\n        clearAllLines()\n\n        if (mode === AppMode.DEFAULT) {\n            // reset trace back to original data array\n            resetTrace()\n        } else if (mode === AppMode.SEARCHING) {\n            // do nothing, this should be handled by the search bar\n        } else if (mode === AppMode.SELECTED) {\n            // reset trace back to original data array\n            resetTrace()\n        } else if (mode === AppMode.TRACE_STATS) {\n            // do nothing\n        }\n    }, [mode])\n\n    return <div ref={el => (mapContainer.current = el)} className='map-container-div'>\n        {\n            mode !== AppMode.TRACING ? (\n                <div className='map-tooltip' style={{ 'opacity': 0 }}>\n                    <TooltipContents node={hoveredNode} isSelected={DataUtils.nodesAreEqual(hoveredNode, selectedNode)} />\n                </div>\n            ) : null\n        }\n    </div>\n}\n\nexport default MapboxGLMap\n","import * as DataUtils from '../../utils/dataUtils'\n\nconst KindnessCard = ({ node }) => {\n    console.log('rendering card')\n    // handle null node case\n    if (! node) {\n        return null;\n    }\n\n    const {\n        kindness,\n        dateString,\n        location,\n    } = DataUtils.formatFieldsForDisplay(node)\n\n    const kindnessClean = DataUtils.cleanDescription(kindness)\n\n    return (\n        <div className=\"kindness-card-inner\">\n            <p>Act of Kindness:</p>\n            <div className=\"kindness-card-description\">\n                <p><b>{kindnessClean || 'No kindness description provided!'}</b></p>\n            </div>\n            <p>Location:</p>\n            <p><b>{location}</b></p>\n            <p>Date & Time:</p>\n            <p><b>{dateString}</b></p>\n        </div>\n    )\n}\n\nexport default KindnessCard","import '../../styles/Loading.css'\n\nconst LoadingSpinner = () => {\n    console.log('rendering loading')\n    return (\n        <div className=\"loading-wrapper\">\n            <div className=\"la-ball-clip-rotate la-2x\">\n                <div></div>\n            </div>\n            <p>Loading...</p>\n        </div>\n    )\n}\n\nexport default LoadingSpinner\n","import MouseIcon from '@material-ui/icons/Mouse'\nimport ExploreIcon from '@material-ui/icons/Explore'\nimport ToggleOffIcon from '@material-ui/icons/ToggleOff'\nimport SearchIcon from '@material-ui/icons/Search'\n\n/*\n    Simple component to render some useful info when no node is selected.\n*/\nconst SidebarInfoCard = () => {\n    console.log('rendering side info card')\n    return (\n        <div>\n            <hr className=\"sidebar-divider\" />\n            <div className=\"sidebar-info-row\">\n                <div className=\"sidebar-info-left\">\n                    <MouseIcon fontSize=\"large\" />\n                </div>\n                <div className=\"sidebar-info-right\">\n                    <p><b>Click</b> a circle to explore that act of kindness further!</p>\n                </div>\n            </div>\n            <div className=\"sidebar-info-row\">\n                <div className=\"sidebar-info-left\">\n                    <ExploreIcon fontSize=\"large\" />\n                </div>\n                <div className=\"sidebar-info-right\">\n                    <p>Then, you can <b>trace</b> that act of kindness to see how may people have paid it forward.</p>\n                </div>\n            </div>\n            <div className=\"sidebar-info-row sidebar-info-row-toggle\">\n                <div className=\"sidebar-info-left\">\n                    <ToggleOffIcon fontSize=\"large\" />\n                </div>\n                <div className=\"sidebar-info-right\">\n                    <p>Switch between <b>real-time</b> and <b>generated</b> data using the toggle below.</p>\n                </div>\n            </div>\n            <div className=\"sidebar-info-row sidebar-info-row-search\">\n                <div className=\"sidebar-info-left\">\n                    <SearchIcon fontSize=\"large\" />\n                </div>\n                <div className=\"sidebar-info-right\">\n                    <p><b>Search</b> for acts of kindness by description, location, or ID.</p>\n                </div>\n            </div>\n        </div >\n    )\n}\n\n// Search for acts of kindness by description, location, or ID\n\nexport default SidebarInfoCard","import KindnessCard from './kindnessCard'\nimport { Button } from '@material-ui/core'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward'\n\nconst TraceStepper = ({ exitTraceMode, trace, selectedNode, setSelectedNode }) => {\n    console.log('rendering trace')\n\n    // find the trace index\n    const traceIndex = trace.indexOf(selectedNode)\n\n    const n = trace.length\n\n    return (\n        <div className=\"trace-stepper-wrapper\">\n            <div className=\"trace-stepper-button-horizontal\">\n                <Button\n                    className=\"trace-stepper-button\"\n                    variant=\"contained\"\n                    color=\"primary\"\n                    disabled={traceIndex === 0}\n                    onClick={() => setSelectedNode(trace[0])}\n                >\n                    First\n                </Button>\n                <Button\n                    className=\"trace-stepper-button\"\n                    variant=\"contained\"\n                    color=\"primary\"\n                    disabled={traceIndex === 0}\n                    onClick={() => setSelectedNode(trace[traceIndex - 1])}\n                >\n                    <ArrowBackIcon />\n                </Button>\n                <Button\n                    className=\"trace-stepper-button\"\n                    variant=\"contained\"\n                    color=\"primary\"\n                    disabled={traceIndex === n - 1}\n                    onClick={() => setSelectedNode(trace[traceIndex + 1])}\n                >\n                    <ArrowForwardIcon />\n                </Button>\n                <Button\n                    className=\"trace-stepper-button\"\n                    variant=\"contained\"\n                    color=\"primary\"\n                    disabled={traceIndex === n - 1}\n                    onClick={() => setSelectedNode(trace[n - 1])}\n                >\n                    Last\n                </Button>\n            </div>\n            <p>{`${traceIndex + 1} / ${trace.length}`}</p>\n            <KindnessCard node={selectedNode} />\n        </div>\n    )\n}\n\nexport default TraceStepper\n","import FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\nimport * as DataConstants from '../..//utils/dataConstants'\n\nconst DataToggle = ({ dataUrl, setDataUrl }) => {\n    const checked = dataUrl === DataConstants.REAL_DATA_URL\n\n    const handleChange = (event) => {\n        const eventChecked = event.target.checked\n        const dataUrlNew = eventChecked ? DataConstants.REAL_DATA_URL : DataConstants.SPOOF_DATA_URL\n        setDataUrl(dataUrlNew)\n    }\n\n    const label = dataUrl === DataConstants.REAL_DATA_URL ? 'Viewing Real Data' : 'Viewing Fake Data'\n    \n    return (\n        <FormControlLabel\n            control={\n                <Switch\n                    checked={checked}\n                    onChange={handleChange}\n                    // value={'checked'}\n                    color='primary'\n                />\n            }\n            labelPlacement='top'\n            label={label}\n        />\n    )\n}\n\nexport default DataToggle","import * as turf from '@turf/turf'\nimport * as DataUtils from '../../utils/dataUtils'\n\nconst TraceStatistics = ({ trace }) => {\n    console.log('rendering trace stats')\n\n    const traceCount = trace.length\n    \n    // compute total distance travelled in miles\n    const lngLat = DataUtils.generateLngLatArray(trace)\n    let distance = 0\n    for (let i = 0; i < trace.length - 1; i++) {\n        distance += turf.distance(\n            turf.point([lngLat[i].lng, lngLat[i].lat]),\n            turf.point([lngLat[i + 1].lng, lngLat[i + 1].lat]),\n            {\n                'units': 'miles'\n            },\n        )\n    }\n\n    // compute total time between first and last act\n    const firstDate = trace[0].dateTime\n    const lastDate = trace[trace.length - 1].dateTime\n    const diffDays = lastDate.diff(firstDate, 'days')\n    const { days } = diffDays.toObject()\n\n    return (\n        <div className=\"trace-statistics-inner\">\n            <div className=\"sidebar-clear-div\">\n                <h1>{traceCount}</h1>\n                <p>acts of kindness in this trace 😊</p>\n                <br></br>\n                <h1>{distance.toFixed(1)}</h1>\n                <p>total miles travelled 🌍</p>\n                <br></br>\n                <h1>{days.toFixed(1)}</h1>\n                <p>days between first & last act 📅 </p>\n            </div>\n        </div>\n    )\n}\n\nexport default TraceStatistics","import React from 'react'\nimport { Button } from '@material-ui/core'\nimport '../../styles/Sidebar.css'\nimport KindnessCard from './kindnessCard'\nimport LoadingSpinner from './loadingSpinner'\nimport SidebarInfoCard from './infoCard'\nimport TraceStepper from './traceStepper'\nimport DataToggle from './dataToggle'\nimport TraceStatistics from './traceStatistics'\nimport * as DataUtils from '../../utils/dataUtils'\nimport * as AppMode from '../../utils/appMode'\n\nconst Sidebar = ({ isLoading, selectedNode, setSelectedNode, clearSelectedNode, mode, setMode, trace, dataUrl, setDataUrl, filterText }) => {\n    console.log('rendering sidebar')\n\n    // get a trace count\n    let traceCount = 0\n    if (selectedNode) {\n        const traceFilterList = DataUtils.filterTraceListForNode(trace, selectedNode)\n        traceCount = traceFilterList.length - 1\n    }\n    return (\n        <div className=\"sidebar-flex\">\n            <h1>😊 Kindness Tracker</h1>\n            {\n                isLoading ? <LoadingSpinner /> : null\n            }\n            {\n                !isLoading && mode === AppMode.DEFAULT ? <SidebarInfoCard /> : null\n            }\n            {\n                mode === AppMode.SELECTED ? (\n                    <div className=\"sidebar-clear-div\">\n                        <Button variant=\"contained\" style={{ backgroundColor: 'red', color: 'white' }} className=\"sidebar-button-below\" onClick={clearSelectedNode}>Clear Selection</Button>\n                        <Button variant=\"contained\" style={{ backgroundColor: 'green', color: 'white' }} className=\"sidebar-button-below\" onClick={() => setMode(AppMode.TRACING)}>Trace this Act!</Button>\n                        <h1>{traceCount}</h1>\n                        <p>{traceCount > 1 ? 'acts' : 'act'} of kindness {traceCount > 1 ? 'are' : 'is'} connected</p>\n                    </div>\n                ) : null\n            }\n            { mode === AppMode.SELECTED ? (\n                <div className=\"selected-card-wrapper\">\n                    <KindnessCard node={selectedNode} />\n                </div>\n            ) : null\n            }\n            {\n                mode === AppMode.TRACING ? (\n                    <div className=\"trace-stepper-button-exit\">\n                        <Button variant=\"contained\" style={{ backgroundColor: 'red', color: 'white' }} onClick={() => setMode(AppMode.SELECTED)}>\n                            Exit Trace Mode\n                        </Button>\n                    </div>\n                ) : null\n            }\n            {\n                mode === AppMode.TRACE_STATS ? (\n                    <div className=\"trace-stepper-button-exit\">\n                        <Button variant=\"contained\" style={{ backgroundColor: 'red', color: 'white' }} onClick={() => setMode(AppMode.TRACING)}>\n                            Back to Trace Mode\n                        </Button>\n                    </div>\n                ) : null\n            }\n            {\n                mode === AppMode.TRACING ? (\n                    <div>\n                        <TraceStepper\n                            exitTraceMode={() => setMode(AppMode.SELECTED)}\n                            trace={trace}\n                            selectedNode={selectedNode}\n                            setSelectedNode={setSelectedNode}\n                        />\n                        <Button variant=\"contained\" style={{ backgroundColor: 'green', color: 'white' }} className=\"sidebar-button-above\" onClick={() => setMode(AppMode.TRACE_STATS)}>View Trace Statistics</Button>\n                    </div>\n                ) : null\n            }\n            {\n                mode === AppMode.TRACE_STATS ? (\n                    <TraceStatistics trace={trace} />\n                ) : null\n            }\n            {\n                mode === AppMode.SEARCHING && trace.length > 0 ? (\n                    <div className=\"sidebar-clear-div\">\n                        <h1>{trace.length}</h1>\n                        <p>{trace.length > 1 ? 'acts' : 'act'} found for search query \"{filterText}\".</p>\n                        <p>Press Esc to clear.</p>\n                    </div>\n                ) : null\n            }\n            <div className=\"sidebar-bottom-content\">\n                <div className=\"data-toggle-outer\">\n                    <DataToggle\n                        dataUrl={dataUrl}\n                        setDataUrl={setDataUrl}\n                    />\n                </div>\n                <p className=\"sidebar-small-text\">Christian Moroney, Jackson Bernatchez, Kevin Lyons</p>\n                <p className=\"sidebar-small-text\">6.859 Final Project Spring 2021</p>\n                <div>\n                    <a href=\"https://github.com/6859-sp21/final-project-kindness-tracker\" target=\"_blank\">\n                        <img className=\"sidebar-git-image\" src=\"https://image.flaticon.com/icons/png/512/25/25231.png\"></img>\n                    </a>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Sidebar\n","import React, { useEffect, useState } from 'react'\nimport SearchBar from 'material-ui-search-bar'\n\nconst KindnessSearchBar = ({ filterNodes, filterText, setFilterText }) => {\n    return (\n        <SearchBar\n          value={filterText || ''}\n          onChange={setFilterText}\n          cancelOnEscape={true}\n          onRequestSearch={() => filterNodes(filterText)}\n          onCancelSearch={() => { setFilterText(null); filterNodes(null) }}\n          placeholder={'Search for acts of kindness by description, location, or ID. Press Enter to search. ⏎'}\n        />\n      );\n}\n\nexport default KindnessSearchBar","export default __webpack_public_path__ + \"static/media/kindness_card_image.c3ba2bc2.png\";","import React from 'react'\nimport { withStyles } from '@material-ui/core/styles'\nimport Button from '@material-ui/core/Button'\nimport Dialog from '@material-ui/core/Dialog'\nimport MuiDialogTitle from '@material-ui/core/DialogTitle'\nimport MuiDialogContent from '@material-ui/core/DialogContent'\nimport MuiDialogActions from '@material-ui/core/DialogActions'\nimport IconButton from '@material-ui/core/IconButton'\nimport CloseIcon from '@material-ui/icons/Close'\nimport Typography from '@material-ui/core/Typography'\nimport kindnessCardImage from '../../kindness_card_image.png'\n\nimport '../../styles/Dialog.css'\n\nconst styles = (theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(2),\n  },\n  closeButton: {\n    position: 'absolute',\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500],\n  },\n})\n\nconst DialogTitle = withStyles(styles)((props) => {\n  const { children, classes, onClose, ...other } = props\n  return (\n    <MuiDialogTitle disableTypography className={classes.root} {...other}>\n      <Typography variant=\"h6\">{children}</Typography>\n      {onClose ? (\n        <IconButton aria-label=\"close\" className={classes.closeButton} onClick={onClose}>\n          <CloseIcon />\n        </IconButton>\n      ) : null}\n    </MuiDialogTitle>\n  )\n})\n\nconst DialogContent = withStyles((theme) => ({\n  root: {\n    padding: theme.spacing(2),\n  },\n}))(MuiDialogContent)\n\nconst DialogActions = withStyles((theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(1),\n  },\n}))(MuiDialogActions)\n\nconst HelpDialog = ({ open, setOpen }) => {\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  return (\n    <div>\n      <Dialog onClose={handleClose} aria-labelledby=\"customized-dialog-title\" open={open}>\n        <DialogTitle id=\"customized-dialog-title\" onClose={handleClose}>\n          FAQs\n        </DialogTitle>\n        <DialogContent dividers>\n          <Typography gutterBottom variant=\"h6\">\n            <b>😊 What is Kindness Tracker?</b>\n          </Typography>\n          <Typography gutterBottom>\n            The purpose of this app is to track the spread of acts of kindness and encourage people to pay it forward!\n          </Typography>\n          <Typography gutterBottom variant=\"h6\">\n            <b>🤔 How does it work?</b>\n          </Typography>\n          <Typography gutterBottom>\n            We handed out kindness cards and encouraged people to pay it forward. When you do something nice for someone, you should give\n            them a card. They fill out out a Google form to tell us what happened. Then, the process repeats!\n            <img src={kindnessCardImage} className=\"kindness-card-image\" />\n          </Typography>\n          <Typography gutterBottom variant=\"h6\">\n            <b>↔️ What does it mean to \"trace\" an act of kindness?</b>\n          </Typography>\n          <Typography gutterBottom>\n            We mean that you are <b>tracing</b> the path this act of kindness has travelled as people pay it forward! The ID number on\n            each kindness card allows us to link one act of kindness to another. The \"trace\" of a particular act of kindness is just the\n            path of acts it lives on, with each act having the same ID number!\n          </Typography>\n          <Typography gutterBottom variant=\"h6\">\n            <b>🙋🏽‍♀️ I want to participate!</b>\n          </Typography>\n          <Typography gutterBottom>\n            Stay tuned for more information on how you can get involved!\n          </Typography>\n          <Typography gutterBottom variant=\"h6\">\n            <b>⚠️ Where did you get the fake data from?</b>\n          </Typography>\n          <Typography gutterBottom>\n            We just wrote a quick script to generate fake acts of kindness all over the United States, most of which are in Massachusetts.\n            This data is just a placeholder while the app rolls out and more acts happen in the real world.\n          </Typography>\n        </DialogContent>\n      </Dialog>\n    </div>\n  )\n}\n\nexport default HelpDialog\n","import React, { useEffect, useState } from 'react'\nimport Tabletop from 'tabletop'\nimport { Sidebar, KindnessSearchBar, MapboxGLMap, HelpDialog } from './components'\nimport mapboxgl from 'mapbox-gl/dist/mapbox-gl-csp'\nimport MapboxWorker from 'worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker'\nimport TrieSearch from 'trie-search'\nimport * as DataConstants from './utils/dataConstants'\nimport * as DataUtils from './utils/dataUtils'\nimport * as AppMode from './utils/appMode'\nimport { Button } from '@material-ui/core'\nimport HelpIcon from '@material-ui/icons/Help'\n\nconst MAPBOX_ACCESS_TOKEN = 'pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ'\nmapboxgl.workerClass = MapboxWorker\nmapboxgl.accessToken = MAPBOX_ACCESS_TOKEN\n\nimport './styles/App.css'\n\nconst App = () => {\n  const [data, setData] = useState(null)\n  const [trace, setTrace] = useState(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const [selectedNode, setSelectedNode] = useState(null)\n  const [hoveredNode, setHoveredNode] = useState(null)\n  const [dataUrl, setDataUrl] = useState(DataConstants.REAL_DATA_URL)\n  const [trie, setTrie] = useState(null)\n  const [filterText, setFilterText] = useState(null)\n  const [mode, setMode] = useState(AppMode.DEFAULT)\n  const [openDialog, setOpenDialog] = useState(false)\n\n  useEffect(() => {\n    // on first render, check the width\n    // if less than 800, provide alert about screen size\n    if (window.innerWidth < 800) {\n      alert('We see you\\'re on mobile! Rotate your phone sideways for the best experience. Check out our app on your computer too!')\n    }\n  }, [])\n\n  const fetchData = () => {\n    Tabletop.init({\n      key: dataUrl,\n      simpleSheet: true,\n    })\n      .then(data => {\n        // process data right away\n        const dataProc = DataUtils.processRawSheetsData(data)\n        setData(dataProc)\n        setTrace(dataProc)\n\n        // set up our search object\n        const ts = new TrieSearch([\n          DataConstants.ID_KEY_NAME,\n          DataConstants.KINDNESS_KEY_NAME,\n          DataConstants.STREET_KEY_NAME,\n          DataConstants.CITY_KEY_NAME,\n          DataConstants.STATE_KEY_NAME,\n          DataConstants.ZIP_KEY_NAME,\n        ], {\n          idFieldOrFunction: 'index',\n        })\n        ts.addAll(dataProc)\n        setTrie(ts)\n      })\n      .catch(console.warn)\n  }\n\n  useEffect(() => {\n    if (data === null) {\n      fetchData()\n    }\n  }, [data])\n\n  // listen for changes in the data url via a toggle\n  useEffect(() => {\n    if (data !== null) {\n      // reset all required state before re-fetch\n      setIsLoading(true)\n      setSelectedNode(null)\n      setFilterText(null)\n      setHoveredNode(null)\n      setMode(AppMode.DEFAULT)\n      fetchData()\n    }\n  }, [dataUrl])\n\n  // define function to set trace back to original data array\n  const resetTrace = () => setTrace(data)\n\n  // function to clear selected node\n  const clearSelectedNode = () => {\n    setSelectedNode(null)\n    setMode(AppMode.DEFAULT)\n    setFilterText(null)\n  }\n\n  // define function to filter nodes based on a query string\n  const filterNodes = (text) => {\n    // update state\n    setIsLoading(true)\n\n    // handle no filter\n    if (!text) {\n      // reset to all data\n      setTrace(data)\n      setIsLoading(false)\n      setMode(AppMode.DEFAULT)\n      return\n    }\n\n    // TrieSearch.UNION_REDUCER gives us an AND over the text\n    const dataFiltSearch = trie.get(text.split(' '), TrieSearch.UNION_REDUCER)\n\n    // handle empty data case\n    if (dataFiltSearch.length === 0) {\n      // TODO clean this up\n      alert('No results found! Try another search query.')\n      setIsLoading(false)\n      setMode(AppMode.DEFAULT)\n      return\n    }\n\n    setSelectedNode(null)\n    setHoveredNode(null)\n    setMode(AppMode.SEARCHING)\n    setTrace(dataFiltSearch)\n  }\n\n  const handleSetSelectedNode = (node) => {\n    // if we are in a trace-like mode, don't change mode\n    if (mode === AppMode.TRACING || mode === AppMode.TRACE_STATS) {\n      // do nothing\n    } else {\n      // change to selection mode\n      setMode(AppMode.SELECTED)\n\n      // reset the trace\n      resetTrace()\n    }\n\n    // update the selected node as normal\n    setSelectedNode(node)\n  }\n\n  const handleSetFilterText = (text) => {\n    // get out of search mode and go back to default\n    setMode(AppMode.DEFAULT)\n\n    // still update our filter text so we have it\n    setFilterText(text)\n  }\n\n  return (\n    <div className=\"App\">\n      <div className=\"horizontal-stack\">\n        <div className=\"left-sidebar\">\n          <Sidebar\n            isLoading={isLoading}\n            selectedNode={selectedNode}\n            setSelectedNode={setSelectedNode}\n            clearSelectedNode={clearSelectedNode}\n            mode={mode}\n            setMode={setMode}\n            trace={trace}\n            dataUrl={dataUrl}\n            setDataUrl={setDataUrl}\n            filterText={filterText}\n          />\n        </div>\n        <div className=\"vertical-stack\">\n          <div className=\"top-bar-wrapper\">\n            <div className=\"search-bar-wrapper\">\n              {\n                mode === AppMode.DEFAULT || mode === AppMode.SEARCHING ? (\n                  <KindnessSearchBar\n                    filterText={filterText}\n                    setFilterText={handleSetFilterText}\n                    filterNodes={filterNodes}\n                  />\n                ) : null\n              }\n            </div>\n            <div className=\"icon-wrapper\">\n              <Button onClick={() => setOpenDialog(true)}>\n                <HelpIcon\n                  fontSize=\"large\"\n                />\n              </Button>\n            </div>\n          </div>\n\n          <div className=\"map-wrapper\">\n            <MapboxGLMap\n              trace={trace}\n              setIsLoading={setIsLoading}\n              selectedNode={selectedNode}\n              setSelectedNode={handleSetSelectedNode}\n              hoveredNode={hoveredNode}\n              setHoveredNode={setHoveredNode}\n              mode={mode}\n              setTrace={setTrace}\n              resetTrace={resetTrace}\n            />\n          </div>\n        </div>\n      </div>\n      <HelpDialog open={openDialog} setOpen={setOpenDialog} />\n    </div>\n  );\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}