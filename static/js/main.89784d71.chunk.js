(this["webpackJsonpkindness-tracker"]=this["webpackJsonpkindness-tracker"]||[]).push([[0],{293:function(e,t,n){},323:function(e,t,n){},324:function(e,t,n){},325:function(e,t,n){},359:function(e,t,n){},365:function(e,t,n){},366:function(e,t,n){},367:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(17),s=n.n(c),i=(n(293),n(10)),o=n(29),l=n(14),d=n(167),j=n.n(d),u=n(48),h=n.n(u),b=n(11),p="https://docs.google.com/spreadsheets/d/1IqEBIcnFZ_BFCrD8jhk11yVoOjfxzZpiZLdL4cL3oK0/pubhtml",f="What is the ID Number on your kindness card? (We need this to track the spread of kindness!)",m="street_name",O="admin_level_3",x="admin_level_1",g="zip_code",v="Tell us about the act of kindness you gave/received!",y="center_lng",k="center_lat",w=n(19),N=n(50),S=n(51),T=n(169),C=n.n(T),M=n(30),D="lng",_="lat",I=new C.a,F=function(e){var t=y,n=k,r=function(e){return"".concat(e[t]," ").concat(e[n])},a=e.map(r).reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{});return e.map((function(e){if(1===a[r(e)])return e;var c=L(e[t],e[n]),s=c.lng,i=c.lat;return e[t]=s,e[n]=i,e}))},L=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=n/69,a=function(){return Math.random()*(2*r)-r};return{lng:e+a(),lat:t+a()}},z=function(e,t){return!(!e||!t)&&e.index==t.index},B=function(e,t){var n=t[f];return E(e,n)},E=function(e,t){var n;return n=0===t?e:e.filter((function(e){return e[f]===t||0===e[f]})),R(n)},A=function(e){var t=e.street_number,n=e.street_name,r=t&&n?"".concat(t?"".concat(t," "):null).concat(n):null,a=e.admin_level_3,c=e.admin_level_1,s=a||c?"".concat(a).concat(a?", ".concat(c):c):null,i=e.zip_code,o="".concat(r||"No street address provided","\n").concat(s||"No city/state provided").concat(i?"\n".concat(i):"");return{kindness:e[v],dateString:e.dateTime.toLocaleString(S.DateTime.DATETIME_SHORT),location:o,cityState:s}},J=function(e){return e.map((function(e){return{lng:e.center_lng,lat:e.center_lat}}))},K=function(e){return I.clean(e)},P=function(e){for(var t=J(e),n=0,r=0;r<t.length-1;r++)n+=M.distance(M.point([t[r].lng,t[r].lat]),M.point([t[r+1].lng,t[r+1].lat]),{units:"miles"});return n},R=function(e){return e.sort((function(e,t){return e.dateTime.toMillis()-t.dateTime.toMillis()}))},V=function(e){b.f(".map-tooltip").transition().duration(500).style("opacity",0).on("end",e)},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"steelblue";return b.g(".circle").transition().duration(500).style("fill",e).style("opacity",1)},q=function(e){return"circle-".concat(e.index)},Y=function(e){return"circle circle-".concat(e[f])},U=function(e,t){return e.project(new h.a.LngLat(t.center_lng,t.center_lat))},G=function(e){b.g(".circle").attr("cx",(function(t){return U(e,t).x})).attr("cy",(function(t){return U(e,t).y}))},H=function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0,a=0;n||(r=t/69),a=r;var c=arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?1:5,s=function(t){return e.map((function(e){return e[t]}))},i=Math.max.apply(Math,Object(w.a)(s(D))),o=Math.min.apply(Math,Object(w.a)(s(D))),l=Math.max.apply(Math,Object(w.a)(s(_))),d=Math.min.apply(Math,Object(w.a)(s(_)));return n&&(r=(i-o)*t,a=12*t*(l-d)),{topRight:{lng:i+r,lat:d+a},bottomLeft:{lng:o-r*c,lat:l-a}}}(J(e),e.length>1?.1:1,e.length>1,e.length>1)},Z=function(e){setTimeout((function(){b.f(".map-svg").selectAll("use").remove(),b.f(".map-svg").append("use").attr("xlink:href",e)}),500)},Q=n.p+"static/media/triangle.c5a97129.png",X=function(e){return[e.center_lng,e.center_lat]},$=function(e){return"".concat(e,"-point")},ee=function(e,t,n){var r="".concat(t.hash," -> ").concat(n.hash),a=$(r);if(e.getSource(r))return r;var c=function(e,t){return{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",coordinates:[X(e),X(t)]}}]}}(t,n),s=function(e){for(var t=M.length(e.features[0]),n=Math.max(Math.floor(t/10),100),r=[],a=0;a<t;a+=t/n){var c=M.along(e.features[0],a);r.push(c.geometry.coordinates)}var s=M.along(e.features[0],t);return r.push(s.geometry.coordinates),e.features[0].geometry.coordinates=r,{route:e,numSteps:n}}(c),i=s.route,o=s.numSteps,l={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:X(t)}}]};e.addSource(r,{type:"geojson",data:i}),e.addLayer({id:r,source:r,type:"line",paint:{"line-width":5,"line-color":"black"},layout:{"line-cap":"round","line-join":"round"}}),e.hasImage("triangle")||e.loadImage(Q,(function(t,n){if(t)throw t;e.addImage("triangle",n)})),e.addSource(a,{type:"geojson",data:l}),e.addLayer({id:a,source:a,type:"symbol",layout:{"icon-image":"triangle","icon-rotate":["get","bearing"],"icon-rotation-alignment":"map","icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-size":.02}});var d=0;return function t(){var n=c.features[0].geometry.coordinates[d>=o?d-1:d],r=c.features[0].geometry.coordinates[d>=o?d:d+1];if(n&&r){l.features[0].geometry.coordinates=c.features[0].geometry.coordinates[d],l.features[0].properties.bearing=M.bearing(M.point(n),M.point(r));var s=e.getSource(a);s&&(s.setData(l),d<o||(d=0),setTimeout((function(){return requestAnimationFrame(t)}),500),d+=10)}}(),r},te=function(e,t){if(t){e.removeLayer(t),e.removeSource(t);var n=$(t);e.removeLayer(n),e.removeSource(n)}},ne=n(77),re=n(1),ae=function(e){var t=e.node,n=e.isSelected;if(!t)return null;var r,a,c=A(t),s=c.kindness,i=c.cityState,o=K(s),l=(a=140,(r=o).length>a?"".concat(r.substring(0,a),"..."):r);return Object(re.jsxs)("div",{children:[Object(re.jsx)("p",{children:Object(re.jsx)("b",{children:l})}),Object(re.jsx)("p",{children:Object(re.jsx)("i",{children:i})}),Object(re.jsx)("p",{children:n?null:"Click for more info!"})]})},ce="default",se="selected",ie="searching",oe="tracing",le="trace-stats";n(323);h.a.accessToken="pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ",h.a.workerClass=ne.a;var de=function(e){var t=e.trace,n=e.setIsLoading,a=e.selectedNode,c=e.setSelectedNode,s=e.hoveredNode,o=e.setHoveredNode,l=e.mode,d=e.setTrace,j=e.resetTrace,u=e.setTraceFilterId,p=Object(r.useState)(null),m=Object(i.a)(p,2),O=m[0],x=m[1],g=Object(r.useState)(null),v=Object(i.a)(g,2),y=v[0],k=v[1],w=Object(r.useRef)(null),N=Object(r.useState)(null),S=Object(i.a)(N,2),T=S[0],C=S[1],M=Object(r.useState)(null),D=Object(i.a)(M,2),_=D[0],I=D[1];return Object(r.useEffect)((function(){if(null===O)!function(e){var t=e.setMap,n=e.mapContainer,r=new h.a.Map({container:n.current,style:"mapbox://styles/mapbox/light-v10",center:[-100,40],zoom:3});r.on("load",(function(){t(r)}))}({setMap:x,mapContainer:w});else{var e=O.getCanvasContainer();b.f(e).append("svg").attr("class","map-svg").attr("width","100%").attr("height","100%").style("position","absolute").style("z-index",2).style("top",0).style("left",0),O.on("viewreset",(function(){return G(O)})),O.on("move",(function(){return G(O)})),O.on("moveend",(function(){return G(O)}))}}),[O]),Object(r.useEffect)((function(){if(O&&t){b.f(".map-svg").selectAll("circle").data(t,(function(e){return e.hash})).join((function(e){return e.append("circle").attr("id",q).attr("class",Y).attr("r",10).style("fill","steelblue").style("opacity",(function(e){return a&&z(e,a)?1:a&&!z(e,a)?.5:1})).on("click",(function(e,t){return c(t)})).on("mouseover",(function(e,t){o(t),function(e,t){b.f(".map-tooltip").transition().duration(0).style("opacity",.8).style("left","".concat(e.pageX+50,"px")).style("top","".concat(e.pageY-50,"px"))}(e)})).on("mouseout",(function(e,t){V((function(){return o(null)}))}))}),(function(e){return e.on("click",(function(e,t){return c(t)}))}),(function(e){return e.remove()})),G(O),n(!1);var e=H(t);k(e)}}),[O,t,l]),Object(r.useEffect)((function(){O&&y&&(!function(e,t){var n=t.topRight,r=t.bottomLeft;e.fitBounds([[r.lng,r.lat],[n.lng,n.lat]],{duration:3e3})}(O,y),setTimeout((function(){return V((function(){return o(null)}))}),500))}),[O,y]),Object(r.useEffect)((function(){if(l===se&&a){W().style("opacity",.5);var e="#".concat(q(a));b.f(e).transition().duration(500).style("fill","red").style("opacity",1).attr("r",10),Z(e);var n=H([a]);k(n)}else if(l!==ce&&l!==ie&&l!==le||!t){if(l===oe){if(0===a[f]){var r=H(t);k(r)}var c=function(){var e,n,r=function(e,t){var n=e.indexOf(t);return{prevNode:n>0?e[n-1]:null,nextNode:n<e.length-1?e[n+1]:null}}(t,a),c=r.prevNode,s=r.nextNode;c&&(e=ee(O,c,a)),s&&(n=ee(O,a,s)),T!==e&&T!==n&&te(O,T),_!==e&&_!==n&&te(O,_),C(e),I(n);var i=[a];c&&i.push(c),s&&i.push(s);var o=H(i);return k(o),{nodes:i}}().nodes;b.g(".circle").filter((function(e){return-1===c.indexOf(e)})).transition().duration(500).style("fill","purple").style("opacity",0).attr("r",10),b.g(".circle").filter((function(e){return c.indexOf(e)>-1&&e.hash!==a.hash})).transition().duration(500).style("fill","purple").style("opacity",1).attr("r",10);var s="#".concat(q(a));b.f(s).transition().duration(500).style("fill","green").attr("r",20).style("opacity",1),Z(s)}}else{var i=H(t);k(i),W().attr("r",10)}}),[l,a,t]),Object(r.useEffect)((function(){if(l===oe){var e=B(t,a);return d(e),void u(a[f])}O&&(te(O,T),te(O,_),C(null),I(null)),l===ce?j():l===ie||l===se&&j()}),[l]),Object(re.jsx)("div",{ref:function(e){return w.current=e},className:"map-container-div",children:l!==oe?Object(re.jsx)("div",{className:"map-tooltip",style:{opacity:0},children:Object(re.jsx)(ae,{node:s,isSelected:z(s,a)})}):null})},je=n(393),ue=(n(324),function(e){var t=e.node,n=e.shortMode;if(!t)return null;var r=A(t),a=r.kindness,c=r.dateString,s=r.location,i=K(a);return n?Object(re.jsxs)("div",{className:"kindness-card-inner",children:[Object(re.jsx)("p",{children:"Most Recent Act of Kindness:"}),Object(re.jsx)("p",{children:Object(re.jsx)("b",{children:i||"No kindness description provided!"})}),Object(re.jsx)("p",{children:Object(re.jsx)("b",{children:s})}),Object(re.jsx)("p",{children:Object(re.jsx)("b",{children:c})})]}):Object(re.jsxs)("div",{className:"kindness-card-inner",children:[Object(re.jsx)("p",{children:"Act of Kindness:"}),Object(re.jsx)("div",{className:"kindness-card-description",children:Object(re.jsx)("p",{children:Object(re.jsx)("b",{children:i||"No kindness description provided!"})})}),Object(re.jsx)("p",{children:"Location:"}),Object(re.jsx)("p",{children:Object(re.jsx)("b",{children:s})}),Object(re.jsx)("p",{children:"Date & Time:"}),Object(re.jsx)("p",{children:Object(re.jsx)("b",{children:c})})]})}),he=(n(325),function(){return Object(re.jsxs)("div",{className:"loading-wrapper",children:[Object(re.jsx)("div",{className:"la-ball-clip-rotate la-2x",children:Object(re.jsx)("div",{})}),Object(re.jsx)("p",{children:"Loading..."})]})}),be=n(170),pe=n.n(be),fe=n(171),me=n.n(fe),Oe=n(172),xe=n.n(Oe),ge=n(107),ve=n.n(ge),ye=n(82),ke=n.n(ye),we=function(){return Object(re.jsxs)("div",{children:[Object(re.jsx)("hr",{className:"sidebar-divider"}),Object(re.jsxs)("div",{className:"sidebar-info-row",children:[Object(re.jsx)("div",{className:"sidebar-info-left",children:Object(re.jsx)(pe.a,{fontSize:"large"})}),Object(re.jsx)("div",{className:"sidebar-info-right",children:Object(re.jsxs)("p",{children:[Object(re.jsx)("b",{children:"Click"})," a circle to explore that act of kindness!"]})})]}),Object(re.jsxs)("div",{className:"sidebar-info-row",children:[Object(re.jsx)("div",{className:"sidebar-info-left",children:Object(re.jsx)(me.a,{fontSize:"large"})}),Object(re.jsx)("div",{className:"sidebar-info-right",children:Object(re.jsxs)("p",{children:[Object(re.jsx)("b",{children:"Trace"})," that act of kindness to see how may people have paid it forward."]})})]}),Object(re.jsxs)("div",{className:"sidebar-info-row sidebar-info-row-search",children:[Object(re.jsx)("div",{className:"sidebar-info-left",children:Object(re.jsx)(ve.a,{fontSize:"large"})}),Object(re.jsx)("div",{className:"sidebar-info-right",children:Object(re.jsxs)("p",{children:[Object(re.jsx)("b",{children:"Search"})," for acts of kindness by description, location, or ID."]})})]}),Object(re.jsxs)("div",{className:"sidebar-info-row sidebar-info-row-stats",children:[Object(re.jsx)("div",{className:"sidebar-info-left",children:Object(re.jsx)(ke.a,{fontSize:"large"})}),Object(re.jsx)("div",{className:"sidebar-info-right",children:Object(re.jsxs)("p",{children:["View ",Object(re.jsx)("b",{children:"summary statistics"})," about the entire dataset."]})})]}),Object(re.jsxs)("div",{className:"sidebar-info-row sidebar-info-row-toggle",children:[Object(re.jsx)("div",{className:"sidebar-info-left",children:Object(re.jsx)(xe.a,{fontSize:"large"})}),Object(re.jsx)("div",{className:"sidebar-info-right",children:Object(re.jsxs)("p",{children:["Switch between ",Object(re.jsx)("b",{children:"real-time"})," and ",Object(re.jsx)("b",{children:"generated"})," data using the toggle below."]})})]}),Object(re.jsx)("div",{className:"sidebar-info-row sidebar-info-row-learn",children:Object(re.jsx)(o.b,{to:"/about",target:"blank",rel:"noopener noreferrer",children:Object(re.jsx)(je.a,{variant:"contained",color:"primary",children:"Learn More"})})})]})},Ne=n(174),Se=n.n(Ne),Te=n(83),Ce=n.n(Te),Me=n(401),De=function(e){e.exitTraceMode;var t=e.trace,n=e.selectedNode,r=e.setSelectedNode,a=t.indexOf(n),c=t.length;return Object(re.jsxs)("div",{className:"trace-stepper-wrapper",children:[Object(re.jsxs)("div",{className:"trace-stepper-button-horizontal",children:[Object(re.jsx)(Me.a,{title:Object(re.jsx)("h2",{children:"Go to the first act in this path."}),arrow:!0,placement:"bottom",children:Object(re.jsx)(je.a,{className:"trace-stepper-button",variant:"contained",color:"primary",disabled:0===a,onClick:function(){return r(t[0])},children:"First"})}),Object(re.jsx)(je.a,{className:"trace-stepper-button",variant:"contained",color:"primary",disabled:0===a,onClick:function(){return r(t[a-1])},children:Object(re.jsx)(Se.a,{})}),Object(re.jsx)(je.a,{className:"trace-stepper-button",variant:"contained",color:"primary",disabled:a===c-1,onClick:function(){return r(t[a+1])},children:Object(re.jsx)(Ce.a,{})}),Object(re.jsx)(Me.a,{title:Object(re.jsx)("h2",{children:"Go to the most recent act in this path."}),arrow:!0,placement:"bottom",children:Object(re.jsx)(je.a,{className:"trace-stepper-button",variant:"contained",color:"primary",disabled:a===c-1,onClick:function(){return r(t[c-1])},children:"Last"})})]}),Object(re.jsx)("p",{children:"".concat(a+1," / ").concat(t.length)}),Object(re.jsx)(ue,{node:n})]})},_e=n(395),Ie=n(402),Fe=function(e){var t=e.dataUrl,n=e.setDataUrl,r=t===p,a=t===p?"Viewing Real Data":"Viewing Fake Data";return Object(re.jsx)(Me.a,{title:Object(re.jsx)("h2",{children:"Toggle to switch the data source."}),arrow:!0,placement:"top",children:Object(re.jsx)(_e.a,{control:Object(re.jsx)(Ie.a,{checked:r,onChange:function(e){var t=e.target.checked;n(t?p:"https://docs.google.com/spreadsheets/d/1ILNeaJC675bNSCWHgAK-2hD6MNZB38PYh7Y90MncF50/pubhtml")},color:"primary"}),labelPlacement:"top",label:a})})},Le=function(e){var t=e.trace,n=t.length,r=P(t),a=t[0].dateTime,c=t[t.length-1].dateTime.diff(a,"days").toObject().days;return Object(re.jsx)("div",{className:"trace-statistics-inner",children:Object(re.jsxs)("div",{className:"sidebar-clear-div",children:[Object(re.jsx)("h1",{children:n}),Object(re.jsx)("p",{children:"acts of kindness in this trace \ud83d\ude0a"}),Object(re.jsx)("br",{}),Object(re.jsx)("h1",{children:r.toFixed(1)}),Object(re.jsx)("p",{children:"total miles travelled \ud83c\udf0d"}),Object(re.jsx)("br",{}),Object(re.jsx)("h1",{children:c.toFixed(1)}),Object(re.jsx)("p",{children:"days between first & last act \ud83d\udcc5 "})]})})},ze=function(e){var t=e.isLoading,n=e.selectedNode,r=e.setSelectedNode,a=e.clearSelectedNode,c=e.mode,s=e.setMode,i=e.trace,l=e.dataUrl,d=e.setDataUrl,j=e.filterText,u=(e.setTraceFilterId,0);n&&(u=B(i,n).length-1);return Object(re.jsxs)("div",{className:"sidebar-flex",children:[Object(re.jsx)("h1",{children:"\ud83d\ude0a Kindness Tracker"}),t?Object(re.jsx)(he,{}):null,t||c!==ce?null:Object(re.jsx)(we,{}),c===se?Object(re.jsxs)("div",{className:"sidebar-clear-div",children:[Object(re.jsx)(Me.a,{title:Object(re.jsx)("h2",{children:"Deselect the currently selected point, and show all points again."}),arrow:!0,placement:"right",children:Object(re.jsx)(je.a,{variant:"contained",style:{backgroundColor:"red",color:"white"},className:"sidebar-button-below",onClick:a,children:"Clear Selection"})}),Object(re.jsx)(Me.a,{title:Object(re.jsx)("h2",{children:"Track how other people have paid it forward to get to this act of kindness!"}),arrow:!0,placement:"right",children:Object(re.jsx)(je.a,{variant:"contained",style:{backgroundColor:"green",color:"white"},className:"sidebar-button-below",onClick:function(){return s(oe)},children:"Trace this Act!"})}),Object(re.jsx)("h1",{children:u}),Object(re.jsxs)("p",{children:[u>1?"acts":"act"," of kindness ",u>1?"are":"is"," connected"]})]}):null,c===se?Object(re.jsx)("div",{className:"selected-card-wrapper",children:Object(re.jsx)(ue,{node:n})}):null,c===oe?Object(re.jsx)("div",{className:"trace-stepper-button-exit",children:Object(re.jsx)(je.a,{variant:"contained",style:{backgroundColor:"red",color:"white"},onClick:function(){return s(se)},children:"Exit Trace Mode"})}):null,c===le?Object(re.jsx)("div",{className:"trace-stepper-button-exit",children:Object(re.jsx)(je.a,{variant:"contained",style:{backgroundColor:"red",color:"white"},onClick:function(){return s(oe)},children:"Back to Trace Mode"})}):null,c===oe?Object(re.jsxs)("div",{children:[Object(re.jsx)(De,{exitTraceMode:function(){return s(se)},trace:i,selectedNode:n,setSelectedNode:r}),Object(re.jsx)(Me.a,{title:Object(re.jsx)("h2",{children:"View information about this particular sequence of acts."}),arrow:!0,placement:"right",children:Object(re.jsx)(je.a,{variant:"contained",style:{backgroundColor:"green",color:"white"},className:"sidebar-button-above",onClick:function(){return s(le)},children:"View Trace Statistics"})})]}):null,c===le?Object(re.jsx)(Le,{trace:i}):null,c===ie&&i.length>0?Object(re.jsxs)("div",{className:"sidebar-clear-div",children:[Object(re.jsx)("h1",{children:i.length}),Object(re.jsxs)("p",{children:[i.length>1?"acts":"act",' found for search query "',j,'".']}),Object(re.jsx)("p",{children:"Press Esc to clear."})]}):null,Object(re.jsxs)("div",{className:"sidebar-bottom-content",children:[Object(re.jsx)("div",{className:"data-toggle-outer",children:Object(re.jsx)(Fe,{dataUrl:l,setDataUrl:d})}),Object(re.jsx)("p",{className:"sidebar-small-text",children:"Christian Moroney, Jackson Bernatchez, Kevin Lyons"}),Object(re.jsx)("p",{className:"sidebar-small-text",children:"6.859 Final Project Spring 2021"}),Object(re.jsx)("p",{className:"sidebar-small-text",children:Object(re.jsx)(o.b,{to:"/about",target:"blank",rel:"noopener noreferrer",children:"Learn More"})}),Object(re.jsx)("div",{children:Object(re.jsx)("a",{href:"https://github.com/6859-sp21/final-project-kindness-tracker",target:"_blank",children:Object(re.jsx)("img",{className:"sidebar-git-image",src:"https://image.flaticon.com/icons/png/512/25/25231.png"})})})]})]})},Be=n(175),Ee=n.n(Be),Ae=function(e){var t=e.filterNodes,n=e.filterText,r=e.setFilterText;return Object(re.jsx)(Ee.a,{value:n||"",onChange:r,cancelOnEscape:!0,onRequestSearch:function(){return t(n)},onCancelSearch:function(){r(null),t(null)},placeholder:"Search for acts of kindness by description, location, or ID. Press Enter to search. \u23ce"})},Je=n(3),Ke=n(6),Pe=n(400),Re=n(396),Ve=n(397),We=n(398),qe=n(161),Ye=n(64),Ue=n.n(Ye),Ge=n(179),He=n.p+"static/media/kindness_card_image.c3ba2bc2.png",Ze=(n(359),Object(Ke.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,n=e.classes,r=e.onClose,a=Object(Je.a)(e,["children","classes","onClose"]);return Object(re.jsxs)(Re.a,Object(N.a)(Object(N.a)({disableTypography:!0,className:n.root},a),{},{children:[Object(re.jsx)(Ge.a,{variant:"h6",children:t}),r?Object(re.jsx)(qe.a,{"aria-label":"close",className:n.closeButton,onClick:r,children:Object(re.jsx)(Ue.a,{})}):null]}))}))),Qe=Object(Ke.a)((function(e){return{root:{padding:e.spacing(2)}}}))(Ve.a),Xe=(Object(Ke.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(We.a),function(e){var t=e.open,n=e.setOpen,r=function(){n(!1)};return Object(re.jsx)("div",{children:Object(re.jsxs)(Pe.a,{onClose:r,"aria-labelledby":"customized-dialog-title",open:t,children:[Object(re.jsx)(Ze,{id:"customized-dialog-title",onClose:r,children:"FAQs"}),Object(re.jsxs)(Qe,{dividers:!0,children:[Object(re.jsx)(Ge.a,{gutterBottom:!0,variant:"h6",children:Object(re.jsx)("b",{children:"\ud83d\ude0a \xa0What is Kindness Tracker?"})}),Object(re.jsx)(Ge.a,{gutterBottom:!0,children:"The purpose of this app is to track the spread of acts of kindness and encourage people to pay it forward!"}),Object(re.jsx)("div",{className:"dialog-video-wrapper",children:Object(re.jsx)("video",{width:"100%",controls:"controls",children:Object(re.jsx)("source",{src:"https://www.dropbox.com/s/5whse10x4ziqafc/6859%20-%20Kindness%20Tracker.mp4?raw=1",type:"video/mp4"})})}),Object(re.jsxs)(Ge.a,{gutterBottom:!0,children:["Check out our project page ",Object(re.jsx)(o.b,{to:"/about",target:"_blank",rel:"noopener noreferrer",children:"here"})," for more information!"]}),Object(re.jsx)(Ge.a,{gutterBottom:!0,variant:"h6",children:Object(re.jsx)("b",{children:"\ud83e\udd14 \xa0How does it work?"})}),Object(re.jsxs)(Ge.a,{gutterBottom:!0,children:["We handed out kindness cards and encouraged people to pay it forward. When you do something nice for someone, you should give them a card. They fill out out a Google form to tell us what happened. Then, the process repeats!",Object(re.jsx)("img",{src:He,className:"kindness-card-image"})]}),Object(re.jsx)(Ge.a,{gutterBottom:!0,variant:"h6",children:Object(re.jsx)("b",{children:'\u2194\ufe0f \xa0What does it mean to "trace" an act of kindness?'})}),Object(re.jsxs)(Ge.a,{gutterBottom:!0,children:["We mean that you are ",Object(re.jsx)("b",{children:"tracing"}),' the path this act of kindness has travelled as people pay it forward! The ID number on each kindness card allows us to link one act of kindness to another. The "trace" of a particular act of kindness is just the path of acts it lives on, with each act having the same ID number!']}),Object(re.jsx)(Ge.a,{gutterBottom:!0,variant:"h6",children:Object(re.jsx)("b",{children:"\ud83d\ude4b\ud83c\udffd\u200d\u2640\ufe0f \xa0I want to participate!"})}),Object(re.jsx)(Ge.a,{gutterBottom:!0,children:"Click the \u2795 \xa0button in the top right of the page to add your own act of kindness and learn more!"}),Object(re.jsx)(Ge.a,{gutterBottom:!0,variant:"h6",children:Object(re.jsx)("b",{children:"\u26a0\ufe0f \xa0Where did you get the fake data from?"})}),Object(re.jsx)(Ge.a,{gutterBottom:!0,children:"We just wrote a quick script to generate fake acts of kindness all over the United States, most of which are in Massachusetts. This data is just a placeholder while the app rolls out and more acts happen in the real world."})]})]})})}),$e=function(e){var t=e.open,n=e.setOpen,r=function(){n(!1)};return Object(re.jsx)("div",{children:Object(re.jsxs)(Pe.a,{onClose:r,"aria-labelledby":"customized-dialog-title",open:t,children:[Object(re.jsx)(Ze,{id:"customized-dialog-title",onClose:r,children:"Add a new act of kindness!"}),Object(re.jsxs)(Qe,{dividers:!0,children:[Object(re.jsxs)(Ge.a,{gutterBottom:!0,children:["You may be wondering - how can ",Object(re.jsx)("i",{children:"I"})," add an act of kindness to the tracker!"]}),Object(re.jsxs)(Ge.a,{gutterBottom:!0,children:["We have reserved the ID number ",Object(re.jsx)("b",{children:"123"})," for any act of kindness that you want to do!"]}),Object(re.jsxs)(Ge.a,{gutterBottom:!0,children:["If you want to get involved in the tracker, here are the steps:",Object(re.jsxs)("ol",{children:[Object(re.jsx)("li",{children:"\ud83d\ude0a \xa0 Do something kind for someone else!"}),Object(re.jsxs)("li",{children:["\u270f\ufe0f \xa0 Fill out our Google form ",Object(re.jsx)("a",{href:"http://bit.ly/your-kindness",target:"_blank",children:Object(re.jsx)("b",{children:"here"})})," \ud83d\udd17  \xa0 to tell us what happened!"]}),Object(re.jsx)("li",{children:"\ud83d\udde3\ufe0f \xa0 Encourage that person (or anyone else) to check out Kindness Tracker and maybe pay it forward!"})]})]}),Object(re.jsxs)(Ge.a,{gutterBottom:!0,children:["Remember, you should use ID number ",Object(re.jsx)("b",{children:"123"}),", and tell your friends to do the same."]}),Object(re.jsx)(Ge.a,{gutterBottom:!0,children:"Here is an easy to remember link to our Google form (we already filled in 123 for you here):"}),Object(re.jsx)(Ge.a,{gutterBottom:!0,children:Object(re.jsx)("a",{href:"http://bit.ly/your-kindness",target:"_blank",children:Object(re.jsx)("code",{children:"bit.ly/your-kindness"})})}),Object(re.jsx)("hr",{}),Object(re.jsx)(Ge.a,{gutterBottom:!0,children:"If you want an actual kindness card, or have any further questions, feel free to reach out to the developers at:"}),Object(re.jsx)(Ge.a,{gutterBottom:!0,children:Object(re.jsx)("code",{children:Object(re.jsx)("a",{href:"mailto:kindness-tracker@mit.edu",children:"kindness-tracker@mit.edu"})})})]})]})})},et=n(86),tt=n.n(et),nt=n(87),rt=n.n(nt),at=function(e){var t=e.data,n=e.setSelectedNode,a=e.traceId;if(!t)return null;var c=t.length,s=new Set(t.map((function(e){return e[f]}))),i=s.size,o=Array.from(s).filter((function(e){return 0!==e})).reduce((function(e,n){return e[n]=P(E(t,n)),e}),{}),l=Math.max.apply(Math,Object(w.a)(Object.values(o))),d=tt.a.maxBy(tt.a.keys(o),(function(e){return o[e]})),j=Object.values(o).reduce((function(e,t){return e+t}),0)/Object.values(o).length,u=R(t),h=u[u.length-1];return Object(r.useEffect)((function(){b.g(".chart-svg").remove();var e=u.map((function(e){return e.dateTime})),t=e[0],n=S.DateTime.now().diff(t,["days"]),r=Math.ceil(n.days),a=tt.a.range(r).map((function(n){var r=t.plus({days:n});return{days:n+1,count:e.filter((function(e){return e.startOf("day")<=r.startOf("day")})).length}})),c=30,s=30,i=50,o=30,l=460-o-s,d=300-c-i,j=b.f(".chart-outer").append("svg").attr("class","chart-svg").attr("width",l+o+s).attr("height",d+c+i).append("g").attr("transform","translate("+o+","+c+")"),h=b.e().domain([0,b.d(a,(function(e){return e.days}))+1]).range([0,l]);j.append("g").attr("transform","translate(0,"+d+")").call(b.a(h)),j.append("text").attr("class","axis-label").text("Days since first act of kindness (".concat(t.toLocaleString(S.DateTime.DATE_SHORT),")")).attr("x",o+(l-o-s)/2).attr("text-anchor","middle").attr("fill","white").attr("y",d+35),j.append("text").attr("class","axis-label").text("# of cumulative acts of kindness over time").attr("text-anchor","middle").attr("fill","white").attr("font-size","20px").attr("x",o+(l-o-s)/2).attr("y",-10);var p=b.e().domain([0,b.d(a,(function(e){return e.count}))]).range([d,0]);j.append("g").call(b.b(p)),j.append("path").datum(a).attr("fill","none").attr("stroke","green").attr("stroke-width",3.5).attr("d",b.c().x((function(e){return h(e.days)})).y((function(e){return p(e.count)})))}),[t]),Object(re.jsx)("div",{className:"summary-stats-inner",children:Object(re.jsxs)("div",{className:"summary-stats-flex",children:[Object(re.jsxs)("div",{className:"summary-stats-row",children:[Object(re.jsxs)("div",{className:"sidebar-clear-div summary-statistics-card summary-stats-item-half",children:[Object(re.jsx)("h1",{children:c}),Object(re.jsxs)("div",{className:"summary-statistics-info-text",children:[Object(re.jsx)("p",{children:"total acts"}),Object(re.jsx)(Me.a,{title:Object(re.jsx)("h2",{children:"Total number of acts of kindness in this dataset."}),arrow:!0,children:Object(re.jsx)(rt.a,{fontSize:"small"})})]})]}),Object(re.jsxs)("div",{className:"sidebar-clear-div summary-statistics-card summary-stats-item-half",children:[Object(re.jsx)("h1",{children:i}),Object(re.jsxs)("div",{className:"summary-statistics-info-text",children:[Object(re.jsx)("p",{children:"unique paths (card IDs)"}),Object(re.jsx)(Me.a,{title:Object(re.jsx)("h2",{children:'Total number of unique card IDs that are in distribution. Each card ID creates a "path" where you can pay kindness forward.'}),arrow:!0,children:Object(re.jsx)(rt.a,{fontSize:"small"})})]})]})]}),Object(re.jsxs)("div",{className:"summary-stats-row",children:[Object(re.jsxs)("div",{className:"sidebar-clear-div summary-statistics-card summary-stats-item-half",children:[Object(re.jsxs)("h1",{children:[l.toFixed(1)," miles"]}),Object(re.jsxs)("div",{className:"summary-statistics-info-text",children:[Object(re.jsx)("p",{children:"longest path length"}),Object(re.jsx)(Me.a,{title:Object(re.jsx)("h2",{children:"Longest path length that a single act of kindness has travelled. Computed as the sum of distances between adjacent points along a path."}),arrow:!0,children:Object(re.jsx)(rt.a,{fontSize:"small"})})]}),Object(re.jsx)(je.a,{onClick:function(){return a(+d)},variant:"contained",color:"primary",children:"View"})]}),Object(re.jsxs)("div",{className:"sidebar-clear-div summary-statistics-card summary-stats-item-half",children:[Object(re.jsxs)("h1",{children:[j.toFixed(1)," miles"]}),Object(re.jsx)("p",{children:"average path length"})]})]}),Object(re.jsxs)("div",{className:"summary-stats-row",children:[Object(re.jsx)("div",{className:"summary-stats-item-big",children:Object(re.jsx)("div",{className:"summary-stats-kindness-card",children:Object(re.jsx)(ue,{node:h,shortMode:!0})})}),Object(re.jsx)("div",{className:"summary-stats-item-small",children:Object(re.jsx)(je.a,{onClick:function(){return n(h)},variant:"contained",color:"primary",children:"View"})})]}),Object(re.jsx)("div",{className:"chart-outer"})]})})},ct=n(113),st=n.n(ct),it=n(114),ot=n.n(it),lt=n(399),dt=n(177),jt=n.n(dt),ut=n(176),ht=n.n(ut),bt=n(108),pt=n.n(bt),ft=n.p+"static/media/summary_image.2aeff084.png",mt=n.p+"static/media/yoda_transparent.e7a97780.png",Ot=(n(365),function(){return Object(re.jsx)("div",{className:"App app-about",children:Object(re.jsxs)("div",{children:[Object(re.jsx)("div",{className:"about-big-text",children:Object(re.jsx)("h1",{children:"\ud83d\ude0a Kindness Tracker"})}),Object(re.jsx)(o.b,{to:"/",target:"_blank",rel:"noopener noreferrer",children:Object(re.jsxs)(je.a,{variant:"contained",color:"primary",className:"about-launch-button",children:["Launch App \xa0 ",Object(re.jsx)(Ce.a,{})]})}),Object(re.jsxs)("div",{className:"about-header-text",children:[Object(re.jsxs)("p",{children:["Christian Moroney (",Object(re.jsx)("code",{children:"cmoroney"}),")"]}),Object(re.jsxs)("p",{children:["Jackson Bernatchez (",Object(re.jsx)("code",{children:"jrnerbat"}),")"]}),Object(re.jsxs)("p",{children:["Kevin Lyons (",Object(re.jsx)("code",{children:"kalyons"}),")"]}),Object(re.jsx)("p",{children:Object(re.jsx)("code",{children:Object(re.jsx)("a",{href:"mailto:kindness-tracker@mit.edu",children:"kindness-tracker@mit.edu"})})}),Object(re.jsx)("p",{children:Object(re.jsx)("b",{children:"6.859 Final Project Spring 2021"})}),Object(re.jsx)("img",{src:ft,className:"about-summary-image"})]}),Object(re.jsxs)("div",{className:"about-content-left",children:[Object(re.jsx)("h2",{children:"Abstract"}),Object(re.jsx)("p",{children:"TODO Abstract goes here"}),Object(re.jsx)("h2",{children:"Paper"}),Object(re.jsxs)("p",{children:["Click ",Object(re.jsx)(o.b,{to:"/paper",target:"_blank",rel:"noopener noreferrer",children:Object(re.jsx)("b",{children:"here"})})," to access our paper on this work."]}),Object(re.jsx)("h2",{children:"Source Code"}),Object(re.jsxs)("div",{className:"about-horizontal-stack",children:[Object(re.jsxs)("p",{children:["View the source code for our application on GitHub ",Object(re.jsx)("a",{href:"https://github.com/6859-sp21/final-project-kindness-tracker",target:"_blank",children:Object(re.jsx)("b",{children:"here"})}),"."]}),Object(re.jsx)("div",{children:Object(re.jsx)("a",{href:"https://github.com/6859-sp21/final-project-kindness-tracker",target:"_blank",children:Object(re.jsx)("img",{className:"sidebar-git-image about-git-image",src:"https://image.flaticon.com/icons/png/512/25/25231.png"})})})]}),Object(re.jsx)("h2",{children:"Trailer Video"}),Object(re.jsx)("p",{children:"TODO insert video here."}),Object(re.jsx)("h2",{children:"Google Form for Submissions"}),Object(re.jsxs)("p",{children:["You can submit acts of kindness using our Google form here, using ID number ",Object(re.jsx)("b",{children:"123"}),":"]}),Object(re.jsx)("p",{children:Object(re.jsx)("a",{href:"http://bit.ly/your-kindness",target:"_blank",children:Object(re.jsx)("code",{children:"bit.ly/your-kindness"})})}),Object(re.jsx)("h2",{children:"Original Demo Video"}),Object(re.jsx)("div",{className:"about-video-wrapper",children:Object(re.jsx)("video",{width:"100%",controls:"controls",children:Object(re.jsx)("source",{src:"https://www.dropbox.com/s/5whse10x4ziqafc/6859%20-%20Kindness%20Tracker.mp4?raw=1",type:"video/mp4"})})}),Object(re.jsx)("img",{src:mt,className:"yoda-image"})]})]})})});n(366);st.a.workerClass=ne.a,st.a.accessToken="pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ";var xt=function(){var e=Object(r.useState)(null),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),s=Object(i.a)(c,2),o=s[0],l=s[1],d=Object(r.useState)(!0),u=Object(i.a)(d,2),h=u[0],w=u[1],T=Object(r.useState)(null),C=Object(i.a)(T,2),M=C[0],D=C[1],_=Object(r.useState)(null),I=Object(i.a)(_,2),L=I[0],z=I[1],B=Object(r.useState)(p),A=Object(i.a)(B,2),J=A[0],K=A[1],P=Object(r.useState)(null),R=Object(i.a)(P,2),V=R[0],W=R[1],q=Object(r.useState)(null),Y=Object(i.a)(q,2),U=Y[0],G=Y[1],H=Object(r.useState)(ce),Z=Object(i.a)(H,2),Q=Z[0],X=Z[1],$=Object(r.useState)(!1),ee=Object(i.a)($,2),te=ee[0],ne=ee[1],ae=Object(r.useState)(!1),je=Object(i.a)(ae,2),ue=je[0],he=je[1],be=Object(r.useState)(!1),pe=Object(i.a)(be,2),fe=pe[0],me=pe[1],Oe=Object(r.useState)(null),xe=Object(i.a)(Oe,2),ge=xe[0],ve=xe[1],ye=Object(r.useState)(!0),we=Object(i.a)(ye,2),Ne=we[0],Se=we[1];Object(r.useEffect)((function(){fe?b.f(".right-sidebar").style("left","65%"):b.f(".right-sidebar").style("left","100%")}),[fe]),Object(r.useEffect)((function(){me(!1),Q!==oe&&Q!==le||0!==ge&&123!==ge||!Ne?b.f(".trace-alert-popup").style("left","100%").style("box-shadow","none"):b.f(".trace-alert-popup").style("left","70%").style("box-shadow",null)}),[Q,ge,Ne]),Object(r.useEffect)((function(){null===ge&&Se(!0)}),[ge]);var Te=function(e){27===e.keyCode&&me(!1)};Object(r.useEffect)((function(){window.innerWidth<800&&alert("We see you're on mobile! Rotate your phone sideways for the best experience. Check out our app on your computer too!"),document.addEventListener("keydown",Te,!1)}),[]);var Ce=function(){j.a.init({key:J,simpleSheet:!0}).then((function(e){var t=function(e){var t=e?e.filter((function(e){return e.center_lng&&e.center_lat})):null,n=t?t.map((function(e,t){return Object(N.a)(Object(N.a)({},e),{},{index:t,dateTime:S.DateTime.fromFormat(e.Timestamp,"M/d/yyyy H:mm:ss"),hash:"".concat(t,"-").concat(e.Timestamp)})})):null,r=[f,y,k],a=n.map((function(e){return r.forEach((function(t){e[t]=+e[t]})),e}));return F(a)}(e);a(t),l(t);var n=new ot.a([f,v,m,O,x,g],{idFieldOrFunction:"index"});n.addAll(t),W(n)})).catch(console.warn)};Object(r.useEffect)((function(){null===n&&Ce()}),[n]),Object(r.useEffect)((function(){null!==n&&(w(!0),D(null),ve(null),G(null),z(null),X(ce),me(!1),Ce())}),[J]);var De=function(){l(n),ve(null)},_e=function(){D(null),ve(null),X(ce),G(null)},Ie=function(e){Q===oe||Q===le||(X(se),De()),D(e)};return Object(re.jsxs)("div",{className:"App",children:[Object(re.jsxs)("div",{className:"horizontal-stack",children:[Object(re.jsx)("div",{className:"left-sidebar",children:Object(re.jsx)(ze,{isLoading:h,selectedNode:M,setSelectedNode:D,clearSelectedNode:_e,mode:Q,setMode:X,trace:o,dataUrl:J,setDataUrl:K,filterText:U,setTraceFilterId:ve})}),Object(re.jsxs)("div",{className:"vertical-stack",children:[Object(re.jsxs)("div",{className:"top-bar-wrapper",children:[Object(re.jsx)("div",{className:"search-bar-wrapper",children:Q===ce||Q===ie?Object(re.jsx)(Ae,{filterText:U,setFilterText:function(e){X(ce),G(e)},filterNodes:function(e){if(w(!0),!e)return l(n),ve(null),w(!1),void X(ce);var t=V.get(e.split(" "),ot.a.UNION_REDUCER);if(0===t.length)return alert("No results found! Try another search query."),w(!1),void X(ce);D(null),ve(null),z(null),X(ie),l(t)}}):null}),Object(re.jsxs)("div",{className:"icon-wrapper",children:[Q===ce?Object(re.jsx)(Me.a,{title:Object(re.jsx)("h2",{children:"View Summary Statistics"}),arrow:!0,children:Object(re.jsx)(lt.a,{size:"small",color:"primary","aria-label":"view",onClick:function(){return me(!0)},className:"icon-wrapper-button",children:Object(re.jsx)(ke.a,{})})}):Object(re.jsx)(Me.a,{title:Object(re.jsx)("h2",{children:"Reset to Default View"}),arrow:!0,children:Object(re.jsx)(lt.a,{size:"small",color:"secondary","aria-label":"reset",onClick:_e,className:"icon-wrapper-button",children:Object(re.jsx)(pt.a,{})})}),Object(re.jsx)(Me.a,{title:Object(re.jsx)("h2",{children:"Add New"}),arrow:!0,children:Object(re.jsx)(lt.a,{size:"small",color:"primary","aria-label":"add",onClick:function(){return he(!0)},className:"icon-wrapper-button",children:Object(re.jsx)(ht.a,{})})}),Object(re.jsx)(Me.a,{title:Object(re.jsx)("h2",{children:"Learn More"}),arrow:!0,children:Object(re.jsx)(lt.a,{size:"small",color:"primary","aria-label":"info",onClick:function(){return ne(!0)},className:"icon-wrapper-button",children:Object(re.jsx)(jt.a,{})})})]})]}),Object(re.jsx)("div",{className:"map-wrapper",children:Object(re.jsx)(de,{trace:o,setIsLoading:w,selectedNode:M,setSelectedNode:Ie,hoveredNode:L,setHoveredNode:z,mode:Q,setTrace:l,resetTrace:De,setTraceFilterId:ve})})]}),fe?Object(re.jsx)("div",{className:"right-sidebar-button-exit",children:Object(re.jsx)(Me.a,{title:Object(re.jsx)("h2",{children:"Close (Or Press Esc)"}),arrow:!0,children:Object(re.jsx)(lt.a,{size:"small",color:"secondary","aria-label":"close",onClick:function(){return me(!1)},className:"icon-wrapper-button",children:Object(re.jsx)(Ue.a,{})})})}):null,Object(re.jsx)("div",{className:"right-sidebar",children:Object(re.jsx)(at,{data:n,setSelectedNode:Ie,traceId:function(e){var t=E(n,e);l(t),X(le),D(t[t.length-1]),ve(e)}})}),Object(re.jsxs)("div",{className:"trace-alert-popup",children:[Object(re.jsx)("h3",{children:"Note!"}),Object(re.jsxs)("p",{children:["\u26a0\ufe0f You are tracing ",Object(re.jsxs)("b",{children:[0===ge?"the root act of kindness":"public acts of kindness that didn't come from kindness cards","."]})," Adjacent acts may not be directly linked to one another. All acts are simply sorted by date."]}),Ne?Object(re.jsx)(Me.a,{title:Object(re.jsx)("h2",{children:"Close"}),arrow:!0,children:Object(re.jsx)(lt.a,{size:"small",color:"secondary","aria-label":"close",onClick:function(){return Se(!1)},className:"trace-alert-popup-close",children:Object(re.jsx)(Ue.a,{})})}):null]})]}),Object(re.jsx)(Xe,{open:te,setOpen:ne}),Object(re.jsx)($e,{open:ue,setOpen:he})]})},gt=function(){return Object(re.jsx)(o.a,{basename:"/",children:Object(re.jsxs)(l.c,{children:[Object(re.jsx)(l.a,{exact:!0,path:"/about",children:Object(re.jsx)(Ot,{})}),Object(re.jsx)(l.a,{exact:!0,path:"/paper",render:function(){return window.location.href="".concat("/final-project-kindness-tracker","/paper.pdf"),null}}),Object(re.jsx)(l.a,{exact:!0,path:"/",children:Object(re.jsx)(xt,{})})]})})},vt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,404)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(re.jsx)(a.a.StrictMode,{children:Object(re.jsx)(gt,{})}),document.getElementById("root")),vt()}},[[367,1,2]]]);
//# sourceMappingURL=main.89784d71.chunk.js.map