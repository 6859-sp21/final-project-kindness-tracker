(this["webpackJsonpkindness-tracker"]=this["webpackJsonpkindness-tracker"]||[]).push([[0],{52:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var c=n(3),o=n.n(c),r=n(46),a=n.n(r),i=(n(52),n(0)),s=n(47),l=n.n(s),u=(n(13),n(4)),d=n(1),f=n(18),j=n(10),p=n.n(j),b=(n(78),"ID NUMBER on kindness card"),h="[Optional] Tell us about the act of kindness you received!",O=function(){u.selectAll(".circle").transition().duration(500).style("fill","steelblue")},y=n(12),m=(n(79),{width:"100vw",height:"100vh",position:"absolute"}),v=39.8283,x=-98.5795,k=3.75;p.a.accessToken="pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ",p.a.workerClass=y.a;var T=function(e){var t=e.data,n=e.selectedNode,o=e.setSelectedNode,r=e.traceNode,a=e.traceList,s=e.setTraceList,l=e.traceIndex,j=Object(c.useState)(null),y=Object(i.a)(j,2),T=y[0],C=y[1],L=Object(c.useRef)(null),N=(t||[]).map((function(e,t){return Object(f.a)(Object(f.a)({},e),{},{index:t})})),g=function(e){return"circle-".concat(e.index)};return Object(c.useEffect)((function(){T||function(e){var t=e.setMap,n=e.mapContainer,c=new p.a.Map({container:n.current,style:"mapbox://styles/mapbox/light-v10",center:[x,v],zoom:k});c.on("load",(function(){t(c)}))}({setMap:C,mapContainer:L})}),[T]),Object(c.useEffect)((function(){if(T&&null!==t){var e=T.getCanvasContainer(),n=u.select(e).append("svg").attr("width","100%").attr("height","100%").style("position","absolute").style("z-index",2).style("top",0).style("left",0),c=function(e){var t=e.CenterLon,n=e.CenterLat;return T.project(new p.a.LngLat(t,n))},r=n.selectAll("circle").data(N).enter().append("circle").attr("class","circle").attr("id",g).attr("r",10).style("fill","steelblue").on("mouseover",(function(e,t){!function(e,t){var n=u.select(".map-tooltip");n.transition().duration(0).style("opacity",.8).style("left","".concat(e.pageX+50,"px")).style("top","".concat(e.pageY-50,"px"));var c=t["CITY where act of kindness took place"],o=t.STATE,r=t[h]||"A random act of kindess took place!",a="<p><b>".concat(c,", ").concat(o,"</b></p><p>").concat(r,"</p>");n.html(a)}(e,t)})).on("mouseout",(function(e,t){u.select(".map-tooltip").transition().duration(500).style("opacity",0)})).on("click",(function(e,t){O(),u.select("#".concat(g(t))).transition().duration(500).style("fill","red"),e.target,T.flyTo({center:[t.CenterLon,t.CenterLat],zoom:12,essential:!0}),o(t)})),a=function(){r.attr("cx",(function(e){return c(e).x})).attr("cy",(function(e){return c(e).y}))};return T.on("viewreset",a),T.on("move",a),T.on("moveend",a),T.on("load",(function(){T.resize()})),a(),function(){return T.remove()}}}),[T,t]),Object(c.useEffect)((function(){T&&t&&!n&&(T.flyTo({center:[x,v],zoom:k,essential:!0}),O())}),[T,t,n]),Object(c.useEffect)((function(){if(r){var e=N.filter((function(e){return e[b]==r[b]}));O(),u.selectAll(".circle").filter((function(e){return e[b]==r[b]})).transition().duration(500).style("fill","purple"),T.flyTo({center:[x,v],zoom:k,essential:!0}),s(e)}}),[r]),Object(c.useEffect)((function(){if(T&&a&&l>-1){var e=a[l];T.flyTo({center:[e.CenterLon,e.CenterLat],zoom:12,essential:!0}),O(),u.selectAll(".circle").filter((function(e){return e[b]==r[b]})).transition().duration(500).style("fill","purple"),u.select("#".concat(g(a[l]))).transition().duration(500).style("fill","green")}}),[l]),Object(d.jsx)("div",{ref:function(e){return L.current=e},style:m,children:Object(d.jsx)("div",{className:"map-tooltip",style:{opacity:0},children:Object(d.jsx)("p",{children:"Tooltip contents will go here."})})})},C=(n(80),function(e){var t=e.selectedNode,n=e.setSelectedNode,c=e.setTraceNode,o=e.traceList,r=e.setTraceList,a=e.traceIndex,i=e.setTraceIndex;return Object(d.jsxs)("div",{className:"sidebar-flex",children:[Object(d.jsx)("h1",{children:"Kindess Tracker"}),Object(d.jsx)("h3",{children:t?t.STATE:null}),Object(d.jsx)("h3",{children:t?t[h]:null}),t?Object(d.jsx)("button",{onClick:function(){n(null),r([]),i(-1)},children:"Clear Selected Node"}):null,t?Object(d.jsx)("button",{onClick:function(){return c(t)},children:"Trace this Act!"}):null,o?o.map((function(e,t){return Object(d.jsx)("p",{onClick:function(){return i(t)},style:{color:t==a?"blue":"white",cursor:"pointer"},children:e[b]},t)})):null]})}),L=n(19),N=n.n(L);n(81);N.a.workerClass=y.a,N.a.accessToken="pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ";var g=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],o=t[1],r=Object(c.useState)(null),a=Object(i.a)(r,2),s=a[0],u=a[1],f=Object(c.useState)(null),j=Object(i.a)(f,2),p=j[0],b=j[1],h=Object(c.useState)([]),O=Object(i.a)(h,2),y=O[0],m=O[1],v=Object(c.useState)(-1),x=Object(i.a)(v,2),k=x[0],L=x[1];return Object(c.useEffect)((function(){null===n&&l.a.init({key:"https://docs.google.com/spreadsheets/d/1IqEBIcnFZ_BFCrD8jhk11yVoOjfxzZpiZLdL4cL3oK0/pubhtml",simpleSheet:!0}).then((function(e){o(e)})).catch(console.warn)}),[n]),Object(d.jsx)("div",{className:"App",children:Object(d.jsxs)("div",{className:"horizontal-stack",children:[Object(d.jsx)("div",{className:"left-sidebar",children:Object(d.jsx)(C,{selectedNode:s,setSelectedNode:u,setTraceNode:b,traceList:y,setTraceList:m,traceIndex:k,setTraceIndex:L})}),Object(d.jsx)("div",{className:"map-wrapper",children:Object(d.jsx)(T,{data:n,selectedNode:s,setSelectedNode:u,traceNode:p,traceList:y,setTraceList:m,traceIndex:k})})]})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,83)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),o(e),r(e),a(e)}))};a.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(g,{})}),document.getElementById("root")),I()}},[[82,1,2]]]);
//# sourceMappingURL=main.98c17f15.chunk.js.map