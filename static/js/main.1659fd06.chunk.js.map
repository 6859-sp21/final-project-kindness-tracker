{"version":3,"sources":["components/mapboxGLMap/mapUtils.js","utils/dataConstants.js","components/tooltip/index.js","utils/stringUtils.js","components/mapboxGLMap/index.js","utils/dataUtils.js","components/sidebar/kindessCard.js","components/sidebar/loadingSpinner.js","components/sidebar/infoCard.js","components/sidebar/index.js","App.js","reportWebVitals.js","index.js"],"names":["zoomMapToBoundingObject","map","boundingObject","topRight","bottomLeft","fitBounds","lng","lat","showTooltip","e","d","d3","transition","duration","style","pageX","pageY","resetAllCircleColors","ID_KEY_NAME","CITY_KEY_NAME","KINDNESS_KEY_NAME","TooltipContents","node","isSelected","inp","length","city","DataConstants","state","kindness","substring","styles","width","height","position","mapboxgl","accessToken","workerClass","MapboxWorker","MapboxGLMap","one","two","setIsLoading","data","selectedNode","setSelectedNode","hoveredNode","setHoveredNode","traceNode","traceList","setTraceList","traceIndex","useState","setMap","mapContainer","useRef","dataProc","i","index","DataUtils","uniqueCircleId","circleClass","lngLatPoints","paddingMiles","paddingDegrees","extractKey","key","maxLng","Math","max","minLng","min","maxLat","useEffect","myMap","Map","container","current","on","MapUtils","getCanvasContainer","svg","append","attr","project","LngLat","dots","selectAll","enter","callback","target","flyTo","center","zoom","essential","mapRender","x","y","resize","remove","dataFilt","filter","currentNode","ref","el","className","KindnessCard","street","zip","LoadingSpinner","SidebarInfoCard","Sidebar","isLoading","setTraceNode","setTraceIndex","onClick","color","cursor","App","setData","Tabletop","init","simpleSheet","then","catch","console","warn","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1659fd06.chunk.js","sourcesContent":["import * as d3 from 'd3'\nimport mapboxgl from \"mapbox-gl\"\n\nconst initializeMap = ({ setMap, mapContainer, boundingObject }) => {\n    const myMap = new mapboxgl.Map({\n        container: mapContainer.current,\n        style: 'mapbox://styles/mapbox/light-v10',\n    })\n\n    // immediately center based on the bounding box of our data points\n    zoomMapToBoundingObject(myMap, boundingObject)\n\n    myMap.on(\"load\", () => {\n        setMap(myMap)\n    })\n}\n\nconst zoomMapToBoundingObject = (map, boundingObject) => {\n    const { topRight, bottomLeft } = boundingObject\n    map.fitBounds([\n        [bottomLeft.lng, bottomLeft.lat],\n        [topRight.lng, topRight.lat]\n    ]);\n}\n\nconst showTooltip = (e, d) => {\n    const tooltip = d3.select('.map-tooltip')\n    tooltip\n        .transition()\n        .duration(0)\n        .style('opacity', 0.8)\n        .style('left', `${e.pageX + 50}px`)\n        .style('top', `${e.pageY - 50}px`)\n}\n\nconst hideTooltip = (callback) => {\n    const tooltip = d3.select('.map-tooltip')\n    tooltip\n        .transition().duration(500)\n        .style(\"opacity\", 0)\n        .on('end', callback)\n}\n\nconst selectNode = (target, d) => {\n    return\n} \n\nconst resetAllCircleColors = () => {\n    d3.selectAll('.circle')\n        .transition()\n        .duration(500)\n        .style('fill', 'steelblue')\n}\n\nexport {\n    initializeMap,\n    zoomMapToBoundingObject,\n    showTooltip,\n    hideTooltip,\n    selectNode,\n    resetAllCircleColors,\n}\n","const ID_KEY_NAME = 'ID NUMBER on kindness card'\nconst CITY_KEY_NAME = 'CITY where act of kindness took place'\nconst STATE_KEY_NAME = 'STATE'\nconst ZIP_KEY_NAME = '[OPTIONAL] ZIP CODE'\nconst STREET_KEY_NAME = '[Optional] STREET NAME'\nconst KINDNESS_KEY_NAME = '[Optional] Tell us about the act of kindness you received!'\nconst CENTER_LNG_KEY_NAME = 'CenterLon'\nconst CENTER_LAT_KEY_NAME = 'CenterLat'\n\nconst TEST_DATA_URL = 'https://docs.google.com/spreadsheets/d/1IqEBIcnFZ_BFCrD8jhk11yVoOjfxzZpiZLdL4cL3oK0/pubhtml'\nconst SPOOF_DATA_URL = 'https://docs.google.com/spreadsheets/d/1BvBwyy1xYYhdiokMfbyxssu5nlB0arRMvxyuQLCzsH4/pubhtml'\n\n// TOOD add constants for new parsed geo fields when those are avaiable\n// Spoof Data Names\n// const ID_KEY_NAME = 'id'\n// const STREET_KEY_NAME = 'street'\n// const STATE_KEY_NAME = 'admin_level_1'\n// const CITY_KEY_NAME = 'city'\n// const ZIP_KEY_NAME = 'zip_code'\n// const KINDNESS_KEY_NAME = 'description'\n// const CENTER_LNG_KEY_NAME = 'center_lon'\n// const CENTER_LAT_KEY_NAME = 'center_lat'\n\nexport {\n    ID_KEY_NAME,\n    CITY_KEY_NAME,\n    STATE_KEY_NAME,\n    ZIP_KEY_NAME,\n    STREET_KEY_NAME,\n    KINDNESS_KEY_NAME,\n    CENTER_LNG_KEY_NAME,\n    CENTER_LAT_KEY_NAME,\n\n    TEST_DATA_URL,\n    SPOOF_DATA_URL,\n}\n","import * as DataConstants from '../../utils/dataConstants'\nimport * as StringUtils from '../../utils/stringUtils'\n\nconst TooltipContents = ({ node, isSelected }) => {\n    // handle null node case\n    if (! node) {\n        return null;\n    }\n\n    const city = node[DataConstants.CITY_KEY_NAME]\n    const state = node[DataConstants.STATE_KEY_NAME]\n    const kindness = node[DataConstants.KINDNESS_KEY_NAME]\n\n    return (\n        <div>\n            <p><b>{city ? `${city}, ` : null}{state}</b></p>\n            <p><b>{StringUtils.trimWithElipses(kindness, 140)}</b></p>\n            <p>{! isSelected ? 'Click for more info!' : null}</p>\n        </div>\n    )\n}\n\nexport default TooltipContents\n","const trimWithElipses = (inp, length) => {\n    if (inp.length > length) {\n        return `${inp.substring(0, length)}`\n    }\n    \n    return inp\n}\n\nexport {\n    trimWithElipses\n}","import React, { useEffect, useRef, useState } from \"react\"\nimport mapboxgl from \"mapbox-gl\"\n// import \"mapbox-gl/dist/mapbox-gl.css\"\nimport * as d3 from 'd3'\nimport * as MapUtils from './mapUtils'\nimport * as DataConstants from '../../utils/dataConstants'\nimport MapboxWorker from 'worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker';\nimport TooltipContents from '../tooltip'\nimport * as DataUtils from '../../utils/dataUtils'\n\nimport '../../styles/Map.css'\n\nconst styles = {\n    width: \"100vw\",\n    height: \"100vh\",\n    position: \"absolute\"\n}\n\nconst POINT_ZOOM = 12\n\nmapboxgl.accessToken = 'pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ'\nmapboxgl.workerClass = MapboxWorker;\n\nconst MapboxGLMap = ({ setIsLoading, data, selectedNode, setSelectedNode, hoveredNode, setHoveredNode, traceNode, traceList, setTraceList, traceIndex }) => {\n    const [map, setMap] = useState(null)\n    const mapContainer = useRef(null)\n\n    const dataProc = DataUtils.processRawSheetsData(data)\n\n    // write function to generate ID of circle\n    const uniqueCircleId = d => `circle-${d.index}`\n\n    // write function to generate class of circle based off id key\n    const circleClass = d => `circle circle-${d[DataConstants.ID_KEY_NAME]}`\n\n    // get the bounds of our data\n    const boundingObject = dataProc ? DataUtils.computeLngLatBoundingBox(\n        dataProc.map(d => ({\n            lng: d[DataConstants.CENTER_LNG_KEY_NAME],\n            lat: d[DataConstants.CENTER_LAT_KEY_NAME],\n        })),\n        200\n    ) : null\n\n    useEffect(() => {\n        if (!map && dataProc) {\n            MapUtils.initializeMap({ setMap, mapContainer, boundingObject })\n        }\n    }, [map, dataProc])\n\n    useEffect(() => {\n        if (map && data !== null) {\n            var container = map.getCanvasContainer()\n            var svg = d3\n                .select(container)\n                .append(\"svg\")\n                .attr(\"width\", \"100%\")\n                .attr(\"height\", \"100%\")\n                .style(\"position\", \"absolute\")\n                .style(\"z-index\", 2)\n                .style('top', 0)\n                .style('left', 0)\n\n            // write projection function\n            const project = (d) => {\n                return map.project(\n                    new mapboxgl.LngLat(d[DataConstants.CENTER_LNG_KEY_NAME], d[DataConstants.CENTER_LAT_KEY_NAME])\n                )\n            }\n\n            var dots = svg\n                .selectAll(\"circle\")\n                .data(dataProc)\n                .enter()\n                .append('circle')\n                .attr('id', uniqueCircleId)\n                .attr('class', circleClass)\n                .attr(\"r\", 10)\n                .style(\"fill\", \"steelblue\")\n                .on('mouseover', (e, d) => {\n                    setHoveredNode(d)\n                    MapUtils.showTooltip(e, d)\n                })\n                .on('mousemove', (e, d) => {\n                    MapUtils.showTooltip(e, d)\n                })\n                .on('mouseout', (e, d) => {\n                    MapUtils.hideTooltip(() => setHoveredNode(null))\n                })\n                .on('click', (e, d) => {\n                    MapUtils.resetAllCircleColors()\n\n                    // make this circle red\n                    const circle = d3.select(`#${uniqueCircleId(d)}`)\n                    circle\n                        .transition()\n                        .duration(500)\n                        .style('fill', 'red')\n\n                    MapUtils.selectNode(e.target, d)\n\n                    map.flyTo({\n                        center: [\n                            d[DataConstants.CENTER_LNG_KEY_NAME],\n                            d[DataConstants.CENTER_LAT_KEY_NAME],\n                        ],\n                        zoom: POINT_ZOOM, // TODO cofigure this zoom amount\n                        essential: true // this animation is considered essential with respect to prefers-reduced-motion\n                    });\n\n                    // set the selected node and callback the parent\n                    // TODO potentially clear any tracing if this node is not in the current trace\n                    // have to tighten up logic around this...\n                    setSelectedNode(d)\n                })\n\n            // define render function for mapbox\n            const mapRender = () => {\n                // project dots\n                dots\n                    .attr('cx', d => project(d).x)\n                    .attr('cy', d => project(d).y)\n            }\n\n            map.on('viewreset', mapRender)\n            map.on('move', mapRender)\n            map.on('moveend', mapRender)\n\n            map.on('load', () => {\n                map.resize()\n            })\n\n            mapRender()\n\n            // notify that we are done loading\n            setIsLoading(false)\n\n            return () => map.remove()\n        }\n    }, [map, data])\n\n    useEffect(() => {\n        // re-fly to center on selectedNode update\n        if (map && data && !selectedNode) {\n            MapUtils.zoomMapToBoundingObject(map, boundingObject)\n            MapUtils.resetAllCircleColors()\n        }\n    }, [map, data, selectedNode])\n\n    useEffect(() => {\n        if (traceNode) {\n            // Filter data\n            const dataFilt = dataProc.filter(d => d[DataConstants.ID_KEY_NAME] == traceNode[DataConstants.ID_KEY_NAME])\n            \n            MapUtils.resetAllCircleColors()\n            d3.selectAll('.circle')\n                .filter(d => d[DataConstants.ID_KEY_NAME] == traceNode[DataConstants.ID_KEY_NAME])\n                .transition()\n                .duration(500)\n                .style('fill', 'purple')\n            \n            // for now, re-fly map to center\n            MapUtils.zoomMapToBoundingObject(map, boundingObject)\n\n            // set the trace list\n            setTraceList(dataFilt)\n        }\n    }, [traceNode])\n\n    useEffect(() => {\n        if (map && traceList && traceIndex > -1) {\n            // get the node at the index and fly there!\n            const currentNode = traceList[traceIndex]\n            map.flyTo({\n                center: [\n                    currentNode[DataConstants.CENTER_LNG_KEY_NAME],\n                    currentNode[DataConstants.CENTER_LAT_KEY_NAME],\n                ],\n                zoom: POINT_ZOOM,\n                essential: true,\n            })\n\n            // also make that node red\n            MapUtils.resetAllCircleColors()\n            d3.selectAll('.circle')\n                .filter(d => d[DataConstants.ID_KEY_NAME] == traceNode[DataConstants.ID_KEY_NAME])\n                .transition()\n                .duration(500)\n                .style('fill', 'purple')\n            d3.select(`#${uniqueCircleId(traceList[traceIndex])}`)\n                .transition()\n                .duration(500)\n                .style('fill', 'green')\n        }\n    }, [traceIndex])\n\n    return <div ref={el => (mapContainer.current = el)} style={styles}>\n        <div className=\"map-tooltip\" style={{ \"opacity\": 0 }}>\n            <TooltipContents node={hoveredNode} isSelected={DataUtils.nodesAreEqual(hoveredNode, selectedNode)} />\n        </div>\n    </div>\n}\n\nexport default MapboxGLMap\n","const DEGREES_TO_MILES = 69\nconst LNG_KEY = 'lng'\nconst LAT_KEY = 'lat'\n\nconst processRawSheetsData = (data) => {\n    const dataProc = data ? data.map((d, i) => ({\n        ...d,\n        index: i\n    })) : null\n    return dataProc\n}\n\nconst nodesAreEqual = (one, two) => {\n    if (! one || ! two)\n        return false\n        \n    return one.index == two.index\n}\n\nconst computeLngLatBoundingBox = (lngLatPoints, paddingMiles) => {\n    // compute top right and bottom left\n    // then, add some padding amount in miles\n    const paddingDegrees = paddingMiles / DEGREES_TO_MILES\n\n    const extractKey = key => lngLatPoints.map((d => d[key]))\n\n    const maxLng = Math.max(...extractKey(LNG_KEY))\n    const minLng = Math.min(...extractKey(LNG_KEY))\n    const maxLat = Math.max(...extractKey(LAT_KEY))\n    const minLat = Math.min(...extractKey(LAT_KEY))\n\n    return {\n        topRight: {\n            lng: maxLng + paddingDegrees,\n            lat: minLat + paddingDegrees,\n        },\n        bottomLeft: {\n            lng: minLng - paddingDegrees * 6,\n            lat: maxLat - paddingDegrees,\n        }\n    }\n}\n\nexport {\n    processRawSheetsData,\n    nodesAreEqual,\n    computeLngLatBoundingBox,\n}\n","import { useEffect } from 'react';\nimport * as DataConstants from '../../utils/dataConstants'\n\nconst KindnessCard = ({ node }) => {\n    // handle null node case\n    if (! node) {\n        return null;\n    }\n\n    const street = node[DataConstants.STREET_KEY_NAME]\n    const city = node[DataConstants.CITY_KEY_NAME]\n    const state = node[DataConstants.STATE_KEY_NAME]\n    const zip = node[DataConstants.ZIP_KEY_NAME]\n    const kindness = node[DataConstants.KINDNESS_KEY_NAME]\n\n    return (\n        <div className=\"kindness-card-inner\">\n            <p>Address: <b>{street || 'No street provided.'}</b></p>\n            <p>City: <b>{city || 'No city provided.'}</b></p>\n            <p>State: <b>{state || 'No state provided.'}</b></p>\n            <p>Zip Code: <b>{zip || 'No zip code provided.'}</b></p>\n            <p>Act of Kindness Description:</p>\n            <p><b>{kindness || 'No kindess description provided.'}</b></p>\n        </div>\n    )\n}\n\nexport default KindnessCard","import '../../styles/Loading.css'\n\nconst LoadingSpinner = () => {\n    return (\n        <div className=\"loading-wrapper\">\n            <div className=\"la-ball-clip-rotate la-2x\">\n                <div></div>\n            </div>\n            <p>Loading...</p>\n        </div>\n    )\n}\n\nexport default LoadingSpinner\n","/*\n    Simple component to render some useful info when no node is selected.\n*/\nconst SidebarInfoCard = () => {\n    return (\n        <div>\n            <p>Click a circle to explore that act of kindness further!</p>\n        </div>\n    )\n}\n\nexport default SidebarInfoCard","import '../../styles/Sidebar.css'\nimport * as DataConstants from '../../utils/dataConstants'\nimport KindessCard from './kindessCard'\nimport LoadingSpinner from './loadingSpinner'\nimport SidebarInfoCard from './infoCard'\n\nconst Sidebar = ({ isLoading, selectedNode, setSelectedNode, setTraceNode, traceList, setTraceList, traceIndex, setTraceIndex }) => {\n    return (\n        <div className=\"sidebar-flex\">\n            <h1>Kindess Tracker</h1>\n            {\n                isLoading ? <LoadingSpinner /> : null\n            }\n            {\n                ! isLoading && ! selectedNode ? <SidebarInfoCard /> : null\n            }\n            <div className=\"selected-card-wrapper\">\n                <KindessCard node={selectedNode} />\n            </div>\n            {\n                selectedNode ? (\n                    <button onClick={() => {\n                        setSelectedNode(null)\n                        setTraceList([])\n                        setTraceIndex(-1)\n                    }}>Clear Selected Node</button>\n                ) : null\n            }\n            {\n                selectedNode ? (\n                    <button onClick={() => setTraceNode(selectedNode)}>Trace this Act!</button>\n                ) : null\n            }\n            {\n                traceList ? (\n                    traceList.map((d, i) => {\n                        return (\n                            <p key={i} onClick={() => setTraceIndex(i)} style={{color: i == traceIndex ? 'blue' : 'white', cursor: 'pointer'}}>\n                                {d[DataConstants.ID_KEY_NAME]}\n                            </p>\n                        )\n                    })\n                ) : null\n            }\n\n        </div>\n    )\n}\n\nexport default Sidebar\n","import React, { useEffect, useState } from 'react'\nimport Tabletop from 'tabletop'\nimport { Sidebar, MapboxGLMap } from './components'\nimport mapboxgl from 'mapbox-gl/dist/mapbox-gl-csp'\nimport MapboxWorker from 'worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker'\nimport * as DataConstants from './utils/dataConstants'\n\n\nconst MAPBOX_ACCESS_TOKEN = 'pk.eyJ1IjoiY21vcm9uZXkiLCJhIjoiY2tudGNscDJjMDFldDJ3b3pjMTh6ejJyayJ9.YAPmFkdy_Eh9K20cFlIvaQ'\nmapboxgl.workerClass = MapboxWorker\nmapboxgl.accessToken = MAPBOX_ACCESS_TOKEN\n\nconst US_CENTER_LAT = 39.8283\nconst US_CENTER_LNG = -98.5795\nconst INITIAL_ZOOM = 3.75\n\nimport './styles/App.css'\n\nconst App = () => {\n  const [data, setData] = useState(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const [selectedNode, setSelectedNode] = useState(null)\n  const [hoveredNode, setHoveredNode] = useState(null)\n  const [traceNode, setTraceNode] = useState(null)\n  const [traceList, setTraceList] = useState([])\n  const [traceIndex, setTraceIndex] = useState(-1)\n\n  useEffect(() => {\n    if (data === null) {\n      Tabletop.init({\n        key: DataConstants.SPOOF_DATA_URL,\n        simpleSheet: true,\n      })\n        .then(data => {\n          setData(data)\n        })\n        .catch(console.warn)\n    }\n  }, [data])\n\n  return (\n    <div className=\"App\">\n      <div className=\"horizontal-stack\">\n        <div className=\"left-sidebar\">\n          <Sidebar\n            isLoading={isLoading}\n            selectedNode={selectedNode}\n            setSelectedNode={setSelectedNode}\n            setTraceNode={setTraceNode}\n            traceList={traceList}\n            setTraceList={setTraceList}\n            traceIndex={traceIndex}\n            setTraceIndex={setTraceIndex}\n          />\n        </div>\n        <div className=\"map-wrapper\">\n          {/* <MapViewDemo data={data} map={map} selectedNode={selectedNode} setSelectedNode={setSelectedNode}  /> */}\n          <MapboxGLMap\n            data={data}\n            setIsLoading={setIsLoading}\n            selectedNode={selectedNode}\n            setSelectedNode={setSelectedNode}\n            hoveredNode={hoveredNode}\n            setHoveredNode={setHoveredNode}\n            traceNode={traceNode}\n            traceList={traceList}\n            setTraceList={setTraceList}\n            traceIndex={traceIndex}\n          />\n        </div>\n      </div>\n\n    </div>\n  );\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}